{"version":3,"file":"face-api.js","sources":["../node_modules/tfjs-image-recognition-base/build/es6/common/convLayer.js","../node_modules/tfjs-image-recognition-base/build/es6/common/disposeUnusedWeightTensors.js","../node_modules/tfjs-image-recognition-base/build/es6/common/extractConvParamsFactory.js","../node_modules/tfjs-image-recognition-base/build/es6/common/extractFCParamsFactory.js","../node_modules/tfjs-image-recognition-base/build/es6/common/types.js","../node_modules/tfjs-image-recognition-base/build/es6/common/extractSeparableConvParamsFactory.js","../node_modules/tfjs-image-recognition-base/build/es6/classes/Dimensions.js","../node_modules/tfjs-image-recognition-base/build/es6/classes/Point.js","../node_modules/tfjs-image-recognition-base/build/es6/utils/index.js","../node_modules/tfjs-image-recognition-base/build/es6/common/extractWeightEntryFactory.js","../node_modules/tfjs-image-recognition-base/build/es6/common/extractWeightsFactory.js","../node_modules/tfjs-image-recognition-base/build/es6/common/getModelUris.js","../node_modules/tfjs-image-recognition-base/build/es6/classes/Box.js","../node_modules/tfjs-image-recognition-base/build/es6/classes/BoundingBox.js","../node_modules/tfjs-image-recognition-base/build/es6/classes/ObjectDetection.js","../node_modules/tfjs-image-recognition-base/build/es6/env/createBrowserEnv.js","../node_modules/tfjs-image-recognition-base/build/es6/env/createFileSystem.js","../node_modules/tfjs-image-recognition-base/build/es6/env/createNodejsEnv.js","../node_modules/tfjs-image-recognition-base/build/es6/env/isBrowser.js","../node_modules/tfjs-image-recognition-base/build/es6/env/isNodejs.js","../node_modules/tfjs-image-recognition-base/build/es6/env/index.js","../node_modules/tfjs-image-recognition-base/build/es6/dom/isMediaLoaded.js","../node_modules/tfjs-image-recognition-base/build/es6/dom/awaitMediaLoaded.js","../node_modules/tfjs-image-recognition-base/build/es6/dom/bufferToImage.js","../node_modules/tfjs-image-recognition-base/build/es6/dom/getContext2dOrThrow.js","../node_modules/tfjs-image-recognition-base/build/es6/dom/getMediaDimensions.js","../node_modules/tfjs-image-recognition-base/build/es6/dom/createCanvas.js","../node_modules/tfjs-image-recognition-base/build/es6/dom/getDefaultDrawOptions.js","../node_modules/tfjs-image-recognition-base/build/es6/dom/drawBox.js","../node_modules/tfjs-image-recognition-base/build/es6/classes/BoxWithText.js","../node_modules/tfjs-image-recognition-base/build/es6/classes/LabeledBox.js","../node_modules/tfjs-image-recognition-base/build/es6/classes/PredictedBox.js","../node_modules/tfjs-image-recognition-base/build/es6/dom/drawText.js","../node_modules/tfjs-image-recognition-base/build/es6/dom/resolveInput.js","../node_modules/tfjs-image-recognition-base/build/es6/dom/drawDetection.js","../node_modules/tfjs-image-recognition-base/build/es6/dom/fetchOrThrow.js","../node_modules/tfjs-image-recognition-base/build/es6/dom/fetchImage.js","../node_modules/tfjs-image-recognition-base/build/es6/dom/fetchJson.js","../node_modules/tfjs-image-recognition-base/build/es6/dom/fetchNetWeights.js","../node_modules/tfjs-image-recognition-base/build/es6/dom/imageTensorToCanvas.js","../node_modules/tfjs-image-recognition-base/build/es6/dom/imageToSquare.js","../node_modules/tfjs-image-recognition-base/build/es6/dom/isMediaElement.js","../node_modules/tfjs-image-recognition-base/build/es6/dom/loadWeightMap.js","../node_modules/tfjs-image-recognition-base/build/es6/ops/padToSquare.js","../node_modules/tfjs-image-recognition-base/build/es6/dom/NetInput.js","../node_modules/tfjs-image-recognition-base/build/es6/dom/toNetInput.js","../node_modules/tfjs-image-recognition-base/build/es6/NeuralNetwork.js","../node_modules/tfjs-image-recognition-base/build/es6/ops/iou.js","../node_modules/tfjs-image-recognition-base/build/es6/ops/nonMaxSuppression.js","../node_modules/tfjs-image-recognition-base/build/es6/ops/normalize.js","../node_modules/tfjs-image-recognition-base/build/es6/ops/shuffleArray.js","../node_modules/tfjs-image-recognition-base/build/es6/ops/index.js","../node_modules/tfjs-image-recognition-base/build/es6/tinyYolov2/config.js","../node_modules/tfjs-image-recognition-base/build/es6/tinyYolov2/leaky.js","../node_modules/tfjs-image-recognition-base/build/es6/tinyYolov2/convWithBatchNorm.js","../node_modules/tfjs-image-recognition-base/build/es6/tinyYolov2/depthwiseSeparableConv.js","../node_modules/tfjs-image-recognition-base/build/es6/tinyYolov2/extractParams.js","../node_modules/tfjs-image-recognition-base/build/es6/tinyYolov2/extractParamsFromWeigthMap.js","../node_modules/tfjs-image-recognition-base/build/es6/tinyYolov2/TinyYolov2Options.js","../node_modules/tfjs-image-recognition-base/build/es6/tinyYolov2/TinyYolov2.js","../node_modules/tfjs-image-recognition-base/build/es6/classes/Rect.js","../src/classes/FaceDetection.ts","../src/classes/FaceLandmarks.ts","../src/classes/FaceLandmarks5.ts","../src/classes/FaceLandmarks68.ts","../src/classes/FaceMatch.ts","../src/classes/LabeledFaceDescriptors.ts","../src/dom/drawContour.ts","../src/dom/drawLandmarks.ts","../src/dom/drawFaceExpressions.ts","../src/dom/extractFaces.ts","../src/dom/extractFaceTensors.ts","../src/faceFeatureExtractor/depthwiseSeparableConv.ts","../src/faceFeatureExtractor/denseBlock.ts","../src/faceFeatureExtractor/extractorsFactory.ts","../src/faceFeatureExtractor/extractParams.ts","../src/faceFeatureExtractor/loadParamsFactory.ts","../src/faceFeatureExtractor/extractParamsFromWeigthMap.ts","../src/faceFeatureExtractor/FaceFeatureExtractor.ts","../src/common/fullyConnectedLayer.ts","../src/faceProcessor/extractParams.ts","../src/faceProcessor/extractParamsFromWeigthMap.ts","../src/faceProcessor/util.ts","../src/faceProcessor/FaceProcessor.ts","../src/faceExpressionNet/types.ts","../src/faceExpressionNet/FaceExpressionNet.ts","../src/faceLandmarkNet/FaceLandmark68NetBase.ts","../src/faceLandmarkNet/FaceLandmark68Net.ts","../src/faceFeatureExtractor/extractParamsFromWeigthMapTiny.ts","../src/faceFeatureExtractor/extractParamsTiny.ts","../src/faceFeatureExtractor/TinyFaceFeatureExtractor.ts","../src/faceLandmarkNet/FaceLandmark68TinyNet.ts","../src/faceLandmarkNet/index.ts","../src/faceRecognitionNet/scaleLayer.ts","../src/faceRecognitionNet/convLayer.ts","../src/faceRecognitionNet/extractParams.ts","../src/faceRecognitionNet/extractParamsFromWeigthMap.ts","../src/faceRecognitionNet/residualLayer.ts","../src/faceRecognitionNet/FaceRecognitionNet.ts","../src/faceRecognitionNet/index.ts","../src/factories/WithFaceDescriptor.ts","../src/factories/WithFaceDetection.ts","../src/factories/WithFaceExpressions.ts","../src/factories/WithFaceLandmarks.ts","../src/mtcnn/MtcnnOptions.ts","../src/ssdMobilenetv1/extractParams.ts","../src/ssdMobilenetv1/extractParamsFromWeigthMap.ts","../src/ssdMobilenetv1/pointwiseConvLayer.ts","../src/ssdMobilenetv1/mobileNetV1.ts","../src/ssdMobilenetv1/nonMaxSuppression.ts","../src/ssdMobilenetv1/outputLayer.ts","../src/ssdMobilenetv1/boxPredictionLayer.ts","../src/ssdMobilenetv1/predictionLayer.ts","../src/ssdMobilenetv1/SsdMobilenetv1Options.ts","../src/ssdMobilenetv1/SsdMobilenetv1.ts","../src/ssdMobilenetv1/index.ts","../src/tinyFaceDetector/TinyFaceDetectorOptions.ts","../src/globalApi/ComposableTask.ts","../src/mtcnn/bgrToRgbTensor.ts","../src/mtcnn/config.ts","../src/mtcnn/extractParams.ts","../src/mtcnn/extractParamsFromWeigthMap.ts","../src/mtcnn/getSizesForScale.ts","../src/mtcnn/pyramidDown.ts","../src/mtcnn/MtcnnBox.ts","../src/mtcnn/normalize.ts","../src/mtcnn/prelu.ts","../src/mtcnn/sharedLayers.ts","../src/mtcnn/PNet.ts","../src/mtcnn/stage1.ts","../src/mtcnn/extractImagePatches.ts","../src/mtcnn/RNet.ts","../src/mtcnn/stage2.ts","../src/mtcnn/ONet.ts","../src/mtcnn/stage3.ts","../src/mtcnn/Mtcnn.ts","../src/tinyFaceDetector/const.ts","../src/tinyFaceDetector/TinyFaceDetector.ts","../src/tinyYolov2/const.ts","../src/tinyYolov2/TinyYolov2.ts","../src/tinyYolov2/index.ts","../src/globalApi/nets.ts","../src/globalApi/ComputeFaceDescriptorsTasks.ts","../src/globalApi/DetectFaceLandmarksTasks.ts","../src/globalApi/PredictFaceExpressionsTask.ts","../src/globalApi/DetectFacesTasks.ts","../src/globalApi/detectFaces.ts","../src/globalApi/allFaces.ts","../src/euclideanDistance.ts","../src/globalApi/FaceMatcher.ts","../src/mtcnn/index.ts","../src/tinyFaceDetector/index.ts","../src/resizeResults.ts"],"sourcesContent":["import * as tf from '@tensorflow/tfjs-core';\nexport function convLayer(x, params, padding, withRelu) {\n    if (padding === void 0) { padding = 'same'; }\n    if (withRelu === void 0) { withRelu = false; }\n    return tf.tidy(function () {\n        var out = tf.add(tf.conv2d(x, params.filters, [1, 1], padding), params.bias);\n        return withRelu ? tf.relu(out) : out;\n    });\n}\n//# sourceMappingURL=convLayer.js.map","export function disposeUnusedWeightTensors(weightMap, paramMappings) {\n    Object.keys(weightMap).forEach(function (path) {\n        if (!paramMappings.some(function (pm) { return pm.originalPath === path; })) {\n            weightMap[path].dispose();\n        }\n    });\n}\n//# sourceMappingURL=disposeUnusedWeightTensors.js.map","import * as tf from '@tensorflow/tfjs-core';\nexport function extractConvParamsFactory(extractWeights, paramMappings) {\n    return function (channelsIn, channelsOut, filterSize, mappedPrefix) {\n        var filters = tf.tensor4d(extractWeights(channelsIn * channelsOut * filterSize * filterSize), [filterSize, filterSize, channelsIn, channelsOut]);\n        var bias = tf.tensor1d(extractWeights(channelsOut));\n        paramMappings.push({ paramPath: mappedPrefix + \"/filters\" }, { paramPath: mappedPrefix + \"/bias\" });\n        return { filters: filters, bias: bias };\n    };\n}\n//# sourceMappingURL=extractConvParamsFactory.js.map","import * as tf from '@tensorflow/tfjs-core';\nexport function extractFCParamsFactory(extractWeights, paramMappings) {\n    return function (channelsIn, channelsOut, mappedPrefix) {\n        var fc_weights = tf.tensor2d(extractWeights(channelsIn * channelsOut), [channelsIn, channelsOut]);\n        var fc_bias = tf.tensor1d(extractWeights(channelsOut));\n        paramMappings.push({ paramPath: mappedPrefix + \"/weights\" }, { paramPath: mappedPrefix + \"/bias\" });\n        return {\n            weights: fc_weights,\n            bias: fc_bias\n        };\n    };\n}\n//# sourceMappingURL=extractFCParamsFactory.js.map","var SeparableConvParams = /** @class */ (function () {\n    function SeparableConvParams(depthwise_filter, pointwise_filter, bias) {\n        this.depthwise_filter = depthwise_filter;\n        this.pointwise_filter = pointwise_filter;\n        this.bias = bias;\n    }\n    return SeparableConvParams;\n}());\nexport { SeparableConvParams };\n//# sourceMappingURL=types.js.map","import * as tf from '@tensorflow/tfjs-core';\nimport { SeparableConvParams } from './types';\nexport function extractSeparableConvParamsFactory(extractWeights, paramMappings) {\n    return function (channelsIn, channelsOut, mappedPrefix) {\n        var depthwise_filter = tf.tensor4d(extractWeights(3 * 3 * channelsIn), [3, 3, channelsIn, 1]);\n        var pointwise_filter = tf.tensor4d(extractWeights(channelsIn * channelsOut), [1, 1, channelsIn, channelsOut]);\n        var bias = tf.tensor1d(extractWeights(channelsOut));\n        paramMappings.push({ paramPath: mappedPrefix + \"/depthwise_filter\" }, { paramPath: mappedPrefix + \"/pointwise_filter\" }, { paramPath: mappedPrefix + \"/bias\" });\n        return new SeparableConvParams(depthwise_filter, pointwise_filter, bias);\n    };\n}\nexport function loadSeparableConvParamsFactory(extractWeightEntry) {\n    return function (prefix) {\n        var depthwise_filter = extractWeightEntry(prefix + \"/depthwise_filter\", 4);\n        var pointwise_filter = extractWeightEntry(prefix + \"/pointwise_filter\", 4);\n        var bias = extractWeightEntry(prefix + \"/bias\", 1);\n        return new SeparableConvParams(depthwise_filter, pointwise_filter, bias);\n    };\n}\n//# sourceMappingURL=extractSeparableConvParamsFactory.js.map","import { isValidNumber } from '../utils';\nvar Dimensions = /** @class */ (function () {\n    function Dimensions(width, height) {\n        if (!isValidNumber(width) || !isValidNumber(height)) {\n            throw new Error(\"Dimensions.constructor - expected width and height to be valid numbers, instead have \" + JSON.stringify({ width: width, height: height }));\n        }\n        this._width = width;\n        this._height = height;\n    }\n    Object.defineProperty(Dimensions.prototype, \"width\", {\n        get: function () { return this._width; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Dimensions.prototype, \"height\", {\n        get: function () { return this._height; },\n        enumerable: true,\n        configurable: true\n    });\n    Dimensions.prototype.reverse = function () {\n        return new Dimensions(1 / this.width, 1 / this.height);\n    };\n    return Dimensions;\n}());\nexport { Dimensions };\n//# sourceMappingURL=Dimensions.js.map","var Point = /** @class */ (function () {\n    function Point(x, y) {\n        this._x = x;\n        this._y = y;\n    }\n    Object.defineProperty(Point.prototype, \"x\", {\n        get: function () { return this._x; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Point.prototype, \"y\", {\n        get: function () { return this._y; },\n        enumerable: true,\n        configurable: true\n    });\n    Point.prototype.add = function (pt) {\n        return new Point(this.x + pt.x, this.y + pt.y);\n    };\n    Point.prototype.sub = function (pt) {\n        return new Point(this.x - pt.x, this.y - pt.y);\n    };\n    Point.prototype.mul = function (pt) {\n        return new Point(this.x * pt.x, this.y * pt.y);\n    };\n    Point.prototype.div = function (pt) {\n        return new Point(this.x / pt.x, this.y / pt.y);\n    };\n    Point.prototype.abs = function () {\n        return new Point(Math.abs(this.x), Math.abs(this.y));\n    };\n    Point.prototype.magnitude = function () {\n        return Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2));\n    };\n    Point.prototype.floor = function () {\n        return new Point(Math.floor(this.x), Math.floor(this.y));\n    };\n    return Point;\n}());\nexport { Point };\n//# sourceMappingURL=Point.js.map","import * as tf from '@tensorflow/tfjs-core';\nimport { Dimensions } from '../classes/Dimensions';\nimport { Point } from '../classes/Point';\nexport function isTensor(tensor, dim) {\n    return tensor instanceof tf.Tensor && tensor.shape.length === dim;\n}\nexport function isTensor1D(tensor) {\n    return isTensor(tensor, 1);\n}\nexport function isTensor2D(tensor) {\n    return isTensor(tensor, 2);\n}\nexport function isTensor3D(tensor) {\n    return isTensor(tensor, 3);\n}\nexport function isTensor4D(tensor) {\n    return isTensor(tensor, 4);\n}\nexport function isFloat(num) {\n    return num % 1 !== 0;\n}\nexport function isEven(num) {\n    return num % 2 === 0;\n}\nexport function round(num, prec) {\n    if (prec === void 0) { prec = 2; }\n    var f = Math.pow(10, prec);\n    return Math.floor(num * f) / f;\n}\nexport function isDimensions(obj) {\n    return obj && obj.width && obj.height;\n}\nexport function computeReshapedDimensions(_a, inputSize) {\n    var width = _a.width, height = _a.height;\n    var scale = inputSize / Math.max(height, width);\n    return new Dimensions(Math.round(width * scale), Math.round(height * scale));\n}\nexport function getCenterPoint(pts) {\n    return pts.reduce(function (sum, pt) { return sum.add(pt); }, new Point(0, 0))\n        .div(new Point(pts.length, pts.length));\n}\nexport function range(num, start, step) {\n    return Array(num).fill(0).map(function (_, i) { return start + (i * step); });\n}\nexport function isValidNumber(num) {\n    return !!num && num !== Infinity && num !== -Infinity && !isNaN(num) || num === 0;\n}\nexport function isValidProbablitiy(num) {\n    return isValidNumber(num) && 0 <= num && num <= 1.0;\n}\n//# sourceMappingURL=index.js.map","import { isTensor } from '../utils';\nexport function extractWeightEntryFactory(weightMap, paramMappings) {\n    return function (originalPath, paramRank, mappedPath) {\n        var tensor = weightMap[originalPath];\n        if (!isTensor(tensor, paramRank)) {\n            throw new Error(\"expected weightMap[\" + originalPath + \"] to be a Tensor\" + paramRank + \"D, instead have \" + tensor);\n        }\n        paramMappings.push({ originalPath: originalPath, paramPath: mappedPath || originalPath });\n        return tensor;\n    };\n}\n//# sourceMappingURL=extractWeightEntryFactory.js.map","export function extractWeightsFactory(weights) {\n    var remainingWeights = weights;\n    function extractWeights(numWeights) {\n        var ret = remainingWeights.slice(0, numWeights);\n        remainingWeights = remainingWeights.slice(numWeights);\n        return ret;\n    }\n    function getRemainingWeights() {\n        return remainingWeights;\n    }\n    return {\n        extractWeights: extractWeights,\n        getRemainingWeights: getRemainingWeights\n    };\n}\n//# sourceMappingURL=extractWeightsFactory.js.map","export function getModelUris(uri, defaultModelName) {\n    var defaultManifestFilename = defaultModelName + \"-weights_manifest.json\";\n    if (!uri) {\n        return {\n            modelBaseUri: '',\n            manifestUri: defaultManifestFilename\n        };\n    }\n    if (uri === '/') {\n        return {\n            modelBaseUri: '/',\n            manifestUri: \"/\" + defaultManifestFilename\n        };\n    }\n    var protocol = uri.startsWith('http://') ? 'http://' : uri.startsWith('https://') ? 'https://' : '';\n    uri = uri.replace(protocol, '');\n    var parts = uri.split('/').filter(function (s) { return s; });\n    var manifestFile = uri.endsWith('.json')\n        ? parts[parts.length - 1]\n        : defaultManifestFilename;\n    var modelBaseUri = protocol + (uri.endsWith('.json') ? parts.slice(0, parts.length - 1) : parts).join('/');\n    modelBaseUri = uri.startsWith('/') ? \"/\" + modelBaseUri : modelBaseUri;\n    return {\n        modelBaseUri: modelBaseUri,\n        manifestUri: modelBaseUri === '/' ? \"/\" + manifestFile : modelBaseUri + \"/\" + manifestFile\n    };\n}\n//# sourceMappingURL=getModelUris.js.map","import { isDimensions, isValidNumber } from '../utils';\nvar Box = /** @class */ (function () {\n    // TODO: MTCNN boxes sometimes have negative widths or heights, figure out why and remove\n    // allowNegativeDimensions flag again\n    function Box(_box, allowNegativeDimensions) {\n        if (allowNegativeDimensions === void 0) { allowNegativeDimensions = false; }\n        var box = (_box || {});\n        var isBbox = [box.left, box.top, box.right, box.bottom].every(isValidNumber);\n        var isRect = [box.x, box.y, box.width, box.height].every(isValidNumber);\n        if (!isRect && !isBbox) {\n            throw new Error(\"Box.constructor - expected box to be IBoundingBox | IRect, instead have \" + JSON.stringify(box));\n        }\n        var _a = isRect\n            ? [box.x, box.y, box.width, box.height]\n            : [box.left, box.top, box.right - box.left, box.bottom - box.top], x = _a[0], y = _a[1], width = _a[2], height = _a[3];\n        Box.assertIsValidBox({ x: x, y: y, width: width, height: height }, 'Box.constructor', allowNegativeDimensions);\n        this._x = x;\n        this._y = y;\n        this._width = width;\n        this._height = height;\n    }\n    Box.isRect = function (rect) {\n        return !!rect && [rect.x, rect.y, rect.width, rect.height].every(isValidNumber);\n    };\n    Box.assertIsValidBox = function (box, callee, allowNegativeDimensions) {\n        if (allowNegativeDimensions === void 0) { allowNegativeDimensions = false; }\n        if (!Box.isRect(box)) {\n            throw new Error(callee + \" - invalid box: \" + JSON.stringify(box) + \", expected object with properties x, y, width, height\");\n        }\n        if (!allowNegativeDimensions && (box.width < 0 || box.height < 0)) {\n            throw new Error(callee + \" - width (\" + box.width + \") and height (\" + box.height + \") must be positive numbers\");\n        }\n    };\n    Object.defineProperty(Box.prototype, \"x\", {\n        get: function () { return this._x; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Box.prototype, \"y\", {\n        get: function () { return this._y; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Box.prototype, \"width\", {\n        get: function () { return this._width; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Box.prototype, \"height\", {\n        get: function () { return this._height; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Box.prototype, \"left\", {\n        get: function () { return this.x; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Box.prototype, \"top\", {\n        get: function () { return this.y; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Box.prototype, \"right\", {\n        get: function () { return this.x + this.width; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Box.prototype, \"bottom\", {\n        get: function () { return this.y + this.height; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Box.prototype, \"area\", {\n        get: function () { return this.width * this.height; },\n        enumerable: true,\n        configurable: true\n    });\n    Box.prototype.round = function () {\n        var _a = [this.x, this.y, this.width, this.height]\n            .map(function (val) { return Math.round(val); }), x = _a[0], y = _a[1], width = _a[2], height = _a[3];\n        return new Box({ x: x, y: y, width: width, height: height });\n    };\n    Box.prototype.floor = function () {\n        var _a = [this.x, this.y, this.width, this.height]\n            .map(function (val) { return Math.floor(val); }), x = _a[0], y = _a[1], width = _a[2], height = _a[3];\n        return new Box({ x: x, y: y, width: width, height: height });\n    };\n    Box.prototype.toSquare = function () {\n        var _a = this, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        var diff = Math.abs(width - height);\n        if (width < height) {\n            x -= (diff / 2);\n            width += diff;\n        }\n        if (height < width) {\n            y -= (diff / 2);\n            height += diff;\n        }\n        return new Box({ x: x, y: y, width: width, height: height });\n    };\n    Box.prototype.rescale = function (s) {\n        var scaleX = isDimensions(s) ? s.width : s;\n        var scaleY = isDimensions(s) ? s.height : s;\n        return new Box({\n            x: this.x * scaleX,\n            y: this.y * scaleY,\n            width: this.width * scaleX,\n            height: this.height * scaleY\n        });\n    };\n    Box.prototype.pad = function (padX, padY) {\n        var _a = [\n            this.x - (padX / 2),\n            this.y - (padY / 2),\n            this.width + padX,\n            this.height + padY\n        ], x = _a[0], y = _a[1], width = _a[2], height = _a[3];\n        return new Box({ x: x, y: y, width: width, height: height });\n    };\n    Box.prototype.clipAtImageBorders = function (imgWidth, imgHeight) {\n        var _a = this, x = _a.x, y = _a.y, right = _a.right, bottom = _a.bottom;\n        var clippedX = Math.max(x, 0);\n        var clippedY = Math.max(y, 0);\n        var newWidth = right - clippedX;\n        var newHeight = bottom - clippedY;\n        var clippedWidth = Math.min(newWidth, imgWidth - clippedX);\n        var clippedHeight = Math.min(newHeight, imgHeight - clippedY);\n        return (new Box({ x: clippedX, y: clippedY, width: clippedWidth, height: clippedHeight })).floor();\n    };\n    Box.prototype.shift = function (sx, sy) {\n        var _a = this, width = _a.width, height = _a.height;\n        var x = this.x + sx;\n        var y = this.y + sy;\n        return new Box({ x: x, y: y, width: width, height: height });\n    };\n    Box.prototype.padAtBorders = function (imageHeight, imageWidth) {\n        var w = this.width + 1;\n        var h = this.height + 1;\n        var dx = 1;\n        var dy = 1;\n        var edx = w;\n        var edy = h;\n        var x = this.left;\n        var y = this.top;\n        var ex = this.right;\n        var ey = this.bottom;\n        if (ex > imageWidth) {\n            edx = -ex + imageWidth + w;\n            ex = imageWidth;\n        }\n        if (ey > imageHeight) {\n            edy = -ey + imageHeight + h;\n            ey = imageHeight;\n        }\n        if (x < 1) {\n            edy = 2 - x;\n            x = 1;\n        }\n        if (y < 1) {\n            edy = 2 - y;\n            y = 1;\n        }\n        return { dy: dy, edy: edy, dx: dx, edx: edx, y: y, ey: ey, x: x, ex: ex, w: w, h: h };\n    };\n    Box.prototype.calibrate = function (region) {\n        return new Box({\n            left: this.left + (region.left * this.width),\n            top: this.top + (region.top * this.height),\n            right: this.right + (region.right * this.width),\n            bottom: this.bottom + (region.bottom * this.height)\n        }).toSquare().round();\n    };\n    return Box;\n}());\nexport { Box };\n//# sourceMappingURL=Box.js.map","import * as tslib_1 from \"tslib\";\nimport { Box } from './Box';\nvar BoundingBox = /** @class */ (function (_super) {\n    tslib_1.__extends(BoundingBox, _super);\n    function BoundingBox(left, top, right, bottom) {\n        return _super.call(this, { left: left, top: top, right: right, bottom: bottom }) || this;\n    }\n    return BoundingBox;\n}(Box));\nexport { BoundingBox };\n//# sourceMappingURL=BoundingBox.js.map","import { Box } from './Box';\nimport { Dimensions } from './Dimensions';\nvar ObjectDetection = /** @class */ (function () {\n    function ObjectDetection(score, classScore, className, relativeBox, imageDims) {\n        this._imageDims = new Dimensions(imageDims.width, imageDims.height);\n        this._score = score;\n        this._classScore = classScore;\n        this._className = className;\n        this._box = new Box(relativeBox).rescale(this._imageDims);\n    }\n    Object.defineProperty(ObjectDetection.prototype, \"score\", {\n        get: function () { return this._score; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ObjectDetection.prototype, \"classScore\", {\n        get: function () { return this._classScore; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ObjectDetection.prototype, \"className\", {\n        get: function () { return this._className; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ObjectDetection.prototype, \"box\", {\n        get: function () { return this._box; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ObjectDetection.prototype, \"imageDims\", {\n        get: function () { return this._imageDims; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ObjectDetection.prototype, \"imageWidth\", {\n        get: function () { return this.imageDims.width; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ObjectDetection.prototype, \"imageHeight\", {\n        get: function () { return this.imageDims.height; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ObjectDetection.prototype, \"relativeBox\", {\n        get: function () { return new Box(this._box).rescale(this.imageDims.reverse()); },\n        enumerable: true,\n        configurable: true\n    });\n    ObjectDetection.prototype.forSize = function (width, height) {\n        return new ObjectDetection(this.score, this.classScore, this.className, this.relativeBox, { width: width, height: height });\n    };\n    return ObjectDetection;\n}());\nexport { ObjectDetection };\n//# sourceMappingURL=ObjectDetection.js.map","export function createBrowserEnv() {\n    var windowExists = typeof window === 'object';\n    var selfExists = typeof self === 'object';\n    var documentExists = typeof document === 'object';\n    var fetch = windowExists && window['fetch'] ? window['fetch'] : selfExists && self['fetch'] ? self['fetch'] : function () {\n        throw new Error('fetch - missing fetch implementation for browser environment');\n    };\n    var readFile = function () {\n        throw new Error('readFile - filesystem not available for browser environment');\n    };\n    return {\n        Canvas: windowExists ? window['OffscreenCanvas'] : selfExists ? self['OffscreenCanvas'] : HTMLCanvasElement,\n        Image: windowExists ? window['HTMLImageElement'] : selfExists ? self['HTMLImageElement'] : null,\n        ImageData: ImageData,\n        Video: windowExists ? window['HTMLVideoElement'] : selfExists ? self['HTMLVideoElement'] : null,\n        createCanvasElement: function () { return (windowExists && ('OffscreenCanvas' in window)) || (selfExists && ('OffscreenCanvas' in self)) ? new OffscreenCanvas(1, 1) : documentExists ? document.createElement('canvas') : {}; },\n        createImageElement: function () { return documentExists ? document.createElement('img') : {}; },\n        fetch: fetch,\n        readFile: readFile\n    };\n}\n//# sourceMappingURL=createBrowserEnv.js.map","export function createFileSystem(fs) {\n    var requireFsError = '';\n    if (!fs) {\n        try {\n            fs = require('fs');\n        }\n        catch (err) {\n            requireFsError = err.toString();\n        }\n    }\n    var readFile = fs\n        ? function (filePath) {\n            return new Promise(function (res, rej) {\n                fs.readFile(filePath, function (err, buffer) {\n                    return err ? rej(err) : res(buffer);\n                });\n            });\n        }\n        : function () {\n            throw new Error(\"readFile - failed to require fs in nodejs environment with error: \" + requireFsError);\n        };\n    return {\n        readFile: readFile\n    };\n}\n//# sourceMappingURL=createFileSystem.js.map","import * as tslib_1 from \"tslib\";\nimport { createFileSystem } from './createFileSystem';\nexport function createNodejsEnv() {\n    var Canvas = global['Canvas'] || global['HTMLCanvasElement'];\n    var Image = global['Image'] || global['HTMLImageElement'];\n    var createCanvasElement = function () {\n        if (Canvas) {\n            return new Canvas();\n        }\n        throw new Error('createCanvasElement - missing Canvas implementation for nodejs environment');\n    };\n    var createImageElement = function () {\n        if (Image) {\n            return new Image();\n        }\n        throw new Error('createImageElement - missing Image implementation for nodejs environment');\n    };\n    var fetch = global['fetch'] || function () {\n        throw new Error('fetch - missing fetch implementation for nodejs environment');\n    };\n    var fileSystem = createFileSystem();\n    return tslib_1.__assign({ Canvas: Canvas || /** @class */ (function () {\n            function Canvas() {\n            }\n            return Canvas;\n        }()), Image: Image || /** @class */ (function () {\n            function Image() {\n            }\n            return Image;\n        }()), ImageData: global['ImageData'] || /** @class */ (function () {\n            function class_1() {\n            }\n            return class_1;\n        }()), Video: global['HTMLVideoElement'] || /** @class */ (function () {\n            function class_2() {\n            }\n            return class_2;\n        }()), createCanvasElement: createCanvasElement,\n        createImageElement: createImageElement,\n        fetch: fetch }, fileSystem);\n}\n//# sourceMappingURL=createNodejsEnv.js.map","export function isBrowser() {\n    return (typeof window === 'object' || typeof self === 'object')\n        // && typeof document !== 'undefined'\n        // && typeof HTMLImageElement !== 'undefined'\n        // && typeof HTMLCanvasElement !== 'undefined'\n        // && typeof HTMLVideoElement !== 'undefined'\n        && (typeof OffscreenCanvas !== 'undefined' || typeof HTMLCanvasElement !== 'undefined')\n        && typeof ImageData !== 'undefined';\n}\n//# sourceMappingURL=isBrowser.js.map","export function isNodejs() {\n    return typeof global === 'object'\n        && typeof require === 'function'\n        && typeof module !== 'undefined'\n        // issues with gatsby.js: module.exports is undefined\n        // && !!module.exports\n        && typeof process !== 'undefined' && !!process.version;\n}\n//# sourceMappingURL=isNodejs.js.map","import { createBrowserEnv } from './createBrowserEnv';\nimport { createFileSystem } from './createFileSystem';\nimport { createNodejsEnv } from './createNodejsEnv';\nimport { isBrowser } from './isBrowser';\nimport { isNodejs } from './isNodejs';\nvar environment;\nfunction getEnv() {\n    if (!environment) {\n        throw new Error('getEnv - environment is not defined, check isNodejs() and isBrowser()');\n    }\n    return environment;\n}\nfunction setEnv(env) {\n    environment = env;\n}\nfunction initialize() {\n    // check for isBrowser() first to prevent electron renderer process\n    // to be initialized with wrong environment due to isNodejs() returning true\n    if (isBrowser()) {\n        setEnv(createBrowserEnv());\n    }\n    if (isNodejs()) {\n        setEnv(createNodejsEnv());\n    }\n}\nfunction monkeyPatch(env) {\n    if (!environment) {\n        initialize();\n    }\n    if (!environment) {\n        throw new Error('monkeyPatch - environment is not defined, check isNodejs() and isBrowser()');\n    }\n    var _a = env.Canvas, Canvas = _a === void 0 ? environment.Canvas : _a, _b = env.Image, Image = _b === void 0 ? environment.Image : _b;\n    environment.Canvas = Canvas;\n    environment.Image = Image;\n    environment.createCanvasElement = env.createCanvasElement || (function () { return new Canvas(); });\n    environment.createImageElement = env.createImageElement || (function () { return new Image(); });\n    environment.ImageData = env.ImageData || environment.ImageData;\n    environment.Video = env.Video || environment.Video;\n    environment.fetch = env.fetch || environment.fetch;\n    environment.readFile = env.readFile || environment.readFile;\n}\nexport var env = {\n    getEnv: getEnv,\n    setEnv: setEnv,\n    initialize: initialize,\n    createBrowserEnv: createBrowserEnv,\n    createFileSystem: createFileSystem,\n    createNodejsEnv: createNodejsEnv,\n    monkeyPatch: monkeyPatch,\n    isBrowser: isBrowser,\n    isNodejs: isNodejs\n};\ninitialize();\n//# sourceMappingURL=index.js.map","import { env } from '../env';\nexport function isMediaLoaded(media) {\n    var _a = env.getEnv(), Image = _a.Image, Video = _a.Video;\n    return (media instanceof Image && media.complete)\n        || (media instanceof Video && media.readyState >= 3);\n}\n//# sourceMappingURL=isMediaLoaded.js.map","import { env } from '../env';\nimport { isMediaLoaded } from './isMediaLoaded';\nexport function awaitMediaLoaded(media) {\n    return new Promise(function (resolve, reject) {\n        if (media instanceof env.getEnv().Canvas || isMediaLoaded(media)) {\n            return resolve();\n        }\n        function onLoad(e) {\n            if (!e.currentTarget)\n                return;\n            e.currentTarget.removeEventListener('load', onLoad);\n            e.currentTarget.removeEventListener('error', onError);\n            resolve(e);\n        }\n        function onError(e) {\n            if (!e.currentTarget)\n                return;\n            e.currentTarget.removeEventListener('load', onLoad);\n            e.currentTarget.removeEventListener('error', onError);\n            reject(e);\n        }\n        media.addEventListener('load', onLoad);\n        media.addEventListener('error', onError);\n    });\n}\n//# sourceMappingURL=awaitMediaLoaded.js.map","import { env } from '../env';\nexport function bufferToImage(buf) {\n    return new Promise(function (resolve, reject) {\n        if (!(buf instanceof Blob)) {\n            return reject('bufferToImage - expected buf to be of type: Blob');\n        }\n        var reader = new FileReader();\n        reader.onload = function () {\n            if (typeof reader.result !== 'string') {\n                return reject('bufferToImage - expected reader.result to be a string, in onload');\n            }\n            var img = env.getEnv().createImageElement();\n            img.onload = function () { return resolve(img); };\n            img.onerror = reject;\n            img.src = reader.result;\n        };\n        reader.onerror = reject;\n        reader.readAsDataURL(buf);\n    });\n}\n//# sourceMappingURL=bufferToImage.js.map","export function getContext2dOrThrow(canvas) {\n    var ctx = canvas.getContext('2d');\n    if (!ctx) {\n        throw new Error('canvas 2d context is null');\n    }\n    return ctx;\n}\n//# sourceMappingURL=getContext2dOrThrow.js.map","import { Dimensions } from '../classes/Dimensions';\nimport { env } from '../env';\nexport function getMediaDimensions(input) {\n    var _a = env.getEnv(), Image = _a.Image, Video = _a.Video;\n    if (input instanceof Image) {\n        return new Dimensions(input.naturalWidth, input.naturalHeight);\n    }\n    if (input instanceof Video) {\n        return new Dimensions(input.videoWidth, input.videoHeight);\n    }\n    return new Dimensions(input.width, input.height);\n}\n//# sourceMappingURL=getMediaDimensions.js.map","import { env } from '../env';\nimport { getContext2dOrThrow } from './getContext2dOrThrow';\nimport { getMediaDimensions } from './getMediaDimensions';\nimport { isMediaLoaded } from './isMediaLoaded';\nexport function createCanvas(_a) {\n    var width = _a.width, height = _a.height;\n    var createCanvasElement = env.getEnv().createCanvasElement;\n    var canvas = createCanvasElement();\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n}\nexport function createCanvasFromMedia(media, dims) {\n    var ImageData = env.getEnv().ImageData;\n    if (!(media instanceof ImageData) && !isMediaLoaded(media)) {\n        throw new Error('createCanvasFromMedia - media has not finished loading yet');\n    }\n    var _a = dims || getMediaDimensions(media), width = _a.width, height = _a.height;\n    var canvas = createCanvas({ width: width, height: height });\n    if (media instanceof ImageData) {\n        getContext2dOrThrow(canvas).putImageData(media, 0, 0);\n    }\n    else {\n        getContext2dOrThrow(canvas).drawImage(media, 0, 0, width, height);\n    }\n    return canvas;\n}\n//# sourceMappingURL=createCanvas.js.map","export function getDefaultDrawOptions(options) {\n    if (options === void 0) { options = {}; }\n    return Object.assign({}, {\n        boxColor: 'blue',\n        textColor: 'red',\n        lineWidth: 2,\n        fontSize: 20,\n        fontStyle: 'Georgia',\n        withScore: true,\n        withClassName: true\n    }, options);\n}\n//# sourceMappingURL=getDefaultDrawOptions.js.map","import { getDefaultDrawOptions } from './getDefaultDrawOptions';\nexport function drawBox(ctx, x, y, w, h, options) {\n    var drawOptions = Object.assign(getDefaultDrawOptions(), (options || {}));\n    ctx.strokeStyle = drawOptions.boxColor;\n    ctx.lineWidth = drawOptions.lineWidth;\n    ctx.strokeRect(x, y, w, h);\n}\n//# sourceMappingURL=drawBox.js.map","import * as tslib_1 from \"tslib\";\nimport { Box } from './Box';\nvar BoxWithText = /** @class */ (function (_super) {\n    tslib_1.__extends(BoxWithText, _super);\n    function BoxWithText(box, text) {\n        var _this = _super.call(this, box) || this;\n        _this._text = text;\n        return _this;\n    }\n    Object.defineProperty(BoxWithText.prototype, \"text\", {\n        get: function () { return this._text; },\n        enumerable: true,\n        configurable: true\n    });\n    return BoxWithText;\n}(Box));\nexport { BoxWithText };\n//# sourceMappingURL=BoxWithText.js.map","import * as tslib_1 from \"tslib\";\nimport { Box } from './Box';\nimport { isValidNumber } from '../utils/index';\nvar LabeledBox = /** @class */ (function (_super) {\n    tslib_1.__extends(LabeledBox, _super);\n    function LabeledBox(box, label) {\n        var _this = _super.call(this, box) || this;\n        _this._label = label;\n        return _this;\n    }\n    LabeledBox.assertIsValidLabeledBox = function (box, callee) {\n        Box.assertIsValidBox(box, callee);\n        if (!isValidNumber(box.label)) {\n            throw new Error(callee + \" - expected property label (\" + box.label + \") to be a number\");\n        }\n    };\n    Object.defineProperty(LabeledBox.prototype, \"label\", {\n        get: function () { return this._label; },\n        enumerable: true,\n        configurable: true\n    });\n    return LabeledBox;\n}(Box));\nexport { LabeledBox };\n//# sourceMappingURL=LabeledBox.js.map","import * as tslib_1 from \"tslib\";\nimport { isValidProbablitiy } from '../utils';\nimport { LabeledBox } from './LabeledBox';\nvar PredictedBox = /** @class */ (function (_super) {\n    tslib_1.__extends(PredictedBox, _super);\n    function PredictedBox(box, label, score, classScore) {\n        var _this = _super.call(this, box, label) || this;\n        _this._score = score;\n        _this._classScore = classScore;\n        return _this;\n    }\n    PredictedBox.assertIsValidPredictedBox = function (box, callee) {\n        LabeledBox.assertIsValidLabeledBox(box, callee);\n        if (!isValidProbablitiy(box.score)\n            || !isValidProbablitiy(box.classScore)) {\n            throw new Error(callee + \" - expected properties score (\" + box.score + \") and (\" + box.classScore + \") to be a number between [0, 1]\");\n        }\n    };\n    Object.defineProperty(PredictedBox.prototype, \"score\", {\n        get: function () { return this._score; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PredictedBox.prototype, \"classScore\", {\n        get: function () { return this._classScore; },\n        enumerable: true,\n        configurable: true\n    });\n    return PredictedBox;\n}(LabeledBox));\nexport { PredictedBox };\n//# sourceMappingURL=PredictedBox.js.map","import { getDefaultDrawOptions } from './getDefaultDrawOptions';\nexport function drawText(ctx, x, y, text, options) {\n    if (options === void 0) { options = {}; }\n    var drawOptions = Object.assign(getDefaultDrawOptions(), options);\n    var padText = 2 + drawOptions.lineWidth;\n    ctx.fillStyle = drawOptions.textColor;\n    ctx.font = drawOptions.fontSize + \"px \" + drawOptions.fontStyle;\n    ctx.fillText(text, x + padText, y + padText + (drawOptions.fontSize * 0.6));\n}\n//# sourceMappingURL=drawText.js.map","import { env } from '../env';\nexport function resolveInput(arg) {\n    if (!env.isNodejs() && typeof arg === 'string') {\n        return document.getElementById(arg);\n    }\n    return arg;\n}\n//# sourceMappingURL=resolveInput.js.map","import { BoxWithText } from '../classes/BoxWithText';\nimport { ObjectDetection } from '../classes/ObjectDetection';\nimport { PredictedBox } from '../classes/PredictedBox';\nimport { env } from '../env';\nimport { round } from '../utils';\nimport { drawBox } from './drawBox';\nimport { drawText } from './drawText';\nimport { getContext2dOrThrow } from './getContext2dOrThrow';\nimport { getDefaultDrawOptions } from './getDefaultDrawOptions';\nimport { resolveInput } from './resolveInput';\nexport function drawDetection(canvasArg, detection, options) {\n    var Canvas = env.getEnv().Canvas;\n    var canvas = resolveInput(canvasArg);\n    if (!(canvas instanceof Canvas)) {\n        throw new Error('drawDetection - expected canvas to be of type: HTMLCanvasElement');\n    }\n    var detectionArray = Array.isArray(detection)\n        ? detection\n        : [detection];\n    detectionArray.forEach(function (det) {\n        var _a = det instanceof ObjectDetection ? det.box : det, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        var drawOptions = getDefaultDrawOptions(options);\n        var ctx = getContext2dOrThrow(canvas);\n        drawBox(ctx, x, y, width, height, drawOptions);\n        var withScore = drawOptions.withScore;\n        var text = det instanceof BoxWithText\n            ? det.text\n            : ((withScore && det instanceof PredictedBox)\n                ? \"\" + round(det.score)\n                : (det instanceof ObjectDetection\n                    ? \"\" + det.className + (withScore ? \" (\" + round(det.score) + \")\" : '')\n                    : ''));\n        if (text) {\n            drawText(ctx, x, y + height, text, drawOptions);\n        }\n    });\n}\n//# sourceMappingURL=drawDetection.js.map","import * as tslib_1 from \"tslib\";\nimport { env } from '../env';\nexport function fetchOrThrow(url, init) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        var fetch, res;\n        return tslib_1.__generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    fetch = env.getEnv().fetch;\n                    return [4 /*yield*/, fetch(url, init)];\n                case 1:\n                    res = _a.sent();\n                    if (!(res.status < 400)) {\n                        throw new Error(\"failed to fetch: (\" + res.status + \") \" + res.statusText + \", from url: \" + res.url);\n                    }\n                    return [2 /*return*/, res];\n            }\n        });\n    });\n}\n//# sourceMappingURL=fetchOrThrow.js.map","import * as tslib_1 from \"tslib\";\nimport { bufferToImage } from './bufferToImage';\nimport { fetchOrThrow } from './fetchOrThrow';\nexport function fetchImage(uri) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        var res, blob;\n        return tslib_1.__generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, fetchOrThrow(uri)];\n                case 1:\n                    res = _a.sent();\n                    return [4 /*yield*/, (res).blob()];\n                case 2:\n                    blob = _a.sent();\n                    if (!blob.type.startsWith('image/')) {\n                        throw new Error(\"fetchImage - expected blob type to be of type image/*, instead have: \" + blob.type + \", for url: \" + res.url);\n                    }\n                    return [2 /*return*/, bufferToImage(blob)];\n            }\n        });\n    });\n}\n//# sourceMappingURL=fetchImage.js.map","import * as tslib_1 from \"tslib\";\nimport { fetchOrThrow } from './fetchOrThrow';\nexport function fetchJson(uri) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        return tslib_1.__generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, fetchOrThrow(uri)];\n                case 1: return [2 /*return*/, (_a.sent()).json()];\n            }\n        });\n    });\n}\n//# sourceMappingURL=fetchJson.js.map","import * as tslib_1 from \"tslib\";\nimport { fetchOrThrow } from './fetchOrThrow';\nexport function fetchNetWeights(uri) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        var _a;\n        return tslib_1.__generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    _a = Float32Array.bind;\n                    return [4 /*yield*/, fetchOrThrow(uri)];\n                case 1: return [4 /*yield*/, (_b.sent()).arrayBuffer()];\n                case 2: return [2 /*return*/, new (_a.apply(Float32Array, [void 0, _b.sent()]))()];\n            }\n        });\n    });\n}\n//# sourceMappingURL=fetchNetWeights.js.map","import * as tslib_1 from \"tslib\";\nimport * as tf from '@tensorflow/tfjs-core';\nimport { env } from '../env';\nimport { isTensor4D } from '../utils';\nexport function imageTensorToCanvas(imgTensor, canvas) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        var targetCanvas, _a, height, width, numChannels, imgTensor3D;\n        return tslib_1.__generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    targetCanvas = canvas || env.getEnv().createCanvasElement();\n                    _a = imgTensor.shape.slice(isTensor4D(imgTensor) ? 1 : 0), height = _a[0], width = _a[1], numChannels = _a[2];\n                    imgTensor3D = tf.tidy(function () { return imgTensor.as3D(height, width, numChannels).toInt(); });\n                    return [4 /*yield*/, tf.toPixels(imgTensor3D, targetCanvas)];\n                case 1:\n                    _b.sent();\n                    imgTensor3D.dispose();\n                    return [2 /*return*/, targetCanvas];\n            }\n        });\n    });\n}\n//# sourceMappingURL=imageTensorToCanvas.js.map","import { env } from '../env';\nimport { createCanvas, createCanvasFromMedia } from './createCanvas';\nimport { getContext2dOrThrow } from './getContext2dOrThrow';\nimport { getMediaDimensions } from './getMediaDimensions';\nexport function imageToSquare(input, inputSize, centerImage) {\n    if (centerImage === void 0) { centerImage = false; }\n    var _a = env.getEnv(), Image = _a.Image, Canvas = _a.Canvas;\n    if (!(input instanceof Image || input instanceof Canvas)) {\n        throw new Error('imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement');\n    }\n    var dims = getMediaDimensions(input);\n    var scale = inputSize / Math.max(dims.height, dims.width);\n    var width = scale * dims.width;\n    var height = scale * dims.height;\n    var targetCanvas = createCanvas({ width: inputSize, height: inputSize });\n    var inputCanvas = input instanceof Canvas ? input : createCanvasFromMedia(input);\n    var offset = Math.abs(width - height) / 2;\n    var dx = centerImage && width < height ? offset : 0;\n    var dy = centerImage && height < width ? offset : 0;\n    getContext2dOrThrow(targetCanvas).drawImage(inputCanvas, dx, dy, width, height);\n    return targetCanvas;\n}\n//# sourceMappingURL=imageToSquare.js.map","import { env } from '../env';\nexport function isMediaElement(input) {\n    var _a = env.getEnv(), Image = _a.Image, Canvas = _a.Canvas, Video = _a.Video;\n    return (Image && input instanceof Image)\n        || (Canvas && input instanceof Canvas)\n        || (Video && input instanceof Video);\n}\n//# sourceMappingURL=isMediaElement.js.map","import * as tslib_1 from \"tslib\";\nimport * as tf from '@tensorflow/tfjs-core';\nimport { getModelUris } from '../common/getModelUris';\nimport { fetchJson } from './fetchJson';\nexport function loadWeightMap(uri, defaultModelName) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        var _a, manifestUri, modelBaseUri, manifest;\n        return tslib_1.__generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    _a = getModelUris(uri, defaultModelName), manifestUri = _a.manifestUri, modelBaseUri = _a.modelBaseUri;\n                    return [4 /*yield*/, fetchJson(manifestUri)];\n                case 1:\n                    manifest = _b.sent();\n                    return [2 /*return*/, tf.io.loadWeights(manifest, modelBaseUri)];\n            }\n        });\n    });\n}\n//# sourceMappingURL=loadWeightMap.js.map","import * as tf from '@tensorflow/tfjs-core';\n/**\n * Pads the smaller dimension of an image tensor with zeros, such that width === height.\n *\n * @param imgTensor The image tensor.\n * @param isCenterImage (optional, default: false) If true, add an equal amount of padding on\n * both sides of the minor dimension oof the image.\n * @returns The padded tensor with width === height.\n */\nexport function padToSquare(imgTensor, isCenterImage) {\n    if (isCenterImage === void 0) { isCenterImage = false; }\n    return tf.tidy(function () {\n        var _a = imgTensor.shape.slice(1), height = _a[0], width = _a[1];\n        if (height === width) {\n            return imgTensor;\n        }\n        var dimDiff = Math.abs(height - width);\n        var paddingAmount = Math.round(dimDiff * (isCenterImage ? 0.5 : 1));\n        var paddingAxis = height > width ? 2 : 1;\n        var createPaddingTensor = function (paddingAmount) {\n            var paddingTensorShape = imgTensor.shape.slice();\n            paddingTensorShape[paddingAxis] = paddingAmount;\n            return tf.fill(paddingTensorShape, 0);\n        };\n        var paddingTensorAppend = createPaddingTensor(paddingAmount);\n        var remainingPaddingAmount = dimDiff - paddingTensorAppend.shape[paddingAxis];\n        var paddingTensorPrepend = isCenterImage && remainingPaddingAmount\n            ? createPaddingTensor(remainingPaddingAmount)\n            : null;\n        var tensorsToStack = [\n            paddingTensorPrepend,\n            imgTensor,\n            paddingTensorAppend\n        ]\n            .filter(function (t) { return !!t; })\n            .map(function (t) { return t.toFloat(); });\n        return tf.concat(tensorsToStack, paddingAxis);\n    });\n}\n//# sourceMappingURL=padToSquare.js.map","import * as tf from '@tensorflow/tfjs-core';\nimport { env } from '../env';\nimport { padToSquare } from '../ops/padToSquare';\nimport { computeReshapedDimensions, isTensor3D, isTensor4D, range } from '../utils';\nimport { createCanvasFromMedia } from './createCanvas';\nimport { imageToSquare } from './imageToSquare';\nvar NetInput = /** @class */ (function () {\n    function NetInput(inputs, treatAsBatchInput) {\n        if (treatAsBatchInput === void 0) { treatAsBatchInput = false; }\n        var _this = this;\n        this._imageTensors = [];\n        this._canvases = [];\n        this._treatAsBatchInput = false;\n        this._inputDimensions = [];\n        if (!Array.isArray(inputs)) {\n            throw new Error(\"NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have \" + inputs);\n        }\n        this._treatAsBatchInput = treatAsBatchInput;\n        this._batchSize = inputs.length;\n        inputs.forEach(function (input, idx) {\n            if (isTensor3D(input)) {\n                _this._imageTensors[idx] = input;\n                _this._inputDimensions[idx] = input.shape;\n                return;\n            }\n            if (isTensor4D(input)) {\n                var batchSize = input.shape[0];\n                if (batchSize !== 1) {\n                    throw new Error(\"NetInput - tf.Tensor4D with batchSize \" + batchSize + \" passed, but not supported in input array\");\n                }\n                _this._imageTensors[idx] = input;\n                _this._inputDimensions[idx] = input.shape.slice(1);\n                return;\n            }\n            var canvas = input instanceof env.getEnv().Canvas ? input : createCanvasFromMedia(input);\n            _this._canvases[idx] = canvas;\n            _this._inputDimensions[idx] = [canvas.height, canvas.width, 3];\n        });\n    }\n    Object.defineProperty(NetInput.prototype, \"imageTensors\", {\n        get: function () {\n            return this._imageTensors;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NetInput.prototype, \"canvases\", {\n        get: function () {\n            return this._canvases;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NetInput.prototype, \"isBatchInput\", {\n        get: function () {\n            return this.batchSize > 1 || this._treatAsBatchInput;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NetInput.prototype, \"batchSize\", {\n        get: function () {\n            return this._batchSize;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NetInput.prototype, \"inputDimensions\", {\n        get: function () {\n            return this._inputDimensions;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NetInput.prototype, \"inputSize\", {\n        get: function () {\n            return this._inputSize;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NetInput.prototype, \"reshapedInputDimensions\", {\n        get: function () {\n            var _this = this;\n            return range(this.batchSize, 0, 1).map(function (_, batchIdx) { return _this.getReshapedInputDimensions(batchIdx); });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    NetInput.prototype.getInput = function (batchIdx) {\n        return this.canvases[batchIdx] || this.imageTensors[batchIdx];\n    };\n    NetInput.prototype.getInputDimensions = function (batchIdx) {\n        return this._inputDimensions[batchIdx];\n    };\n    NetInput.prototype.getInputHeight = function (batchIdx) {\n        return this._inputDimensions[batchIdx][0];\n    };\n    NetInput.prototype.getInputWidth = function (batchIdx) {\n        return this._inputDimensions[batchIdx][1];\n    };\n    NetInput.prototype.getReshapedInputDimensions = function (batchIdx) {\n        if (typeof this.inputSize !== 'number') {\n            throw new Error('getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet');\n        }\n        var width = this.getInputWidth(batchIdx);\n        var height = this.getInputHeight(batchIdx);\n        return computeReshapedDimensions({ width: width, height: height }, this.inputSize);\n    };\n    /**\n     * Create a batch tensor from all input canvases and tensors\n     * with size [batchSize, inputSize, inputSize, 3].\n     *\n     * @param inputSize Height and width of the tensor.\n     * @param isCenterImage (optional, default: false) If true, add an equal amount of padding on\n     * both sides of the minor dimension oof the image.\n     * @returns The batch tensor.\n     */\n    NetInput.prototype.toBatchTensor = function (inputSize, isCenterInputs) {\n        var _this = this;\n        if (isCenterInputs === void 0) { isCenterInputs = true; }\n        this._inputSize = inputSize;\n        return tf.tidy(function () {\n            var inputTensors = range(_this.batchSize, 0, 1).map(function (batchIdx) {\n                var input = _this.getInput(batchIdx);\n                if (input instanceof tf.Tensor) {\n                    var imgTensor = isTensor4D(input) ? input : input.expandDims();\n                    imgTensor = padToSquare(imgTensor, isCenterInputs);\n                    if (imgTensor.shape[1] !== inputSize || imgTensor.shape[2] !== inputSize) {\n                        imgTensor = tf.image.resizeBilinear(imgTensor, [inputSize, inputSize]);\n                    }\n                    return imgTensor.as3D(inputSize, inputSize, 3);\n                }\n                if (input instanceof env.getEnv().Canvas) {\n                    return tf.fromPixels(imageToSquare(input, inputSize, isCenterInputs));\n                }\n                throw new Error(\"toBatchTensor - at batchIdx \" + batchIdx + \", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have \" + input);\n            });\n            var batchTensor = tf.stack(inputTensors.map(function (t) { return t.toFloat(); })).as4D(_this.batchSize, inputSize, inputSize, 3);\n            return batchTensor;\n        });\n    };\n    return NetInput;\n}());\nexport { NetInput };\n//# sourceMappingURL=NetInput.js.map","import * as tslib_1 from \"tslib\";\nimport { isTensor3D, isTensor4D } from '../utils';\nimport { awaitMediaLoaded } from './awaitMediaLoaded';\nimport { isMediaElement } from './isMediaElement';\nimport { NetInput } from './NetInput';\nimport { resolveInput } from './resolveInput';\n/**\n * Validates the input to make sure, they are valid net inputs and awaits all media elements\n * to be finished loading.\n *\n * @param input The input, which can be a media element or an array of different media elements.\n * @returns A NetInput instance, which can be passed into one of the neural networks.\n */\nexport function toNetInput(inputs) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        var inputArgArray, getIdxHint, inputArray;\n        return tslib_1.__generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (inputs instanceof NetInput) {\n                        return [2 /*return*/, inputs];\n                    }\n                    inputArgArray = Array.isArray(inputs)\n                        ? inputs\n                        : [inputs];\n                    if (!inputArgArray.length) {\n                        throw new Error('toNetInput - empty array passed as input');\n                    }\n                    getIdxHint = function (idx) { return Array.isArray(inputs) ? \" at input index \" + idx + \":\" : ''; };\n                    inputArray = inputArgArray.map(resolveInput);\n                    inputArray.forEach(function (input, i) {\n                        if (!isTensor3D(input) && !isTensor4D(input) && !isMediaElement(input)) {\n                            if (typeof inputArgArray[i] === 'string') {\n                                throw new Error(\"toNetInput -\" + getIdxHint(i) + \" string passed, but could not resolve HTMLElement for element id \" + inputArgArray[i]);\n                            }\n                            throw new Error(\"toNetInput -\" + getIdxHint(i) + \" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id\");\n                        }\n                        if (isTensor4D(input)) {\n                            // if tf.Tensor4D is passed in the input array, the batch size has to be 1\n                            var batchSize = input.shape[0];\n                            if (batchSize !== 1) {\n                                throw new Error(\"toNetInput -\" + getIdxHint(i) + \" tf.Tensor4D with batchSize \" + batchSize + \" passed, but not supported in input array\");\n                            }\n                        }\n                    });\n                    // wait for all media elements being loaded\n                    return [4 /*yield*/, Promise.all(inputArray.map(function (input) { return isMediaElement(input) && awaitMediaLoaded(input); }))];\n                case 1:\n                    // wait for all media elements being loaded\n                    _a.sent();\n                    return [2 /*return*/, new NetInput(inputArray, Array.isArray(inputs))];\n            }\n        });\n    });\n}\n//# sourceMappingURL=toNetInput.js.map","import * as tslib_1 from \"tslib\";\nimport * as tf from '@tensorflow/tfjs-core';\nimport { getModelUris } from './common/getModelUris';\nimport { loadWeightMap } from './dom';\nimport { env } from './env';\nvar NeuralNetwork = /** @class */ (function () {\n    function NeuralNetwork(_name) {\n        this._name = _name;\n        this._params = undefined;\n        this._paramMappings = [];\n    }\n    Object.defineProperty(NeuralNetwork.prototype, \"params\", {\n        get: function () { return this._params; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NeuralNetwork.prototype, \"paramMappings\", {\n        get: function () { return this._paramMappings; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(NeuralNetwork.prototype, \"isLoaded\", {\n        get: function () { return !!this.params; },\n        enumerable: true,\n        configurable: true\n    });\n    NeuralNetwork.prototype.getParamFromPath = function (paramPath) {\n        var _a = this.traversePropertyPath(paramPath), obj = _a.obj, objProp = _a.objProp;\n        return obj[objProp];\n    };\n    NeuralNetwork.prototype.reassignParamFromPath = function (paramPath, tensor) {\n        var _a = this.traversePropertyPath(paramPath), obj = _a.obj, objProp = _a.objProp;\n        obj[objProp].dispose();\n        obj[objProp] = tensor;\n    };\n    NeuralNetwork.prototype.getParamList = function () {\n        var _this = this;\n        return this._paramMappings.map(function (_a) {\n            var paramPath = _a.paramPath;\n            return ({\n                path: paramPath,\n                tensor: _this.getParamFromPath(paramPath)\n            });\n        });\n    };\n    NeuralNetwork.prototype.getTrainableParams = function () {\n        return this.getParamList().filter(function (param) { return param.tensor instanceof tf.Variable; });\n    };\n    NeuralNetwork.prototype.getFrozenParams = function () {\n        return this.getParamList().filter(function (param) { return !(param.tensor instanceof tf.Variable); });\n    };\n    NeuralNetwork.prototype.variable = function () {\n        var _this = this;\n        this.getFrozenParams().forEach(function (_a) {\n            var path = _a.path, tensor = _a.tensor;\n            _this.reassignParamFromPath(path, tensor.variable());\n        });\n    };\n    NeuralNetwork.prototype.freeze = function () {\n        var _this = this;\n        this.getTrainableParams().forEach(function (_a) {\n            var path = _a.path, variable = _a.tensor;\n            var tensor = tf.tensor(variable.dataSync());\n            variable.dispose();\n            _this.reassignParamFromPath(path, tensor);\n        });\n    };\n    NeuralNetwork.prototype.dispose = function (throwOnRedispose) {\n        if (throwOnRedispose === void 0) { throwOnRedispose = true; }\n        this.getParamList().forEach(function (param) {\n            if (throwOnRedispose && param.tensor.isDisposed) {\n                throw new Error(\"param tensor has already been disposed for path \" + param.path);\n            }\n            param.tensor.dispose();\n        });\n        this._params = undefined;\n    };\n    NeuralNetwork.prototype.serializeParams = function () {\n        return new Float32Array(this.getParamList()\n            .map(function (_a) {\n            var tensor = _a.tensor;\n            return Array.from(tensor.dataSync());\n        })\n            .reduce(function (flat, arr) { return flat.concat(arr); }));\n    };\n    NeuralNetwork.prototype.load = function (weightsOrUrl) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (weightsOrUrl instanceof Float32Array) {\n                            this.extractWeights(weightsOrUrl);\n                            return [2 /*return*/];\n                        }\n                        return [4 /*yield*/, this.loadFromUri(weightsOrUrl)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    NeuralNetwork.prototype.loadFromUri = function (uri) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var weightMap;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (uri && typeof uri !== 'string') {\n                            throw new Error(this._name + \".loadFromUri - expected model uri\");\n                        }\n                        return [4 /*yield*/, loadWeightMap(uri, this.getDefaultModelName())];\n                    case 1:\n                        weightMap = _a.sent();\n                        this.loadFromWeightMap(weightMap);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    NeuralNetwork.prototype.loadFromDisk = function (filePath) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var readFile, _a, manifestUri, modelBaseUri, fetchWeightsFromDisk, loadWeights, manifest, _b, _c, weightMap;\n            return tslib_1.__generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        if (filePath && typeof filePath !== 'string') {\n                            throw new Error(this._name + \".loadFromDisk - expected model file path\");\n                        }\n                        readFile = env.getEnv().readFile;\n                        _a = getModelUris(filePath, this.getDefaultModelName()), manifestUri = _a.manifestUri, modelBaseUri = _a.modelBaseUri;\n                        fetchWeightsFromDisk = function (filePaths) { return Promise.all(filePaths.map(function (filePath) { return readFile(filePath).then(function (buf) { return buf.buffer; }); })); };\n                        loadWeights = tf.io.weightsLoaderFactory(fetchWeightsFromDisk);\n                        _c = (_b = JSON).parse;\n                        return [4 /*yield*/, readFile(manifestUri)];\n                    case 1:\n                        manifest = _c.apply(_b, [(_d.sent()).toString()]);\n                        return [4 /*yield*/, loadWeights(manifest, modelBaseUri)];\n                    case 2:\n                        weightMap = _d.sent();\n                        this.loadFromWeightMap(weightMap);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    NeuralNetwork.prototype.loadFromWeightMap = function (weightMap) {\n        var _a = this.extractParamsFromWeigthMap(weightMap), paramMappings = _a.paramMappings, params = _a.params;\n        this._paramMappings = paramMappings;\n        this._params = params;\n    };\n    NeuralNetwork.prototype.extractWeights = function (weights) {\n        var _a = this.extractParams(weights), paramMappings = _a.paramMappings, params = _a.params;\n        this._paramMappings = paramMappings;\n        this._params = params;\n    };\n    NeuralNetwork.prototype.traversePropertyPath = function (paramPath) {\n        if (!this.params) {\n            throw new Error(\"traversePropertyPath - model has no loaded params\");\n        }\n        var result = paramPath.split('/').reduce(function (res, objProp) {\n            if (!res.nextObj.hasOwnProperty(objProp)) {\n                throw new Error(\"traversePropertyPath - object does not have property \" + objProp + \", for path \" + paramPath);\n            }\n            return { obj: res.nextObj, objProp: objProp, nextObj: res.nextObj[objProp] };\n        }, { nextObj: this.params });\n        var obj = result.obj, objProp = result.objProp;\n        if (!obj || !objProp || !(obj[objProp] instanceof tf.Tensor)) {\n            throw new Error(\"traversePropertyPath - parameter is not a tensor, for path \" + paramPath);\n        }\n        return { obj: obj, objProp: objProp };\n    };\n    return NeuralNetwork;\n}());\nexport { NeuralNetwork };\n//# sourceMappingURL=NeuralNetwork.js.map","export function iou(box1, box2, isIOU) {\n    if (isIOU === void 0) { isIOU = true; }\n    var width = Math.max(0.0, Math.min(box1.right, box2.right) - Math.max(box1.left, box2.left));\n    var height = Math.max(0.0, Math.min(box1.bottom, box2.bottom) - Math.max(box1.top, box2.top));\n    var interSection = width * height;\n    return isIOU\n        ? interSection / (box1.area + box2.area - interSection)\n        : interSection / Math.min(box1.area, box2.area);\n}\n//# sourceMappingURL=iou.js.map","import { iou } from './iou';\nexport function nonMaxSuppression(boxes, scores, iouThreshold, isIOU) {\n    if (isIOU === void 0) { isIOU = true; }\n    var indicesSortedByScore = scores\n        .map(function (score, boxIndex) { return ({ score: score, boxIndex: boxIndex }); })\n        .sort(function (c1, c2) { return c1.score - c2.score; })\n        .map(function (c) { return c.boxIndex; });\n    var pick = [];\n    var _loop_1 = function () {\n        var curr = indicesSortedByScore.pop();\n        pick.push(curr);\n        var indices = indicesSortedByScore;\n        var outputs = [];\n        for (var i = 0; i < indices.length; i++) {\n            var idx = indices[i];\n            var currBox = boxes[curr];\n            var idxBox = boxes[idx];\n            outputs.push(iou(currBox, idxBox, isIOU));\n        }\n        indicesSortedByScore = indicesSortedByScore.filter(function (_, j) { return outputs[j] <= iouThreshold; });\n    };\n    while (indicesSortedByScore.length > 0) {\n        _loop_1();\n    }\n    return pick;\n}\n//# sourceMappingURL=nonMaxSuppression.js.map","import * as tf from '@tensorflow/tfjs-core';\nexport function normalize(x, meanRgb) {\n    return tf.tidy(function () {\n        var r = meanRgb[0], g = meanRgb[1], b = meanRgb[2];\n        var avg_r = tf.fill(x.shape.slice(0, 3).concat([1]), r);\n        var avg_g = tf.fill(x.shape.slice(0, 3).concat([1]), g);\n        var avg_b = tf.fill(x.shape.slice(0, 3).concat([1]), b);\n        var avg_rgb = tf.concat([avg_r, avg_g, avg_b], 3);\n        return tf.sub(x, avg_rgb);\n    });\n}\n//# sourceMappingURL=normalize.js.map","export function shuffleArray(inputArray) {\n    var array = inputArray.slice();\n    for (var i = array.length - 1; i > 0; i--) {\n        var j = Math.floor(Math.random() * (i + 1));\n        var x = array[i];\n        array[i] = array[j];\n        array[j] = x;\n    }\n    return array;\n}\n//# sourceMappingURL=shuffleArray.js.map","export * from './iou';\nexport * from './nonMaxSuppression';\nexport * from './normalize';\nexport * from './padToSquare';\nexport * from './shuffleArray';\nexport function sigmoid(x) {\n    return 1 / (1 + Math.exp(-x));\n}\nexport function inverseSigmoid(x) {\n    return Math.log(x / (1 - x));\n}\n//# sourceMappingURL=index.js.map","var isNumber = function (arg) { return typeof arg === 'number'; };\nexport function validateConfig(config) {\n    if (!config) {\n        throw new Error(\"invalid config: \" + config);\n    }\n    if (typeof config.withSeparableConvs !== 'boolean') {\n        throw new Error(\"config.withSeparableConvs has to be a boolean, have: \" + config.withSeparableConvs);\n    }\n    if (!isNumber(config.iouThreshold) || config.iouThreshold < 0 || config.iouThreshold > 1.0) {\n        throw new Error(\"config.iouThreshold has to be a number between [0, 1], have: \" + config.iouThreshold);\n    }\n    if (!Array.isArray(config.classes)\n        || !config.classes.length\n        || !config.classes.every(function (c) { return typeof c === 'string'; })) {\n        throw new Error(\"config.classes has to be an array class names: string[], have: \" + JSON.stringify(config.classes));\n    }\n    if (!Array.isArray(config.anchors)\n        || !config.anchors.length\n        || !config.anchors.map(function (a) { return a || {}; }).every(function (a) { return isNumber(a.x) && isNumber(a.y); })) {\n        throw new Error(\"config.anchors has to be an array of { x: number, y: number }, have: \" + JSON.stringify(config.anchors));\n    }\n    if (config.meanRgb && (!Array.isArray(config.meanRgb)\n        || config.meanRgb.length !== 3\n        || !config.meanRgb.every(isNumber))) {\n        throw new Error(\"config.meanRgb has to be an array of shape [number, number, number], have: \" + JSON.stringify(config.meanRgb));\n    }\n}\n//# sourceMappingURL=config.js.map","import * as tf from '@tensorflow/tfjs-core';\nexport function leaky(x) {\n    return tf.tidy(function () {\n        var min = tf.mul(x, tf.scalar(0.10000000149011612));\n        return tf.add(tf.relu(tf.sub(x, min)), min);\n        //return tf.maximum(x, min)\n    });\n}\n//# sourceMappingURL=leaky.js.map","import * as tf from '@tensorflow/tfjs-core';\nimport { leaky } from './leaky';\nexport function convWithBatchNorm(x, params) {\n    return tf.tidy(function () {\n        var out = tf.pad(x, [[0, 0], [1, 1], [1, 1], [0, 0]]);\n        out = tf.conv2d(out, params.conv.filters, [1, 1], 'valid');\n        out = tf.sub(out, params.bn.sub);\n        out = tf.mul(out, params.bn.truediv);\n        out = tf.add(out, params.conv.bias);\n        return leaky(out);\n    });\n}\n//# sourceMappingURL=convWithBatchNorm.js.map","import * as tf from '@tensorflow/tfjs-core';\nimport { leaky } from './leaky';\nexport function depthwiseSeparableConv(x, params) {\n    return tf.tidy(function () {\n        var out = tf.pad(x, [[0, 0], [1, 1], [1, 1], [0, 0]]);\n        out = tf.separableConv2d(out, params.depthwise_filter, params.pointwise_filter, [1, 1], 'valid');\n        out = tf.add(out, params.bias);\n        return leaky(out);\n    });\n}\n//# sourceMappingURL=depthwiseSeparableConv.js.map","import * as tf from '@tensorflow/tfjs-core';\nimport { extractConvParamsFactory } from '../common';\nimport { extractSeparableConvParamsFactory } from '../common/extractSeparableConvParamsFactory';\nimport { extractWeightsFactory } from '../common/extractWeightsFactory';\nfunction extractorsFactory(extractWeights, paramMappings) {\n    var extractConvParams = extractConvParamsFactory(extractWeights, paramMappings);\n    function extractBatchNormParams(size, mappedPrefix) {\n        var sub = tf.tensor1d(extractWeights(size));\n        var truediv = tf.tensor1d(extractWeights(size));\n        paramMappings.push({ paramPath: mappedPrefix + \"/sub\" }, { paramPath: mappedPrefix + \"/truediv\" });\n        return { sub: sub, truediv: truediv };\n    }\n    function extractConvWithBatchNormParams(channelsIn, channelsOut, mappedPrefix) {\n        var conv = extractConvParams(channelsIn, channelsOut, 3, mappedPrefix + \"/conv\");\n        var bn = extractBatchNormParams(channelsOut, mappedPrefix + \"/bn\");\n        return { conv: conv, bn: bn };\n    }\n    var extractSeparableConvParams = extractSeparableConvParamsFactory(extractWeights, paramMappings);\n    return {\n        extractConvParams: extractConvParams,\n        extractConvWithBatchNormParams: extractConvWithBatchNormParams,\n        extractSeparableConvParams: extractSeparableConvParams\n    };\n}\nexport function extractParams(weights, config, boxEncodingSize, filterSizes) {\n    var _a = extractWeightsFactory(weights), extractWeights = _a.extractWeights, getRemainingWeights = _a.getRemainingWeights;\n    var paramMappings = [];\n    var _b = extractorsFactory(extractWeights, paramMappings), extractConvParams = _b.extractConvParams, extractConvWithBatchNormParams = _b.extractConvWithBatchNormParams, extractSeparableConvParams = _b.extractSeparableConvParams;\n    var params;\n    if (config.withSeparableConvs) {\n        var s0 = filterSizes[0], s1 = filterSizes[1], s2 = filterSizes[2], s3 = filterSizes[3], s4 = filterSizes[4], s5 = filterSizes[5], s6 = filterSizes[6], s7 = filterSizes[7], s8 = filterSizes[8];\n        var conv0 = config.isFirstLayerConv2d\n            ? extractConvParams(s0, s1, 3, 'conv0')\n            : extractSeparableConvParams(s0, s1, 'conv0');\n        var conv1 = extractSeparableConvParams(s1, s2, 'conv1');\n        var conv2 = extractSeparableConvParams(s2, s3, 'conv2');\n        var conv3 = extractSeparableConvParams(s3, s4, 'conv3');\n        var conv4 = extractSeparableConvParams(s4, s5, 'conv4');\n        var conv5 = extractSeparableConvParams(s5, s6, 'conv5');\n        var conv6 = s7 ? extractSeparableConvParams(s6, s7, 'conv6') : undefined;\n        var conv7 = s8 ? extractSeparableConvParams(s7, s8, 'conv7') : undefined;\n        var conv8 = extractConvParams(s8 || s7 || s6, 5 * boxEncodingSize, 1, 'conv8');\n        params = { conv0: conv0, conv1: conv1, conv2: conv2, conv3: conv3, conv4: conv4, conv5: conv5, conv6: conv6, conv7: conv7, conv8: conv8 };\n    }\n    else {\n        var s0 = filterSizes[0], s1 = filterSizes[1], s2 = filterSizes[2], s3 = filterSizes[3], s4 = filterSizes[4], s5 = filterSizes[5], s6 = filterSizes[6], s7 = filterSizes[7], s8 = filterSizes[8];\n        var conv0 = extractConvWithBatchNormParams(s0, s1, 'conv0');\n        var conv1 = extractConvWithBatchNormParams(s1, s2, 'conv1');\n        var conv2 = extractConvWithBatchNormParams(s2, s3, 'conv2');\n        var conv3 = extractConvWithBatchNormParams(s3, s4, 'conv3');\n        var conv4 = extractConvWithBatchNormParams(s4, s5, 'conv4');\n        var conv5 = extractConvWithBatchNormParams(s5, s6, 'conv5');\n        var conv6 = extractConvWithBatchNormParams(s6, s7, 'conv6');\n        var conv7 = extractConvWithBatchNormParams(s7, s8, 'conv7');\n        var conv8 = extractConvParams(s8, 5 * boxEncodingSize, 1, 'conv8');\n        params = { conv0: conv0, conv1: conv1, conv2: conv2, conv3: conv3, conv4: conv4, conv5: conv5, conv6: conv6, conv7: conv7, conv8: conv8 };\n    }\n    if (getRemainingWeights().length !== 0) {\n        throw new Error(\"weights remaing after extract: \" + getRemainingWeights().length);\n    }\n    return { params: params, paramMappings: paramMappings };\n}\n//# sourceMappingURL=extractParams.js.map","import { disposeUnusedWeightTensors } from '../common/disposeUnusedWeightTensors';\nimport { loadSeparableConvParamsFactory } from '../common/extractSeparableConvParamsFactory';\nimport { extractWeightEntryFactory } from '../common/extractWeightEntryFactory';\nfunction extractorsFactory(weightMap, paramMappings) {\n    var extractWeightEntry = extractWeightEntryFactory(weightMap, paramMappings);\n    function extractBatchNormParams(prefix) {\n        var sub = extractWeightEntry(prefix + \"/sub\", 1);\n        var truediv = extractWeightEntry(prefix + \"/truediv\", 1);\n        return { sub: sub, truediv: truediv };\n    }\n    function extractConvParams(prefix) {\n        var filters = extractWeightEntry(prefix + \"/filters\", 4);\n        var bias = extractWeightEntry(prefix + \"/bias\", 1);\n        return { filters: filters, bias: bias };\n    }\n    function extractConvWithBatchNormParams(prefix) {\n        var conv = extractConvParams(prefix + \"/conv\");\n        var bn = extractBatchNormParams(prefix + \"/bn\");\n        return { conv: conv, bn: bn };\n    }\n    var extractSeparableConvParams = loadSeparableConvParamsFactory(extractWeightEntry);\n    return {\n        extractConvParams: extractConvParams,\n        extractConvWithBatchNormParams: extractConvWithBatchNormParams,\n        extractSeparableConvParams: extractSeparableConvParams\n    };\n}\nexport function extractParamsFromWeigthMap(weightMap, config) {\n    var paramMappings = [];\n    var _a = extractorsFactory(weightMap, paramMappings), extractConvParams = _a.extractConvParams, extractConvWithBatchNormParams = _a.extractConvWithBatchNormParams, extractSeparableConvParams = _a.extractSeparableConvParams;\n    var params;\n    if (config.withSeparableConvs) {\n        var numFilters = (config.filterSizes && config.filterSizes.length || 9);\n        params = {\n            conv0: config.isFirstLayerConv2d ? extractConvParams('conv0') : extractSeparableConvParams('conv0'),\n            conv1: extractSeparableConvParams('conv1'),\n            conv2: extractSeparableConvParams('conv2'),\n            conv3: extractSeparableConvParams('conv3'),\n            conv4: extractSeparableConvParams('conv4'),\n            conv5: extractSeparableConvParams('conv5'),\n            conv6: numFilters > 7 ? extractSeparableConvParams('conv6') : undefined,\n            conv7: numFilters > 8 ? extractSeparableConvParams('conv7') : undefined,\n            conv8: extractConvParams('conv8')\n        };\n    }\n    else {\n        params = {\n            conv0: extractConvWithBatchNormParams('conv0'),\n            conv1: extractConvWithBatchNormParams('conv1'),\n            conv2: extractConvWithBatchNormParams('conv2'),\n            conv3: extractConvWithBatchNormParams('conv3'),\n            conv4: extractConvWithBatchNormParams('conv4'),\n            conv5: extractConvWithBatchNormParams('conv5'),\n            conv6: extractConvWithBatchNormParams('conv6'),\n            conv7: extractConvWithBatchNormParams('conv7'),\n            conv8: extractConvParams('conv8')\n        };\n    }\n    disposeUnusedWeightTensors(weightMap, paramMappings);\n    return { params: params, paramMappings: paramMappings };\n}\n//# sourceMappingURL=extractParamsFromWeigthMap.js.map","export var TinyYolov2SizeType;\n(function (TinyYolov2SizeType) {\n    TinyYolov2SizeType[TinyYolov2SizeType[\"XS\"] = 224] = \"XS\";\n    TinyYolov2SizeType[TinyYolov2SizeType[\"SM\"] = 320] = \"SM\";\n    TinyYolov2SizeType[TinyYolov2SizeType[\"MD\"] = 416] = \"MD\";\n    TinyYolov2SizeType[TinyYolov2SizeType[\"LG\"] = 608] = \"LG\";\n})(TinyYolov2SizeType || (TinyYolov2SizeType = {}));\nvar TinyYolov2Options = /** @class */ (function () {\n    function TinyYolov2Options(_a) {\n        var _b = _a === void 0 ? {} : _a, inputSize = _b.inputSize, scoreThreshold = _b.scoreThreshold;\n        this._name = 'TinyYolov2Options';\n        this._inputSize = inputSize || 416;\n        this._scoreThreshold = scoreThreshold || 0.5;\n        if (typeof this._inputSize !== 'number' || this._inputSize % 32 !== 0) {\n            throw new Error(this._name + \" - expected inputSize to be a number divisible by 32\");\n        }\n        if (typeof this._scoreThreshold !== 'number' || this._scoreThreshold <= 0 || this._scoreThreshold >= 1) {\n            throw new Error(this._name + \" - expected scoreThreshold to be a number between 0 and 1\");\n        }\n    }\n    Object.defineProperty(TinyYolov2Options.prototype, \"inputSize\", {\n        get: function () { return this._inputSize; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TinyYolov2Options.prototype, \"scoreThreshold\", {\n        get: function () { return this._scoreThreshold; },\n        enumerable: true,\n        configurable: true\n    });\n    return TinyYolov2Options;\n}());\nexport { TinyYolov2Options };\n//# sourceMappingURL=TinyYolov2Options.js.map","import * as tslib_1 from \"tslib\";\nimport * as tf from '@tensorflow/tfjs-core';\nimport { BoundingBox } from '../classes/BoundingBox';\nimport { ObjectDetection } from '../classes/ObjectDetection';\nimport { convLayer } from '../common';\nimport { toNetInput } from '../dom';\nimport { NeuralNetwork } from '../NeuralNetwork';\nimport { sigmoid } from '../ops';\nimport { nonMaxSuppression } from '../ops/nonMaxSuppression';\nimport { normalize } from '../ops/normalize';\nimport { validateConfig } from './config';\nimport { convWithBatchNorm } from './convWithBatchNorm';\nimport { depthwiseSeparableConv } from './depthwiseSeparableConv';\nimport { extractParams } from './extractParams';\nimport { extractParamsFromWeigthMap } from './extractParamsFromWeigthMap';\nimport { leaky } from './leaky';\nimport { TinyYolov2Options } from './TinyYolov2Options';\nvar TinyYolov2 = /** @class */ (function (_super) {\n    tslib_1.__extends(TinyYolov2, _super);\n    function TinyYolov2(config) {\n        var _this = _super.call(this, 'TinyYolov2') || this;\n        validateConfig(config);\n        _this._config = config;\n        return _this;\n    }\n    Object.defineProperty(TinyYolov2.prototype, \"config\", {\n        get: function () {\n            return this._config;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TinyYolov2.prototype, \"withClassScores\", {\n        get: function () {\n            return this.config.withClassScores || this.config.classes.length > 1;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TinyYolov2.prototype, \"boxEncodingSize\", {\n        get: function () {\n            return 5 + (this.withClassScores ? this.config.classes.length : 0);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TinyYolov2.prototype.runTinyYolov2 = function (x, params) {\n        var out = convWithBatchNorm(x, params.conv0);\n        out = tf.maxPool(out, [2, 2], [2, 2], 'same');\n        out = convWithBatchNorm(out, params.conv1);\n        out = tf.maxPool(out, [2, 2], [2, 2], 'same');\n        out = convWithBatchNorm(out, params.conv2);\n        out = tf.maxPool(out, [2, 2], [2, 2], 'same');\n        out = convWithBatchNorm(out, params.conv3);\n        out = tf.maxPool(out, [2, 2], [2, 2], 'same');\n        out = convWithBatchNorm(out, params.conv4);\n        out = tf.maxPool(out, [2, 2], [2, 2], 'same');\n        out = convWithBatchNorm(out, params.conv5);\n        out = tf.maxPool(out, [2, 2], [1, 1], 'same');\n        out = convWithBatchNorm(out, params.conv6);\n        out = convWithBatchNorm(out, params.conv7);\n        return convLayer(out, params.conv8, 'valid', false);\n    };\n    TinyYolov2.prototype.runMobilenet = function (x, params) {\n        var out = this.config.isFirstLayerConv2d\n            ? leaky(convLayer(x, params.conv0, 'valid', false))\n            : depthwiseSeparableConv(x, params.conv0);\n        out = tf.maxPool(out, [2, 2], [2, 2], 'same');\n        out = depthwiseSeparableConv(out, params.conv1);\n        out = tf.maxPool(out, [2, 2], [2, 2], 'same');\n        out = depthwiseSeparableConv(out, params.conv2);\n        out = tf.maxPool(out, [2, 2], [2, 2], 'same');\n        out = depthwiseSeparableConv(out, params.conv3);\n        out = tf.maxPool(out, [2, 2], [2, 2], 'same');\n        out = depthwiseSeparableConv(out, params.conv4);\n        out = tf.maxPool(out, [2, 2], [2, 2], 'same');\n        out = depthwiseSeparableConv(out, params.conv5);\n        out = tf.maxPool(out, [2, 2], [1, 1], 'same');\n        out = params.conv6 ? depthwiseSeparableConv(out, params.conv6) : out;\n        out = params.conv7 ? depthwiseSeparableConv(out, params.conv7) : out;\n        return convLayer(out, params.conv8, 'valid', false);\n    };\n    TinyYolov2.prototype.forwardInput = function (input, inputSize) {\n        var _this = this;\n        var params = this.params;\n        if (!params) {\n            throw new Error('TinyYolov2 - load model before inference');\n        }\n        return tf.tidy(function () {\n            var batchTensor = input.toBatchTensor(inputSize, false).toFloat();\n            batchTensor = _this.config.meanRgb\n                ? normalize(batchTensor, _this.config.meanRgb)\n                : batchTensor;\n            batchTensor = batchTensor.div(tf.scalar(256));\n            return _this.config.withSeparableConvs\n                ? _this.runMobilenet(batchTensor, params)\n                : _this.runTinyYolov2(batchTensor, params);\n        });\n    };\n    TinyYolov2.prototype.forward = function (input, inputSize) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var _a;\n            return tslib_1.__generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = this.forwardInput;\n                        return [4 /*yield*/, toNetInput(input)];\n                    case 1: return [4 /*yield*/, _a.apply(this, [_b.sent(), inputSize])];\n                    case 2: return [2 /*return*/, _b.sent()];\n                }\n            });\n        });\n    };\n    TinyYolov2.prototype.detect = function (input, forwardParams) {\n        if (forwardParams === void 0) { forwardParams = {}; }\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var _a, inputSize, scoreThreshold, netInput, out, out0, inputDimensions, results, boxes, scores, classScores, classNames, indices, detections;\n            var _this = this;\n            return tslib_1.__generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = new TinyYolov2Options(forwardParams), inputSize = _a.inputSize, scoreThreshold = _a.scoreThreshold;\n                        return [4 /*yield*/, toNetInput(input)];\n                    case 1:\n                        netInput = _b.sent();\n                        return [4 /*yield*/, this.forwardInput(netInput, inputSize)];\n                    case 2:\n                        out = _b.sent();\n                        out0 = tf.tidy(function () { return tf.unstack(out)[0].expandDims(); });\n                        inputDimensions = {\n                            width: netInput.getInputWidth(0),\n                            height: netInput.getInputHeight(0)\n                        };\n                        results = this.extractBoxes(out0, netInput.getReshapedInputDimensions(0), scoreThreshold);\n                        out.dispose();\n                        out0.dispose();\n                        boxes = results.map(function (res) { return res.box; });\n                        scores = results.map(function (res) { return res.score; });\n                        classScores = results.map(function (res) { return res.classScore; });\n                        classNames = results.map(function (res) { return _this.config.classes[res.label]; });\n                        indices = nonMaxSuppression(boxes.map(function (box) { return box.rescale(inputSize); }), scores, this.config.iouThreshold, true);\n                        detections = indices.map(function (idx) {\n                            return new ObjectDetection(scores[idx], classScores[idx], classNames[idx], boxes[idx], inputDimensions);\n                        });\n                        return [2 /*return*/, detections];\n                }\n            });\n        });\n    };\n    TinyYolov2.prototype.getDefaultModelName = function () {\n        return '';\n    };\n    TinyYolov2.prototype.extractParamsFromWeigthMap = function (weightMap) {\n        return extractParamsFromWeigthMap(weightMap, this.config);\n    };\n    TinyYolov2.prototype.extractParams = function (weights) {\n        var filterSizes = this.config.filterSizes || TinyYolov2.DEFAULT_FILTER_SIZES;\n        var numFilters = filterSizes ? filterSizes.length : undefined;\n        if (numFilters !== 7 && numFilters !== 8 && numFilters !== 9) {\n            throw new Error(\"TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found \" + numFilters + \" filterSizes in config\");\n        }\n        return extractParams(weights, this.config, this.boxEncodingSize, filterSizes);\n    };\n    TinyYolov2.prototype.extractBoxes = function (outputTensor, inputBlobDimensions, scoreThreshold) {\n        var _this = this;\n        var width = inputBlobDimensions.width, height = inputBlobDimensions.height;\n        var inputSize = Math.max(width, height);\n        var correctionFactorX = inputSize / width;\n        var correctionFactorY = inputSize / height;\n        var numCells = outputTensor.shape[1];\n        var numBoxes = this.config.anchors.length;\n        var _a = tf.tidy(function () {\n            var reshaped = outputTensor.reshape([numCells, numCells, numBoxes, _this.boxEncodingSize]);\n            var boxes = reshaped.slice([0, 0, 0, 0], [numCells, numCells, numBoxes, 4]);\n            var scores = reshaped.slice([0, 0, 0, 4], [numCells, numCells, numBoxes, 1]);\n            var classScores = _this.withClassScores\n                ? tf.softmax(reshaped.slice([0, 0, 0, 5], [numCells, numCells, numBoxes, _this.config.classes.length]), 3)\n                : tf.scalar(0);\n            return [boxes, scores, classScores];\n        }), boxesTensor = _a[0], scoresTensor = _a[1], classScoresTensor = _a[2];\n        var results = [];\n        for (var row = 0; row < numCells; row++) {\n            for (var col = 0; col < numCells; col++) {\n                for (var anchor = 0; anchor < numBoxes; anchor++) {\n                    var score = sigmoid(scoresTensor.get(row, col, anchor, 0));\n                    if (!scoreThreshold || score > scoreThreshold) {\n                        var ctX = ((col + sigmoid(boxesTensor.get(row, col, anchor, 0))) / numCells) * correctionFactorX;\n                        var ctY = ((row + sigmoid(boxesTensor.get(row, col, anchor, 1))) / numCells) * correctionFactorY;\n                        var width_1 = ((Math.exp(boxesTensor.get(row, col, anchor, 2)) * this.config.anchors[anchor].x) / numCells) * correctionFactorX;\n                        var height_1 = ((Math.exp(boxesTensor.get(row, col, anchor, 3)) * this.config.anchors[anchor].y) / numCells) * correctionFactorY;\n                        var x = (ctX - (width_1 / 2));\n                        var y = (ctY - (height_1 / 2));\n                        var pos = { row: row, col: col, anchor: anchor };\n                        var _b = this.withClassScores\n                            ? this.extractPredictedClass(classScoresTensor, pos)\n                            : { classScore: 1, label: 0 }, classScore = _b.classScore, label = _b.label;\n                        results.push(tslib_1.__assign({ box: new BoundingBox(x, y, x + width_1, y + height_1), score: score, classScore: score * classScore, label: label }, pos));\n                    }\n                }\n            }\n        }\n        boxesTensor.dispose();\n        scoresTensor.dispose();\n        classScoresTensor.dispose();\n        return results;\n    };\n    TinyYolov2.prototype.extractPredictedClass = function (classesTensor, pos) {\n        var row = pos.row, col = pos.col, anchor = pos.anchor;\n        return Array(this.config.classes.length).fill(0)\n            .map(function (_, i) { return classesTensor.get(row, col, anchor, i); })\n            .map(function (classScore, label) { return ({\n            classScore: classScore,\n            label: label\n        }); })\n            .reduce(function (max, curr) { return max.classScore > curr.classScore ? max : curr; });\n    };\n    TinyYolov2.DEFAULT_FILTER_SIZES = [\n        3, 16, 32, 64, 128, 256, 512, 1024, 1024\n    ];\n    return TinyYolov2;\n}(NeuralNetwork));\nexport { TinyYolov2 };\n//# sourceMappingURL=TinyYolov2.js.map","import * as tslib_1 from \"tslib\";\nimport { Box } from './Box';\nvar Rect = /** @class */ (function (_super) {\n    tslib_1.__extends(Rect, _super);\n    function Rect(x, y, width, height) {\n        return _super.call(this, { x: x, y: y, width: width, height: height }) || this;\n    }\n    return Rect;\n}(Box));\nexport { Rect };\n//# sourceMappingURL=Rect.js.map","import { Box, IDimensions, ObjectDetection, Rect } from 'tfjs-image-recognition-base';\n\nexport interface IFaceDetecion {\n  score: number\n  box: Box\n}\n\nexport class FaceDetection extends ObjectDetection implements IFaceDetecion {\n  constructor(\n    score: number,\n    relativeBox: Rect,\n    imageDims: IDimensions\n  ) {\n    super(score, score, '', relativeBox, imageDims)\n  }\n\n  public forSize(width: number, height: number): FaceDetection {\n    return super.forSize(width, height)\n  }\n}","import { Dimensions, getCenterPoint, IDimensions, Point, Rect } from 'tfjs-image-recognition-base';\n\nimport { FaceDetection } from './FaceDetection';\n\n// face alignment constants\nconst relX = 0.5\nconst relY = 0.43\nconst relScale = 0.45\n\nexport interface IFaceLandmarks {\n  positions: Point[]\n  shift: Point\n}\n\nexport class FaceLandmarks implements IFaceLandmarks {\n  protected _shift: Point\n  protected _positions: Point[]\n  protected _imgDims: Dimensions\n\n  constructor(\n    relativeFaceLandmarkPositions: Point[],\n    imgDims: IDimensions,\n    shift: Point = new Point(0, 0)\n  ) {\n    const { width, height } = imgDims\n    this._imgDims = new Dimensions(width, height)\n    this._shift = shift\n    this._positions = relativeFaceLandmarkPositions.map(\n      pt => pt.mul(new Point(width, height)).add(shift)\n    )\n  }\n\n  public get shift(): Point { return new Point(this._shift.x, this._shift.y) }\n  public get imageWidth(): number { return this._imgDims.width }\n  public get imageHeight(): number { return this._imgDims.height }\n  public get positions(): Point[] { return this._positions }\n  public get relativePositions(): Point[] {\n    return this._positions.map(\n      pt => pt.sub(this._shift).div(new Point(this.imageWidth, this.imageHeight))\n    )\n  }\n\n  public forSize<T extends FaceLandmarks>(width: number, height: number): T {\n    return new (this.constructor as any)(\n      this.relativePositions,\n      { width, height }\n    )\n  }\n\n  public shiftBy<T extends FaceLandmarks>(x: number, y: number): T {\n    return new (this.constructor as any)(\n      this.relativePositions,\n      this._imgDims,\n      new Point(x, y)\n    )\n  }\n\n  public shiftByPoint<T extends FaceLandmarks>(pt: Point): T {\n    return this.shiftBy(pt.x, pt.y)\n  }\n\n  /**\n   * Aligns the face landmarks after face detection from the relative positions of the faces\n   * bounding box, or it's current shift. This function should be used to align the face images\n   * after face detection has been performed, before they are passed to the face recognition net.\n   * This will make the computed face descriptor more accurate.\n   *\n   * @param detection (optional) The bounding box of the face or the face detection result. If\n   * no argument was passed the position of the face landmarks are assumed to be relative to\n   * it's current shift.\n   * @returns The bounding box of the aligned face.\n   */\n  public align(\n    detection?: FaceDetection | Rect\n  ): Rect {\n    if (detection) {\n      const box = detection instanceof FaceDetection\n        ? detection.box.floor()\n        : detection\n\n      return this.shiftBy(box.x, box.y).align()\n    }\n\n    const centers = this.getRefPointsForAlignment()\n\n    const [leftEyeCenter, rightEyeCenter, mouthCenter] = centers\n    const distToMouth = (pt: Point) => mouthCenter.sub(pt).magnitude()\n    const eyeToMouthDist = (distToMouth(leftEyeCenter) + distToMouth(rightEyeCenter)) / 2\n\n    const size = Math.floor(eyeToMouthDist / relScale)\n\n    const refPoint = getCenterPoint(centers)\n    // TODO: pad in case rectangle is out of image bounds\n    const x = Math.floor(Math.max(0, refPoint.x - (relX * size)))\n    const y = Math.floor(Math.max(0, refPoint.y - (relY * size)))\n\n    return new Rect(x, y, Math.min(size, this.imageWidth + x), Math.min(size, this.imageHeight + y))\n  }\n\n  protected getRefPointsForAlignment(): Point[] {\n    throw new Error('getRefPointsForAlignment not implemented by base class')\n  }\n}","import { getCenterPoint, Point } from 'tfjs-image-recognition-base';\n\nimport { FaceLandmarks } from './FaceLandmarks';\n\nexport class FaceLandmarks5 extends FaceLandmarks {\n\n  protected getRefPointsForAlignment(): Point[] {\n    const pts = this.positions\n    return [\n      pts[0],\n      pts[1],\n      getCenterPoint([pts[3], pts[4]])\n    ]\n  }\n}","import { getCenterPoint, Point } from 'tfjs-image-recognition-base';\n\nimport { FaceLandmarks } from '../classes/FaceLandmarks';\n\nexport class FaceLandmarks68 extends FaceLandmarks {\n  public getJawOutline(): Point[] {\n    return this.positions.slice(0, 17)\n  }\n\n  public getLeftEyeBrow(): Point[] {\n    return this.positions.slice(17, 22)\n  }\n\n  public getRightEyeBrow(): Point[] {\n    return this.positions.slice(22, 27)\n  }\n\n  public getNose(): Point[] {\n    return this.positions.slice(27, 36)\n  }\n\n  public getLeftEye(): Point[] {\n    return this.positions.slice(36, 42)\n  }\n\n  public getRightEye(): Point[] {\n    return this.positions.slice(42, 48)\n  }\n\n  public getMouth(): Point[] {\n    return this.positions.slice(48, 68)\n  }\n\n  protected getRefPointsForAlignment(): Point[] {\n    return [\n      this.getLeftEye(),\n      this.getRightEye(),\n      this.getMouth()\n    ].map(getCenterPoint)\n  }\n}","import { round } from 'tfjs-image-recognition-base';\n\nexport interface IFaceMatch {\n  label: string\n  distance: number\n}\n\nexport class FaceMatch implements IFaceMatch {\n  private _label: string\n  private _distance: number\n\n  constructor(label: string, distance: number) {\n    this._label = label\n    this._distance = distance\n  }\n\n  public get label(): string { return this._label }\n  public get distance(): number { return this._distance }\n\n  public toString(withDistance: boolean = true): string {\n    return `${this.label}${withDistance ? ` (${round(this.distance)})` : ''}`\n  }\n}","export class LabeledFaceDescriptors {\n  private _label: string\n  private _descriptors: Float32Array[]\n\n  constructor(label: string, descriptors: Float32Array[]) {\n    if (!(typeof label === 'string')) {\n      throw new Error('LabeledFaceDescriptors - constructor expected label to be a string')\n    }\n\n    if (!Array.isArray(descriptors) || descriptors.some(desc => !(desc instanceof Float32Array))) {\n      throw new Error('LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array')\n    }\n\n    this._label = label\n    this._descriptors = descriptors\n  }\n\n  public get label(): string { return this._label }\n  public get descriptors(): Float32Array[] { return this._descriptors }\n}","import { Point } from 'tfjs-image-recognition-base';\n\nexport function drawContour(\n  ctx: CanvasRenderingContext2D,\n  points: Point[],\n  isClosed: boolean = false\n) {\n  ctx.beginPath()\n\n  points.slice(1).forEach(({ x, y }, prevIdx) => {\n    const from = points[prevIdx]\n    ctx.moveTo(from.x, from.y)\n    ctx.lineTo(x, y)\n  })\n\n  if (isClosed) {\n    const from = points[points.length - 1]\n    const to = points[0]\n    if (!from || !to) {\n      return\n    }\n\n    ctx.moveTo(from.x, from.y)\n    ctx.lineTo(to.x, to.y)\n  }\n\n  ctx.stroke()\n}","import { env, getContext2dOrThrow, getDefaultDrawOptions, resolveInput } from 'tfjs-image-recognition-base';\n\nimport { FaceLandmarks } from '../classes/FaceLandmarks';\nimport { FaceLandmarks68 } from '../classes/FaceLandmarks68';\nimport { drawContour } from './drawContour';\nimport { DrawLandmarksOptions } from './types';\n\nexport function drawLandmarks(\n  canvasArg: string | HTMLCanvasElement,\n  faceLandmarks: FaceLandmarks | FaceLandmarks[],\n  options?: DrawLandmarksOptions\n) {\n  const canvas = resolveInput(canvasArg)\n  if (!(canvas instanceof env.getEnv().Canvas)) {\n    throw new Error('drawLandmarks - expected canvas to be of type: HTMLCanvasElement')\n  }\n\n  const drawOptions = Object.assign(\n    getDefaultDrawOptions(options),\n    (options || {})\n  )\n\n  const { drawLines } = Object.assign({ drawLines: false }, (options || {}))\n\n  const ctx = getContext2dOrThrow(canvas)\n  const { lineWidth, color = 'blue' } = drawOptions\n\n  const faceLandmarksArray = Array.isArray(faceLandmarks) ? faceLandmarks : [faceLandmarks]\n\n  faceLandmarksArray.forEach(landmarks => {\n    if (drawLines && landmarks instanceof FaceLandmarks68) {\n      ctx.strokeStyle = color\n      ctx.lineWidth = lineWidth\n      drawContour(ctx, landmarks.getJawOutline())\n      drawContour(ctx, landmarks.getLeftEyeBrow())\n      drawContour(ctx, landmarks.getRightEyeBrow())\n      drawContour(ctx, landmarks.getNose())\n      drawContour(ctx, landmarks.getLeftEye(), true)\n      drawContour(ctx, landmarks.getRightEye(), true)\n      drawContour(ctx, landmarks.getMouth(), true)\n      return\n    }\n\n    // else draw points\n    const ptOffset = lineWidth / 2\n    ctx.fillStyle = color\n    landmarks.positions.forEach(pt => ctx.fillRect(pt.x - ptOffset, pt.y - ptOffset, lineWidth, lineWidth))\n  })\n}","import { drawText, env, getContext2dOrThrow, getDefaultDrawOptions, resolveInput, round } from 'tfjs-image-recognition-base';\nimport { IRect } from 'tfjs-image-recognition-base';\n\nimport { DrawFaceExpressionsInput, DrawFaceExpressionsOptions } from './types';\n\nexport function drawFaceExpressions(\n  canvasArg: string | HTMLCanvasElement,\n  faceExpressions: DrawFaceExpressionsInput | DrawFaceExpressionsInput[],\n  options?: DrawFaceExpressionsOptions\n) {\n  const canvas = resolveInput(canvasArg)\n  if (!(canvas instanceof env.getEnv().Canvas)) {\n    throw new Error('drawFaceExpressions - expected canvas to be of type: HTMLCanvasElement')\n  }\n\n  const drawOptions = Object.assign(\n    getDefaultDrawOptions(options),\n    (options || {})\n  )\n\n  const ctx = getContext2dOrThrow(canvas)\n  const {\n    primaryColor = 'red',\n    secondaryColor = 'blue',\n    primaryFontSize = 22,\n    secondaryFontSize = 16,\n    minConfidence = 0.2\n  } = drawOptions\n\n  const faceExpressionsArray = Array.isArray(faceExpressions)\n    ? faceExpressions\n    : [faceExpressions]\n\n  faceExpressionsArray.forEach(({ position, expressions }) => {\n    const { x, y } = position\n    const height = (position as IRect).height || 0\n    const sorted = expressions.sort((a, b) => b.probability - a.probability)\n    const resultsToDisplay = sorted.filter(expr => expr.probability > minConfidence)\n\n    let offset = (y + height + resultsToDisplay.length * primaryFontSize) > canvas.height\n      ? -(resultsToDisplay.length * primaryFontSize)\n      : 0\n    resultsToDisplay.forEach((expr, i) => {\n      const text = `${expr.expression} (${round(expr.probability)})`\n      drawText(\n        ctx,\n        x,\n        y + height + (i * primaryFontSize) + offset,\n        text,\n        {\n          textColor: i === 0 ? primaryColor : secondaryColor,\n          fontSize: i === 0 ? primaryFontSize : secondaryFontSize\n        }\n      )\n    })\n  })\n\n\n}","import {\n  createCanvas,\n  env,\n  getContext2dOrThrow,\n  imageTensorToCanvas,\n  Rect,\n  TNetInput,\n  toNetInput,\n} from 'tfjs-image-recognition-base';\n\nimport { FaceDetection } from '../classes/FaceDetection';\n\n/**\n * Extracts the image regions containing the detected faces.\n *\n * @param input The image that face detection has been performed on.\n * @param detections The face detection results or face bounding boxes for that image.\n * @returns The Canvases of the corresponding image region for each detected face.\n */\nexport async function extractFaces(\n  input: TNetInput,\n  detections: Array<FaceDetection | Rect>\n): Promise<HTMLCanvasElement[]> {\n\n  const { Canvas } = env.getEnv()\n\n  let canvas = input as HTMLCanvasElement\n\n  if (!(input instanceof Canvas)) {\n    const netInput = await toNetInput(input)\n\n    if (netInput.batchSize > 1) {\n      throw new Error('extractFaces - batchSize > 1 not supported')\n    }\n\n    const tensorOrCanvas = netInput.getInput(0)\n    canvas = tensorOrCanvas instanceof Canvas\n      ? tensorOrCanvas\n      : await imageTensorToCanvas(tensorOrCanvas)\n  }\n\n  const ctx = getContext2dOrThrow(canvas)\n  const boxes = detections.map(\n    det => det instanceof FaceDetection\n      ? det.forSize(canvas.width, canvas.height).box.floor()\n      : det\n  )\n    .map(box => box.clipAtImageBorders(canvas.width, canvas.height))\n\n  return boxes.map(({ x, y, width, height }) => {\n    const faceImg = createCanvas({ width, height })\n    getContext2dOrThrow(faceImg)\n      .putImageData(ctx.getImageData(x, y, width, height), 0, 0)\n    return faceImg\n  })\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { isTensor4D, Rect, isTensor3D } from 'tfjs-image-recognition-base';\n\nimport { FaceDetection } from '../classes/FaceDetection';\n\n/**\n * Extracts the tensors of the image regions containing the detected faces.\n * Useful if you want to compute the face descriptors for the face images.\n * Using this method is faster then extracting a canvas for each face and\n * converting them to tensors individually.\n *\n * @param imageTensor The image tensor that face detection has been performed on.\n * @param detections The face detection results or face bounding boxes for that image.\n * @returns Tensors of the corresponding image region for each detected face.\n */\nexport async function extractFaceTensors(\n  imageTensor: tf.Tensor3D | tf.Tensor4D,\n  detections: Array<FaceDetection | Rect>\n): Promise<tf.Tensor3D[]> {\n\n  if (!isTensor3D(imageTensor) && !isTensor4D(imageTensor)) {\n    throw new Error('extractFaceTensors - expected image tensor to be 3D or 4D')\n  }\n\n  if (isTensor4D(imageTensor) && imageTensor.shape[0] > 1) {\n    throw new Error('extractFaceTensors - batchSize > 1 not supported')\n  }\n\n  return tf.tidy(() => {\n    const [imgHeight, imgWidth, numChannels] = imageTensor.shape.slice(isTensor4D(imageTensor) ? 1 : 0)\n\n    const boxes = detections.map(\n      det => det instanceof FaceDetection\n        ? det.forSize(imgWidth, imgHeight).box\n        : det\n    )\n      .map(box => box.clipAtImageBorders(imgWidth, imgHeight))\n\n    const faceTensors = boxes.map(({ x, y, width, height }) =>\n      tf.slice3d(imageTensor.as3D(imgHeight, imgWidth, numChannels), [y, x, 0], [height, width, numChannels])\n    )\n\n    return faceTensors\n  })\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\n\nexport function depthwiseSeparableConv(\n  x: tf.Tensor4D,\n  params: TfjsImageRecognitionBase.SeparableConvParams,\n  stride: [number, number]\n): tf.Tensor4D {\n  return tf.tidy(() => {\n    let out = tf.separableConv2d(x, params.depthwise_filter, params.pointwise_filter, stride, 'same')\n    out = tf.add(out, params.bias)\n    return out\n  })\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\n\nimport { depthwiseSeparableConv } from './depthwiseSeparableConv';\nimport { DenseBlock3Params, DenseBlock4Params } from './types';\n\nexport function denseBlock3(\n  x: tf.Tensor4D,\n  denseBlockParams: DenseBlock3Params,\n  isFirstLayer: boolean = false\n): tf.Tensor4D {\n  return tf.tidy(() => {\n    const out1 = tf.relu(\n      isFirstLayer\n        ? tf.add(\n          tf.conv2d(x, (denseBlockParams.conv0 as TfjsImageRecognitionBase.ConvParams).filters, [2, 2], 'same'),\n          denseBlockParams.conv0.bias\n        )\n        : depthwiseSeparableConv(x, denseBlockParams.conv0 as TfjsImageRecognitionBase.SeparableConvParams, [2, 2])\n    ) as tf.Tensor4D\n    const out2 = depthwiseSeparableConv(out1, denseBlockParams.conv1, [1, 1])\n\n    const in3 = tf.relu(tf.add(out1, out2)) as tf.Tensor4D\n    const out3 = depthwiseSeparableConv(in3, denseBlockParams.conv2, [1, 1])\n\n    return tf.relu(tf.add(out1, tf.add(out2, out3))) as tf.Tensor4D\n  })\n}\n\nexport function denseBlock4(\n  x: tf.Tensor4D,\n  denseBlockParams: DenseBlock4Params,\n  isFirstLayer: boolean = false,\n  isScaleDown: boolean = true\n): tf.Tensor4D {\n  return tf.tidy(() => {\n    const out1 = tf.relu(\n      isFirstLayer\n        ? tf.add(\n          tf.conv2d(x, (denseBlockParams.conv0 as TfjsImageRecognitionBase.ConvParams).filters, isScaleDown ? [2, 2] : [1, 1], 'same'),\n          denseBlockParams.conv0.bias\n        )\n        : depthwiseSeparableConv(x, denseBlockParams.conv0 as TfjsImageRecognitionBase.SeparableConvParams, isScaleDown ? [2, 2] : [1, 1])\n    ) as tf.Tensor4D\n    const out2 = depthwiseSeparableConv(out1, denseBlockParams.conv1, [1, 1])\n\n    const in3 = tf.relu(tf.add(out1, out2)) as tf.Tensor4D\n    const out3 = depthwiseSeparableConv(in3, denseBlockParams.conv2, [1, 1])\n\n    const in4 = tf.relu(tf.add(out1, tf.add(out2, out3))) as tf.Tensor4D\n    const out4 = depthwiseSeparableConv(in4, denseBlockParams.conv3, [1, 1])\n\n    return tf.relu(tf.add(out1, tf.add(out2, tf.add(out3, out4)))) as tf.Tensor4D\n  })\n}\n","import * as tf from '@tensorflow/tfjs-core';\nimport { TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\n\nimport { DenseBlock3Params, DenseBlock4Params } from './types';\n\nexport function extractorsFactory(extractWeights: TfjsImageRecognitionBase.ExtractWeightsFunction, paramMappings: TfjsImageRecognitionBase.ParamMapping[]) {\n\n  function extractSeparableConvParams(channelsIn: number, channelsOut: number, mappedPrefix: string): TfjsImageRecognitionBase.SeparableConvParams {\n    const depthwise_filter = tf.tensor4d(extractWeights(3 * 3 * channelsIn), [3, 3, channelsIn, 1])\n    const pointwise_filter = tf.tensor4d(extractWeights(channelsIn * channelsOut), [1, 1, channelsIn, channelsOut])\n    const bias = tf.tensor1d(extractWeights(channelsOut))\n\n    paramMappings.push(\n      { paramPath: `${mappedPrefix}/depthwise_filter` },\n      { paramPath: `${mappedPrefix}/pointwise_filter` },\n      { paramPath: `${mappedPrefix}/bias` }\n    )\n\n    return new TfjsImageRecognitionBase.SeparableConvParams(\n      depthwise_filter,\n      pointwise_filter,\n      bias\n    )\n  }\n\n  const extractConvParams = TfjsImageRecognitionBase.extractConvParamsFactory(extractWeights, paramMappings)\n\n  function extractDenseBlock3Params(channelsIn: number, channelsOut: number, mappedPrefix: string, isFirstLayer: boolean = false): DenseBlock3Params {\n\n    const conv0 = isFirstLayer\n      ? extractConvParams(channelsIn, channelsOut, 3, `${mappedPrefix}/conv0`)\n      : extractSeparableConvParams(channelsIn, channelsOut, `${mappedPrefix}/conv0`)\n    const conv1 = extractSeparableConvParams(channelsOut, channelsOut, `${mappedPrefix}/conv1`)\n    const conv2 = extractSeparableConvParams(channelsOut, channelsOut, `${mappedPrefix}/conv2`)\n\n    return { conv0, conv1, conv2 }\n  }\n\n  function extractDenseBlock4Params(channelsIn: number, channelsOut: number, mappedPrefix: string, isFirstLayer: boolean = false): DenseBlock4Params {\n\n    const { conv0, conv1, conv2 } = extractDenseBlock3Params(channelsIn, channelsOut, mappedPrefix, isFirstLayer)\n    const conv3 = extractSeparableConvParams(channelsOut, channelsOut, `${mappedPrefix}/conv3`)\n\n    return { conv0, conv1, conv2, conv3 }\n  }\n\n  return {\n    extractDenseBlock3Params,\n    extractDenseBlock4Params\n  }\n\n}","\nimport { extractorsFactory } from './extractorsFactory';\nimport { FaceFeatureExtractorParams } from './types';\nimport { TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\n\nexport function extractParams(weights: Float32Array): { params: FaceFeatureExtractorParams, paramMappings: TfjsImageRecognitionBase.ParamMapping[] } {\n\n  const paramMappings: TfjsImageRecognitionBase.ParamMapping[] = []\n\n  const {\n    extractWeights,\n    getRemainingWeights\n  } = TfjsImageRecognitionBase.extractWeightsFactory(weights)\n\n  const {\n    extractDenseBlock4Params\n  } = extractorsFactory(extractWeights, paramMappings)\n\n  const dense0 = extractDenseBlock4Params(3, 32, 'dense0', true)\n  const dense1 = extractDenseBlock4Params(32, 64, 'dense1')\n  const dense2 = extractDenseBlock4Params(64, 128, 'dense2')\n  const dense3 = extractDenseBlock4Params(128, 256, 'dense3')\n\n  if (getRemainingWeights().length !== 0) {\n    throw new Error(`weights remaing after extract: ${getRemainingWeights().length}`)\n  }\n\n  return {\n    paramMappings,\n    params: { dense0, dense1, dense2, dense3 }\n  }\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\n\nimport { DenseBlock3Params, DenseBlock4Params } from './types';\n\nexport function loadParamsFactory(weightMap: any, paramMappings: TfjsImageRecognitionBase.ParamMapping[]) {\n\n  const extractWeightEntry = TfjsImageRecognitionBase.extractWeightEntryFactory(weightMap, paramMappings)\n\n  function extractConvParams(prefix: string): TfjsImageRecognitionBase.ConvParams {\n    const filters = extractWeightEntry<tf.Tensor4D>(`${prefix}/filters`, 4)\n    const bias = extractWeightEntry<tf.Tensor1D>(`${prefix}/bias`, 1)\n\n    return { filters, bias }\n  }\n\n  function extractSeparableConvParams(prefix: string): TfjsImageRecognitionBase.SeparableConvParams {\n    const depthwise_filter = extractWeightEntry<tf.Tensor4D>(`${prefix}/depthwise_filter`, 4)\n    const pointwise_filter = extractWeightEntry<tf.Tensor4D>(`${prefix}/pointwise_filter`, 4)\n    const bias = extractWeightEntry<tf.Tensor1D>(`${prefix}/bias`, 1)\n\n    return new TfjsImageRecognitionBase.SeparableConvParams(\n      depthwise_filter,\n      pointwise_filter,\n      bias\n    )\n  }\n\n  function extractDenseBlock3Params(prefix: string, isFirstLayer: boolean = false): DenseBlock3Params {\n    const conv0 = isFirstLayer\n      ? extractConvParams(`${prefix}/conv0`)\n      : extractSeparableConvParams(`${prefix}/conv0`)\n    const conv1 = extractSeparableConvParams(`${prefix}/conv1`)\n    const conv2 = extractSeparableConvParams(`${prefix}/conv2`)\n\n    return { conv0, conv1, conv2 }\n  }\n\n  function extractDenseBlock4Params(prefix: string, isFirstLayer: boolean = false): DenseBlock4Params {\n    const conv0 = isFirstLayer\n      ? extractConvParams(`${prefix}/conv0`)\n      : extractSeparableConvParams(`${prefix}/conv0`)\n    const conv1 = extractSeparableConvParams(`${prefix}/conv1`)\n    const conv2 = extractSeparableConvParams(`${prefix}/conv2`)\n    const conv3 = extractSeparableConvParams(`${prefix}/conv3`)\n\n    return { conv0, conv1, conv2, conv3 }\n  }\n\n  return {\n    extractDenseBlock3Params,\n    extractDenseBlock4Params\n  }\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\n\nimport { loadParamsFactory } from './loadParamsFactory';\nimport { FaceFeatureExtractorParams } from './types';\n\nexport function extractParamsFromWeigthMap(\n  weightMap: tf.NamedTensorMap\n): { params: FaceFeatureExtractorParams, paramMappings: TfjsImageRecognitionBase.ParamMapping[] } {\n\n  const paramMappings: TfjsImageRecognitionBase.ParamMapping[] = []\n\n  const {\n    extractDenseBlock4Params\n  } = loadParamsFactory(weightMap, paramMappings)\n\n  const params = {\n    dense0: extractDenseBlock4Params('dense0', true),\n    dense1: extractDenseBlock4Params('dense1'),\n    dense2: extractDenseBlock4Params('dense2'),\n    dense3: extractDenseBlock4Params('dense3')\n  }\n\n  TfjsImageRecognitionBase.disposeUnusedWeightTensors(weightMap, paramMappings)\n\n  return { params, paramMappings }\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { NetInput, NeuralNetwork, normalize, TNetInput, toNetInput } from 'tfjs-image-recognition-base';\n\nimport { denseBlock4 } from './denseBlock';\nimport { extractParams } from './extractParams';\nimport { extractParamsFromWeigthMap } from './extractParamsFromWeigthMap';\nimport { FaceFeatureExtractorParams, IFaceFeatureExtractor } from './types';\n\nexport class FaceFeatureExtractor extends NeuralNetwork<FaceFeatureExtractorParams> implements IFaceFeatureExtractor<FaceFeatureExtractorParams> {\n\n  constructor() {\n    super('FaceFeatureExtractor')\n  }\n\n  public forwardInput(input: NetInput): tf.Tensor4D {\n\n    const { params } = this\n\n    if (!params) {\n      throw new Error('FaceFeatureExtractor - load model before inference')\n    }\n\n    return tf.tidy(() => {\n      const batchTensor = input.toBatchTensor(112, true)\n      const meanRgb = [122.782, 117.001, 104.298]\n      const normalized = normalize(batchTensor, meanRgb).div(tf.scalar(255)) as tf.Tensor4D\n\n      let out = denseBlock4(normalized, params.dense0, true)\n      out = denseBlock4(out, params.dense1)\n      out = denseBlock4(out, params.dense2)\n      out = denseBlock4(out, params.dense3)\n      out = tf.avgPool(out, [7, 7], [2, 2], 'valid')\n\n      return out\n    })\n  }\n\n  public async forward(input: TNetInput): Promise<tf.Tensor4D> {\n    return this.forwardInput(await toNetInput(input))\n  }\n\n  protected getDefaultModelName(): string {\n    return 'face_feature_extractor_model'\n  }\n\n  protected extractParamsFromWeigthMap(weightMap: tf.NamedTensorMap) {\n    return extractParamsFromWeigthMap(weightMap)\n  }\n\n  protected extractParams(weights: Float32Array) {\n    return extractParams(weights)\n  }\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\n\nexport function fullyConnectedLayer(\n  x: tf.Tensor2D,\n  params: TfjsImageRecognitionBase.FCParams\n): tf.Tensor2D {\n  return tf.tidy(() =>\n    tf.add(\n      tf.matMul(x, params.weights),\n      params.bias\n    )\n  )\n}","import { TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\n\nimport { NetParams } from './types';\n\nexport function extractParams(weights: Float32Array, channelsIn: number, channelsOut: number): { params: NetParams, paramMappings: TfjsImageRecognitionBase.ParamMapping[] } {\n\n  const paramMappings: TfjsImageRecognitionBase.ParamMapping[] = []\n\n  const {\n    extractWeights,\n    getRemainingWeights\n  } = TfjsImageRecognitionBase.extractWeightsFactory(weights)\n\n  const extractFCParams = TfjsImageRecognitionBase.extractFCParamsFactory(extractWeights, paramMappings)\n\n  const fc = extractFCParams(channelsIn, channelsOut, 'fc')\n\n  if (getRemainingWeights().length !== 0) {\n    throw new Error(`weights remaing after extract: ${getRemainingWeights().length}`)\n  }\n\n  return {\n    paramMappings,\n    params: { fc }\n  }\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\n\nimport { NetParams } from './types';\n\nexport function extractParamsFromWeigthMap(\n  weightMap: tf.NamedTensorMap\n): { params: NetParams, paramMappings: TfjsImageRecognitionBase.ParamMapping[] } {\n\n  const paramMappings: TfjsImageRecognitionBase.ParamMapping[] = []\n\n  const extractWeightEntry = TfjsImageRecognitionBase.extractWeightEntryFactory(weightMap, paramMappings)\n\n  function extractFcParams(prefix: string): TfjsImageRecognitionBase.FCParams {\n    const weights = extractWeightEntry<tf.Tensor2D>(`${prefix}/weights`, 2)\n    const bias = extractWeightEntry<tf.Tensor1D>(`${prefix}/bias`, 1)\n    return { weights, bias }\n  }\n\n  const params = {\n    fc: extractFcParams('fc')\n  }\n\n  TfjsImageRecognitionBase.disposeUnusedWeightTensors(weightMap, paramMappings)\n\n  return { params, paramMappings }\n}","import * as tf from '@tensorflow/tfjs-core';\n\nexport function seperateWeightMaps(weightMap: tf.NamedTensorMap) {\n\n  const featureExtractorMap: tf.NamedTensorMap = {}\n  const classifierMap: tf.NamedTensorMap = {}\n\n  Object.keys(weightMap).forEach(key => {\n    const map = key.startsWith('fc') ? classifierMap : featureExtractorMap\n    map[key] = weightMap[key]\n  })\n\n  return { featureExtractorMap, classifierMap }\n\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { NetInput, NeuralNetwork } from 'tfjs-image-recognition-base';\n\nimport { fullyConnectedLayer } from '../common/fullyConnectedLayer';\nimport {\n  FaceFeatureExtractorParams,\n  IFaceFeatureExtractor,\n  TinyFaceFeatureExtractorParams,\n} from '../faceFeatureExtractor/types';\nimport { extractParams } from './extractParams';\nimport { extractParamsFromWeigthMap } from './extractParamsFromWeigthMap';\nimport { NetParams } from './types';\nimport { seperateWeightMaps } from './util';\n\nexport abstract class FaceProcessor<\n  TExtractorParams extends FaceFeatureExtractorParams | TinyFaceFeatureExtractorParams\n>\n  extends NeuralNetwork<NetParams> {\n\n  protected _faceFeatureExtractor: IFaceFeatureExtractor<TExtractorParams>\n\n  constructor(_name: string, faceFeatureExtractor: IFaceFeatureExtractor<TExtractorParams>) {\n    super(_name)\n    this._faceFeatureExtractor = faceFeatureExtractor\n  }\n\n  public get faceFeatureExtractor(): IFaceFeatureExtractor<TExtractorParams> {\n    return this._faceFeatureExtractor\n  }\n\n  protected abstract getDefaultModelName(): string\n  protected abstract getClassifierChannelsIn(): number\n  protected abstract getClassifierChannelsOut(): number\n\n  public runNet(input: NetInput | tf.Tensor4D): tf.Tensor2D {\n\n    const { params } = this\n\n    if (!params) {\n      throw new Error(`${this._name} - load model before inference`)\n    }\n\n    return tf.tidy(() => {\n      const bottleneckFeatures = input instanceof NetInput\n        ? this.faceFeatureExtractor.forwardInput(input)\n        : input\n      return fullyConnectedLayer(bottleneckFeatures.as2D(bottleneckFeatures.shape[0], -1), params.fc)\n    })\n  }\n\n  public dispose(throwOnRedispose: boolean = true) {\n    this.faceFeatureExtractor.dispose(throwOnRedispose)\n    super.dispose(throwOnRedispose)\n  }\n\n  public loadClassifierParams(weights: Float32Array) {\n    const { params, paramMappings } = this.extractClassifierParams(weights)\n    this._params = params\n    this._paramMappings = paramMappings\n  }\n\n  public extractClassifierParams(weights: Float32Array) {\n    return extractParams(weights, this.getClassifierChannelsIn(), this.getClassifierChannelsOut())\n  }\n\n  protected extractParamsFromWeigthMap(weightMap: tf.NamedTensorMap) {\n\n    const { featureExtractorMap, classifierMap } = seperateWeightMaps(weightMap)\n\n    this.faceFeatureExtractor.loadFromWeightMap(featureExtractorMap)\n\n    return extractParamsFromWeigthMap(classifierMap)\n  }\n\n  protected extractParams(weights: Float32Array) {\n\n    const cIn = this.getClassifierChannelsIn()\n    const cOut = this.getClassifierChannelsOut()\n    const classifierWeightSize = (cOut * cIn ) + cOut\n\n    const featureExtractorWeights = weights.slice(0, weights.length - classifierWeightSize)\n    const classifierWeights = weights.slice(weights.length - classifierWeightSize)\n\n    this.faceFeatureExtractor.extractWeights(featureExtractorWeights)\n    return this.extractClassifierParams(classifierWeights)\n  }\n}","export const faceExpressionLabels = {\n  neutral: 0,\n  happy: 1,\n  sad: 2,\n  angry: 3,\n  fearful: 4,\n  disgusted: 5,\n  surprised:6\n}\n\nexport type FaceExpression = 'neutral' | 'happy' | 'sad' | 'angry' | 'fearful' | 'disgusted' | 'surprised'\n\nexport type FaceExpressionPrediction = {\n  expression: FaceExpression,\n  probability: number\n}\n","import * as tf from '@tensorflow/tfjs-core';\nimport { NetInput, TNetInput, toNetInput } from 'tfjs-image-recognition-base';\n\nimport { FaceFeatureExtractor } from '../faceFeatureExtractor/FaceFeatureExtractor';\nimport { FaceFeatureExtractorParams } from '../faceFeatureExtractor/types';\nimport { FaceProcessor } from '../faceProcessor/FaceProcessor';\nimport { FaceExpression, faceExpressionLabels, FaceExpressionPrediction } from './types';\n\nexport class FaceExpressionNet extends FaceProcessor<FaceFeatureExtractorParams> {\n\n  public static getFaceExpressionLabel(faceExpression: string) {\n    const label = faceExpressionLabels[faceExpression]\n\n    if (typeof label !== 'number') {\n      throw new Error(`getFaceExpressionLabel - no label for faceExpression: ${faceExpression}`)\n    }\n\n    return label\n  }\n\n  public static decodeProbabilites(probabilities: number[] | Float32Array): FaceExpressionPrediction[] {\n    if (probabilities.length !== 7) {\n      throw new Error(`decodeProbabilites - expected probabilities.length to be 7, have: ${probabilities.length}`)\n    }\n\n    return (Object.keys(faceExpressionLabels) as FaceExpression[])\n      .map(expression => ({ expression, probability: probabilities[faceExpressionLabels[expression]] }))\n  }\n\n  constructor(faceFeatureExtractor: FaceFeatureExtractor = new FaceFeatureExtractor()) {\n    super('FaceExpressionNet', faceFeatureExtractor)\n  }\n\n  public forwardInput(input: NetInput | tf.Tensor4D): tf.Tensor2D {\n    return tf.tidy(() => tf.softmax(this.runNet(input)))\n  }\n\n  public async forward(input: TNetInput): Promise<tf.Tensor2D> {\n    return this.forwardInput(await toNetInput(input))\n  }\n\n  public async predictExpressions(input: TNetInput) {\n    const netInput = await toNetInput(input)\n    const out = await this.forwardInput(netInput)\n    const probabilitesByBatch = await Promise.all(tf.unstack(out).map(async t => {\n      const data = await t.data()\n      t.dispose()\n      return data\n    }))\n    out.dispose()\n\n    const predictionsByBatch = probabilitesByBatch\n      .map(propablities => FaceExpressionNet.decodeProbabilites(propablities as Float32Array))\n\n    return netInput.isBatchInput\n      ? predictionsByBatch\n      : predictionsByBatch[0]\n  }\n\n  protected getDefaultModelName(): string {\n    return 'face_expression_model'\n  }\n\n  protected getClassifierChannelsIn(): number {\n    return 256\n  }\n\n  protected getClassifierChannelsOut(): number {\n    return 7\n  }\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { IDimensions, isEven, NetInput, Point, TNetInput, toNetInput } from 'tfjs-image-recognition-base';\n\nimport { FaceLandmarks68 } from '../classes/FaceLandmarks68';\nimport { FaceFeatureExtractorParams, TinyFaceFeatureExtractorParams } from '../faceFeatureExtractor/types';\nimport { FaceProcessor } from '../faceProcessor/FaceProcessor';\n\nexport abstract class FaceLandmark68NetBase<\n  TExtractorParams extends FaceFeatureExtractorParams | TinyFaceFeatureExtractorParams\n>\n  extends FaceProcessor<TExtractorParams> {\n\n  public postProcess(output: tf.Tensor2D, inputSize: number, originalDimensions: IDimensions[]): tf.Tensor2D {\n\n    const inputDimensions = originalDimensions.map(({ width, height }) => {\n      const scale = inputSize / Math.max(height, width)\n      return {\n        width: width * scale,\n        height: height * scale\n      }\n    })\n\n    const batchSize = inputDimensions.length\n\n    return tf.tidy(() => {\n      const createInterleavedTensor = (fillX: number, fillY: number) =>\n        tf.stack([\n          tf.fill([68], fillX),\n          tf.fill([68], fillY)\n        ], 1).as2D(1, 136).as1D()\n\n      const getPadding = (batchIdx: number, cond: (w: number, h: number) => boolean): number => {\n        const { width, height } = inputDimensions[batchIdx]\n        return cond(width, height) ? Math.abs(width - height) / 2 : 0\n      }\n      const getPaddingX = (batchIdx: number) => getPadding(batchIdx, (w, h) => w < h)\n      const getPaddingY = (batchIdx: number) => getPadding(batchIdx, (w, h) => h < w)\n\n      const landmarkTensors = output\n        .mul(tf.fill([batchSize, 136], inputSize))\n        .sub(tf.stack(Array.from(Array(batchSize), (_, batchIdx) =>\n          createInterleavedTensor(\n            getPaddingX(batchIdx),\n            getPaddingY(batchIdx)\n          )\n        )))\n        .div(tf.stack(Array.from(Array(batchSize), (_, batchIdx) =>\n          createInterleavedTensor(\n            inputDimensions[batchIdx].width,\n            inputDimensions[batchIdx].height\n          )\n        )))\n\n      return landmarkTensors as tf.Tensor2D\n    })\n  }\n\n  public forwardInput(input: NetInput): tf.Tensor2D {\n    return tf.tidy(() => {\n      const out = this.runNet(input)\n      return this.postProcess(\n        out,\n        input.inputSize as number,\n        input.inputDimensions.map(([height, width]) => ({ height, width }))\n      )\n    })\n  }\n\n  public async forward(input: TNetInput): Promise<tf.Tensor2D> {\n    return this.forwardInput(await toNetInput(input))\n  }\n\n  public async detectLandmarks(input: TNetInput): Promise<FaceLandmarks68 | FaceLandmarks68[]> {\n    const netInput = await toNetInput(input)\n    const landmarkTensors = tf.tidy(\n      () => tf.unstack(this.forwardInput(netInput))\n    )\n\n    const landmarksForBatch = await Promise.all(landmarkTensors.map(\n      async (landmarkTensor, batchIdx) => {\n        const landmarksArray = Array.from(await landmarkTensor.data())\n        const xCoords = landmarksArray.filter((_, i) => isEven(i))\n        const yCoords = landmarksArray.filter((_, i) => !isEven(i))\n\n        return new FaceLandmarks68(\n          Array(68).fill(0).map((_, i) => new Point(xCoords[i], yCoords[i])),\n          {\n            height: netInput.getInputHeight(batchIdx),\n            width : netInput.getInputWidth(batchIdx),\n          }\n        )\n      }\n    ))\n\n    landmarkTensors.forEach(t => t.dispose())\n\n    return netInput.isBatchInput\n      ? landmarksForBatch\n      : landmarksForBatch[0]\n  }\n\n  protected getClassifierChannelsOut(): number {\n    return 136\n  }\n}","import { FaceFeatureExtractor } from '../faceFeatureExtractor/FaceFeatureExtractor';\nimport { FaceFeatureExtractorParams } from '../faceFeatureExtractor/types';\nimport { FaceLandmark68NetBase } from './FaceLandmark68NetBase';\n\nexport class FaceLandmark68Net extends FaceLandmark68NetBase<FaceFeatureExtractorParams> {\n\n  constructor(faceFeatureExtractor: FaceFeatureExtractor = new FaceFeatureExtractor()) {\n    super('FaceLandmark68Net', faceFeatureExtractor)\n  }\n\n  protected getDefaultModelName(): string {\n    return 'face_landmark_68_model'\n  }\n\n  protected getClassifierChannelsIn(): number {\n    return 256\n  }\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\n\nimport { loadParamsFactory } from './loadParamsFactory';\nimport { TinyFaceFeatureExtractorParams } from './types';\n\nexport function extractParamsFromWeigthMapTiny(\n  weightMap: tf.NamedTensorMap\n): { params: TinyFaceFeatureExtractorParams, paramMappings: TfjsImageRecognitionBase.ParamMapping[] } {\n\n  const paramMappings: TfjsImageRecognitionBase.ParamMapping[] = []\n\n  const {\n    extractDenseBlock3Params\n  } = loadParamsFactory(weightMap, paramMappings)\n\n  const params = {\n    dense0: extractDenseBlock3Params('dense0', true),\n    dense1: extractDenseBlock3Params('dense1'),\n    dense2: extractDenseBlock3Params('dense2')\n  }\n\n  TfjsImageRecognitionBase.disposeUnusedWeightTensors(weightMap, paramMappings)\n\n  return { params, paramMappings }\n}","import { TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\n\nimport { extractorsFactory } from './extractorsFactory';\nimport { TinyFaceFeatureExtractorParams } from './types';\n\n\nexport function extractParamsTiny(weights: Float32Array): { params: TinyFaceFeatureExtractorParams, paramMappings: TfjsImageRecognitionBase.ParamMapping[] } {\n\n  const paramMappings: TfjsImageRecognitionBase.ParamMapping[] = []\n\n  const {\n    extractWeights,\n    getRemainingWeights\n  } = TfjsImageRecognitionBase.extractWeightsFactory(weights)\n\n  const {\n    extractDenseBlock3Params\n  } = extractorsFactory(extractWeights, paramMappings)\n\n  const dense0 = extractDenseBlock3Params(3, 32, 'dense0', true)\n  const dense1 = extractDenseBlock3Params(32, 64, 'dense1')\n  const dense2 = extractDenseBlock3Params(64, 128, 'dense2')\n\n  if (getRemainingWeights().length !== 0) {\n    throw new Error(`weights remaing after extract: ${getRemainingWeights().length}`)\n  }\n\n  return {\n    paramMappings,\n    params: { dense0, dense1, dense2 }\n  }\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { NetInput, NeuralNetwork, normalize, TNetInput, toNetInput } from 'tfjs-image-recognition-base';\n\nimport { denseBlock3 } from './denseBlock';\nimport { extractParamsFromWeigthMapTiny } from './extractParamsFromWeigthMapTiny';\nimport { extractParamsTiny } from './extractParamsTiny';\nimport { IFaceFeatureExtractor, TinyFaceFeatureExtractorParams } from './types';\n\nexport class TinyFaceFeatureExtractor extends NeuralNetwork<TinyFaceFeatureExtractorParams> implements IFaceFeatureExtractor<TinyFaceFeatureExtractorParams> {\n\n  constructor() {\n    super('TinyFaceFeatureExtractor')\n  }\n\n  public forwardInput(input: NetInput): tf.Tensor4D {\n\n    const { params } = this\n\n    if (!params) {\n      throw new Error('TinyFaceFeatureExtractor - load model before inference')\n    }\n\n    return tf.tidy(() => {\n      const batchTensor = input.toBatchTensor(112, true)\n      const meanRgb = [122.782, 117.001, 104.298]\n      const normalized = normalize(batchTensor, meanRgb).div(tf.scalar(255)) as tf.Tensor4D\n\n      let out = denseBlock3(normalized, params.dense0, true)\n      out = denseBlock3(out, params.dense1)\n      out = denseBlock3(out, params.dense2)\n      out = tf.avgPool(out, [14, 14], [2, 2], 'valid')\n\n      return out\n    })\n  }\n\n  public async forward(input: TNetInput): Promise<tf.Tensor4D> {\n    return this.forwardInput(await toNetInput(input))\n  }\n\n  protected getDefaultModelName(): string {\n    return 'face_feature_extractor_tiny_model'\n  }\n\n  protected extractParamsFromWeigthMap(weightMap: tf.NamedTensorMap) {\n    return extractParamsFromWeigthMapTiny(weightMap)\n  }\n\n  protected extractParams(weights: Float32Array) {\n    return extractParamsTiny(weights)\n  }\n}","import { TinyFaceFeatureExtractor } from '../faceFeatureExtractor/TinyFaceFeatureExtractor';\nimport { TinyFaceFeatureExtractorParams } from '../faceFeatureExtractor/types';\nimport { FaceLandmark68NetBase } from './FaceLandmark68NetBase';\n\nexport class FaceLandmark68TinyNet extends FaceLandmark68NetBase<TinyFaceFeatureExtractorParams> {\n\n  constructor(faceFeatureExtractor: TinyFaceFeatureExtractor = new TinyFaceFeatureExtractor()) {\n    super('FaceLandmark68TinyNet', faceFeatureExtractor)\n  }\n\n  protected getDefaultModelName(): string {\n    return 'face_landmark_68_tiny_model'\n  }\n\n  protected getClassifierChannelsIn(): number {\n    return 128\n  }\n}","import { FaceLandmark68Net } from './FaceLandmark68Net';\n\nexport * from './FaceLandmark68Net';\nexport * from './FaceLandmark68TinyNet';\n\nexport class FaceLandmarkNet extends FaceLandmark68Net {}","import * as tf from '@tensorflow/tfjs-core';\n\nimport { ScaleLayerParams } from './types';\n\nexport function scale(x: tf.Tensor4D, params: ScaleLayerParams): tf.Tensor4D {\n  return tf.add(tf.mul(x, params.weights), params.biases)\n}\n","import * as tf from '@tensorflow/tfjs-core';\n\nimport { scale } from './scaleLayer';\nimport { ConvLayerParams } from './types';\n\n\nfunction convLayer(\n  x: tf.Tensor4D,\n  params: ConvLayerParams,\n  strides: [number, number],\n  withRelu: boolean,\n  padding: 'valid' | 'same' = 'same'\n): tf.Tensor4D {\n  const { filters, bias } = params.conv\n\n  let out = tf.conv2d(x, filters, strides, padding)\n  out = tf.add(out, bias)\n  out = scale(out, params.scale)\n  return withRelu ? tf.relu(out) : out\n}\n\nexport function conv(x: tf.Tensor4D, params: ConvLayerParams) {\n  return convLayer(x, params, [1, 1], true)\n}\n\nexport function convNoRelu(x: tf.Tensor4D, params: ConvLayerParams) {\n  return convLayer(x, params, [1, 1], false)\n}\n\nexport function convDown(x: tf.Tensor4D, params: ConvLayerParams) {\n  return convLayer(x, params, [2, 2], true, 'valid')\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { isFloat, TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\n\nimport { ConvLayerParams, NetParams, ResidualLayerParams, ScaleLayerParams } from './types';\n\nfunction extractorsFactory(extractWeights: TfjsImageRecognitionBase.ExtractWeightsFunction, paramMappings: TfjsImageRecognitionBase.ParamMapping[]) {\n\n  function extractFilterValues(numFilterValues: number, numFilters: number, filterSize: number): tf.Tensor4D {\n    const weights = extractWeights(numFilterValues)\n    const depth = weights.length / (numFilters * filterSize * filterSize)\n\n    if (isFloat(depth)) {\n      throw new Error(`depth has to be an integer: ${depth}, weights.length: ${weights.length}, numFilters: ${numFilters}, filterSize: ${filterSize}`)\n    }\n\n    return tf.tidy(\n      () => tf.transpose(\n        tf.tensor4d(weights, [numFilters, depth, filterSize, filterSize]),\n        [2, 3, 1, 0]\n      )\n    )\n  }\n\n  function extractConvParams(\n    numFilterValues: number,\n    numFilters: number,\n    filterSize: number,\n    mappedPrefix: string\n  ): TfjsImageRecognitionBase.ConvParams {\n\n    const filters = extractFilterValues(numFilterValues, numFilters, filterSize)\n    const bias = tf.tensor1d(extractWeights(numFilters))\n\n    paramMappings.push(\n      { paramPath: `${mappedPrefix}/filters` },\n      { paramPath: `${mappedPrefix}/bias` }\n    )\n\n    return { filters, bias }\n  }\n\n  function extractScaleLayerParams(numWeights: number, mappedPrefix: string): ScaleLayerParams {\n\n    const weights = tf.tensor1d(extractWeights(numWeights))\n    const biases = tf.tensor1d(extractWeights(numWeights))\n\n    paramMappings.push(\n      { paramPath: `${mappedPrefix}/weights` },\n      { paramPath: `${mappedPrefix}/biases` }\n    )\n\n    return {\n      weights,\n      biases\n    }\n  }\n\n  function extractConvLayerParams(\n    numFilterValues: number,\n    numFilters: number,\n    filterSize: number,\n    mappedPrefix: string\n  ): ConvLayerParams {\n\n    const conv = extractConvParams(numFilterValues, numFilters, filterSize, `${mappedPrefix}/conv`)\n    const scale = extractScaleLayerParams(numFilters, `${mappedPrefix}/scale`)\n\n    return { conv, scale }\n  }\n\n  function extractResidualLayerParams(\n    numFilterValues: number,\n    numFilters: number,\n    filterSize: number,\n    mappedPrefix: string,\n    isDown: boolean = false\n  ): ResidualLayerParams {\n\n    const conv1 = extractConvLayerParams((isDown ? 0.5 : 1) * numFilterValues, numFilters, filterSize, `${mappedPrefix}/conv1`)\n    const conv2 = extractConvLayerParams(numFilterValues, numFilters, filterSize, `${mappedPrefix}/conv2`)\n\n    return { conv1, conv2 }\n  }\n\n  return {\n    extractConvLayerParams,\n    extractResidualLayerParams\n  }\n\n}\n\nexport function extractParams(weights: Float32Array): { params: NetParams, paramMappings: TfjsImageRecognitionBase.ParamMapping[] } {\n\n  const {\n    extractWeights,\n    getRemainingWeights\n  } = TfjsImageRecognitionBase.extractWeightsFactory(weights)\n\n  const paramMappings: TfjsImageRecognitionBase.ParamMapping[] = []\n\n  const {\n    extractConvLayerParams,\n    extractResidualLayerParams\n  } = extractorsFactory(extractWeights, paramMappings)\n\n  const conv32_down = extractConvLayerParams(4704, 32, 7, 'conv32_down')\n  const conv32_1 = extractResidualLayerParams(9216, 32, 3, 'conv32_1')\n  const conv32_2 = extractResidualLayerParams(9216, 32, 3, 'conv32_2')\n  const conv32_3 = extractResidualLayerParams(9216, 32, 3, 'conv32_3')\n\n  const conv64_down = extractResidualLayerParams(36864, 64, 3, 'conv64_down', true)\n  const conv64_1 = extractResidualLayerParams(36864, 64, 3, 'conv64_1')\n  const conv64_2 = extractResidualLayerParams(36864, 64, 3, 'conv64_2')\n  const conv64_3 = extractResidualLayerParams(36864, 64, 3, 'conv64_3')\n\n  const conv128_down = extractResidualLayerParams(147456, 128, 3, 'conv128_down', true)\n  const conv128_1 = extractResidualLayerParams(147456, 128, 3, 'conv128_1')\n  const conv128_2 = extractResidualLayerParams(147456, 128, 3, 'conv128_2')\n\n  const conv256_down = extractResidualLayerParams(589824, 256, 3, 'conv256_down', true)\n  const conv256_1 = extractResidualLayerParams(589824, 256, 3, 'conv256_1')\n  const conv256_2 = extractResidualLayerParams(589824, 256, 3, 'conv256_2')\n  const conv256_down_out = extractResidualLayerParams(589824, 256, 3, 'conv256_down_out')\n\n  const fc = tf.tidy(\n    () => tf.transpose(tf.tensor2d(extractWeights(256 * 128), [128, 256]), [1, 0])\n  )\n  paramMappings.push({ paramPath: `fc` })\n\n  if (getRemainingWeights().length !== 0) {\n    throw new Error(`weights remaing after extract: ${getRemainingWeights().length}`)\n  }\n\n  const params = {\n    conv32_down,\n    conv32_1,\n    conv32_2,\n    conv32_3,\n    conv64_down,\n    conv64_1,\n    conv64_2,\n    conv64_3,\n    conv128_down,\n    conv128_1,\n    conv128_2,\n    conv256_down,\n    conv256_1,\n    conv256_2,\n    conv256_down_out,\n    fc\n  }\n\n  return { params, paramMappings }\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { isTensor2D, TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\n\nimport { ConvLayerParams, NetParams, ResidualLayerParams, ScaleLayerParams } from './types';\n\nfunction extractorsFactory(weightMap: any, paramMappings: TfjsImageRecognitionBase.ParamMapping[]) {\n\n  const extractWeightEntry = TfjsImageRecognitionBase.extractWeightEntryFactory(weightMap, paramMappings)\n\n  function extractScaleLayerParams(prefix: string): ScaleLayerParams {\n\n    const weights = extractWeightEntry<tf.Tensor1D>(`${prefix}/scale/weights`, 1)\n    const biases = extractWeightEntry<tf.Tensor1D>(`${prefix}/scale/biases`, 1)\n\n    return { weights, biases }\n  }\n\n  function extractConvLayerParams(prefix: string): ConvLayerParams {\n\n    const filters = extractWeightEntry<tf.Tensor4D>(`${prefix}/conv/filters`, 4)\n    const bias = extractWeightEntry<tf.Tensor1D>(`${prefix}/conv/bias`, 1)\n    const scale = extractScaleLayerParams(prefix)\n\n    return { conv: { filters, bias }, scale }\n  }\n\n  function extractResidualLayerParams(prefix: string): ResidualLayerParams {\n    return {\n      conv1: extractConvLayerParams(`${prefix}/conv1`),\n      conv2: extractConvLayerParams(`${prefix}/conv2`)\n    }\n  }\n\n  return {\n    extractConvLayerParams,\n    extractResidualLayerParams\n  }\n\n}\n\nexport function extractParamsFromWeigthMap(\n  weightMap: tf.NamedTensorMap\n): { params: NetParams, paramMappings: TfjsImageRecognitionBase.ParamMapping[] } {\n\n  const paramMappings: TfjsImageRecognitionBase.ParamMapping[] = []\n\n  const {\n    extractConvLayerParams,\n    extractResidualLayerParams\n  } = extractorsFactory(weightMap, paramMappings)\n\n  const conv32_down = extractConvLayerParams('conv32_down')\n  const conv32_1 = extractResidualLayerParams('conv32_1')\n  const conv32_2 = extractResidualLayerParams('conv32_2')\n  const conv32_3 = extractResidualLayerParams('conv32_3')\n\n  const conv64_down = extractResidualLayerParams('conv64_down')\n  const conv64_1 = extractResidualLayerParams('conv64_1')\n  const conv64_2 = extractResidualLayerParams('conv64_2')\n  const conv64_3 = extractResidualLayerParams('conv64_3')\n\n  const conv128_down = extractResidualLayerParams('conv128_down')\n  const conv128_1 = extractResidualLayerParams('conv128_1')\n  const conv128_2 = extractResidualLayerParams('conv128_2')\n\n  const conv256_down = extractResidualLayerParams('conv256_down')\n  const conv256_1 = extractResidualLayerParams('conv256_1')\n  const conv256_2 = extractResidualLayerParams('conv256_2')\n  const conv256_down_out = extractResidualLayerParams('conv256_down_out')\n\n  const fc = weightMap['fc']\n  paramMappings.push({ originalPath: 'fc', paramPath: 'fc' })\n\n  if (!isTensor2D(fc)) {\n    throw new Error(`expected weightMap[fc] to be a Tensor2D, instead have ${fc}`)\n  }\n\n  const params = {\n    conv32_down,\n    conv32_1,\n    conv32_2,\n    conv32_3,\n    conv64_down,\n    conv64_1,\n    conv64_2,\n    conv64_3,\n    conv128_down,\n    conv128_1,\n    conv128_2,\n    conv256_down,\n    conv256_1,\n    conv256_2,\n    conv256_down_out,\n    fc\n  }\n\n  TfjsImageRecognitionBase.disposeUnusedWeightTensors(weightMap, paramMappings)\n\n  return { params, paramMappings }\n}","import * as tf from '@tensorflow/tfjs-core';\n\nimport { conv, convDown, convNoRelu } from './convLayer';\nimport { ResidualLayerParams } from './types';\n\nexport function residual(x: tf.Tensor4D, params: ResidualLayerParams): tf.Tensor4D {\n  let out = conv(x, params.conv1)\n  out = convNoRelu(out, params.conv2)\n  out = tf.add(out, x)\n  out = tf.relu(out)\n  return out\n}\n\nexport function residualDown(x: tf.Tensor4D, params: ResidualLayerParams): tf.Tensor4D {\n  let out = convDown(x, params.conv1)\n  out = convNoRelu(out, params.conv2)\n\n  let pooled = tf.avgPool(x, 2, 2, 'valid') as tf.Tensor4D\n  const zeros = tf.zeros<tf.Rank.R4>(pooled.shape)\n  const isPad = pooled.shape[3] !== out.shape[3]\n  const isAdjustShape = pooled.shape[1] !== out.shape[1] || pooled.shape[2] !== out.shape[2]\n\n  if (isAdjustShape) {\n    const padShapeX = [...out.shape] as [number, number, number, number]\n    padShapeX[1] = 1\n    const zerosW = tf.zeros<tf.Rank.R4>(padShapeX)\n    out = tf.concat([out, zerosW], 1)\n\n    const padShapeY = [...out.shape] as [number, number, number, number]\n    padShapeY[2] = 1\n    const zerosH = tf.zeros<tf.Rank.R4>(padShapeY)\n    out = tf.concat([out, zerosH], 2)\n  }\n\n  pooled = isPad ? tf.concat([pooled, zeros], 3) : pooled\n  out = tf.add(pooled, out) as tf.Tensor4D\n\n  out = tf.relu(out)\n  return out\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { NetInput, NeuralNetwork, normalize, TNetInput, toNetInput } from 'tfjs-image-recognition-base';\n\nimport { convDown } from './convLayer';\nimport { extractParams } from './extractParams';\nimport { extractParamsFromWeigthMap } from './extractParamsFromWeigthMap';\nimport { residual, residualDown } from './residualLayer';\nimport { NetParams } from './types';\n\n\nexport class FaceRecognitionNet extends NeuralNetwork<NetParams> {\n\n  constructor() {\n    super('FaceRecognitionNet')\n  }\n\n  public forwardInput(input: NetInput): tf.Tensor2D {\n\n    const { params } = this\n\n    if (!params) {\n      throw new Error('FaceRecognitionNet - load model before inference')\n    }\n\n    return tf.tidy(() => {\n      const batchTensor = input.toBatchTensor(150, true).toFloat()\n\n      const meanRgb = [122.782, 117.001, 104.298]\n      const normalized = normalize(batchTensor, meanRgb).div(tf.scalar(256)) as tf.Tensor4D\n\n      let out = convDown(normalized, params.conv32_down)\n      out = tf.maxPool(out, 3, 2, 'valid')\n\n      out = residual(out, params.conv32_1)\n      out = residual(out, params.conv32_2)\n      out = residual(out, params.conv32_3)\n\n      out = residualDown(out, params.conv64_down)\n      out = residual(out, params.conv64_1)\n      out = residual(out, params.conv64_2)\n      out = residual(out, params.conv64_3)\n\n      out = residualDown(out, params.conv128_down)\n      out = residual(out, params.conv128_1)\n      out = residual(out, params.conv128_2)\n\n      out = residualDown(out, params.conv256_down)\n      out = residual(out, params.conv256_1)\n      out = residual(out, params.conv256_2)\n      out = residualDown(out, params.conv256_down_out)\n\n      const globalAvg = out.mean([1, 2]) as tf.Tensor2D\n      const fullyConnected = tf.matMul(globalAvg, params.fc)\n\n      return fullyConnected\n    })\n  }\n\n  public async forward(input: TNetInput): Promise<tf.Tensor2D> {\n    return this.forwardInput(await toNetInput(input))\n  }\n\n  public async computeFaceDescriptor(input: TNetInput): Promise<Float32Array|Float32Array[]> {\n    const netInput = await toNetInput(input)\n\n    const faceDescriptorTensors = tf.tidy(\n      () => tf.unstack(this.forwardInput(netInput))\n    )\n\n    const faceDescriptorsForBatch = await Promise.all(faceDescriptorTensors.map(\n      t => t.data()\n    )) as Float32Array[]\n\n    faceDescriptorTensors.forEach(t => t.dispose())\n\n    return netInput.isBatchInput\n      ? faceDescriptorsForBatch\n      : faceDescriptorsForBatch[0]\n  }\n\n  protected getDefaultModelName(): string {\n    return 'face_recognition_model'\n  }\n\n  protected extractParamsFromWeigthMap(weightMap: tf.NamedTensorMap) {\n    return extractParamsFromWeigthMap(weightMap)\n  }\n\n  protected extractParams(weights: Float32Array) {\n    return extractParams(weights)\n  }\n}","import { FaceRecognitionNet } from './FaceRecognitionNet';\n\nexport * from './FaceRecognitionNet';\n\nexport function createFaceRecognitionNet(weights: Float32Array) {\n  const net = new FaceRecognitionNet()\n  net.extractWeights(weights)\n  return net\n}","export type WithFaceDescriptor<TSource> = TSource & {\n  descriptor: Float32Array\n}\n\nexport function extendWithFaceDescriptor<\n  TSource\n> (\n  sourceObj: TSource,\n  descriptor: Float32Array\n): WithFaceDescriptor<TSource> {\n\n  const extension = { descriptor }\n  return Object.assign({}, sourceObj, extension)\n}\n\n","import { FaceDetection } from '../classes/FaceDetection';\n\nexport type WithFaceDetection<TSource> = TSource & {\n  detection: FaceDetection\n}\n\nexport function extendWithFaceDetection<\n  TSource\n> (\n  sourceObj: TSource,\n  detection: FaceDetection\n): WithFaceDetection<TSource> {\n\n  const extension = { detection }\n  return Object.assign({}, sourceObj, extension)\n}\n","import { FaceExpressionPrediction } from '../faceExpressionNet/types';\n\nexport type WithFaceExpressions<TSource> = TSource & {\n  expressions: FaceExpressionPrediction[]\n}\n\nexport function extendWithFaceExpressions<\n  TSource\n> (\n  sourceObj: TSource,\n  expressions: FaceExpressionPrediction[]\n): WithFaceExpressions<TSource> {\n\n  const extension = { expressions }\n  return Object.assign({}, sourceObj, extension)\n}","import { FaceDetection } from '../classes/FaceDetection';\nimport { FaceLandmarks } from '../classes/FaceLandmarks';\nimport { FaceLandmarks68 } from '../classes/FaceLandmarks68';\nimport { WithFaceDetection } from './WithFaceDetection';\n\nexport type WithFaceLandmarks<\n  TSource extends WithFaceDetection<{}>,\n  TFaceLandmarks extends FaceLandmarks = FaceLandmarks68\n> = TSource & {\n  landmarks: TFaceLandmarks\n  unshiftedLandmarks: TFaceLandmarks\n  alignedRect: FaceDetection\n}\n\nexport function extendWithFaceLandmarks<\n  TSource extends WithFaceDetection<{}>,\n  TFaceLandmarks extends FaceLandmarks = FaceLandmarks68\n> (\n  sourceObj: TSource,\n  unshiftedLandmarks: TFaceLandmarks\n): WithFaceLandmarks<TSource, TFaceLandmarks> {\n\n  const { box: shift } = sourceObj.detection\n  const landmarks = unshiftedLandmarks.shiftBy<TFaceLandmarks>(shift.x, shift.y)\n\n  const rect = landmarks.align()\n  const { imageDims } = sourceObj.detection\n  const alignedRect = new FaceDetection(sourceObj.detection.score, rect.rescale(imageDims.reverse()), imageDims)\n\n  const extension = {\n    landmarks,\n    unshiftedLandmarks,\n    alignedRect\n  }\n\n  return Object.assign({}, sourceObj, extension)\n}","export interface IMtcnnOptions {\n  minFaceSize?: number\n  scaleFactor?: number\n  maxNumScales?: number\n  scoreThresholds?: number[]\n  scaleSteps?: number[]\n}\n\nexport class MtcnnOptions {\n  protected _name: string = 'MtcnnOptions'\n\n  private _minFaceSize: number\n  private _scaleFactor: number\n  private _maxNumScales: number\n  private _scoreThresholds: number[]\n  private _scaleSteps: number[] | undefined\n\n  constructor({ minFaceSize, scaleFactor, maxNumScales, scoreThresholds, scaleSteps }: IMtcnnOptions = {}) {\n    this._minFaceSize = minFaceSize || 20\n    this._scaleFactor = scaleFactor || 0.709\n    this._maxNumScales = maxNumScales || 10\n    this._scoreThresholds = scoreThresholds || [0.6, 0.7, 0.7]\n    this._scaleSteps = scaleSteps\n\n    if (typeof this._minFaceSize !== 'number' || this._minFaceSize < 0) {\n      throw new Error(`${this._name} - expected minFaceSize to be a number > 0`)\n    }\n\n    if (typeof this._scaleFactor !== 'number' || this._scaleFactor <= 0 || this._scaleFactor >= 1) {\n      throw new Error(`${this._name} - expected scaleFactor to be a number between 0 and 1`)\n    }\n\n    if (typeof this._maxNumScales !== 'number' || this._maxNumScales < 0) {\n      throw new Error(`${this._name} - expected maxNumScales to be a number > 0`)\n    }\n\n    if (\n      !Array.isArray(this._scoreThresholds)\n        || this._scoreThresholds.length !== 3\n        || this._scoreThresholds.some(th => typeof th !== 'number')\n    ) {\n      throw new Error(`${this._name} - expected scoreThresholds to be an array of numbers of length 3`)\n    }\n\n    if (\n      this._scaleSteps\n        && (!Array.isArray(this._scaleSteps) || this._scaleSteps.some(th => typeof th !== 'number'))\n    ) {\n      throw new Error(`${this._name} - expected scaleSteps to be an array of numbers`)\n    }\n  }\n\n  get minFaceSize(): number { return this._minFaceSize }\n  get scaleFactor(): number { return this._scaleFactor }\n  get maxNumScales(): number { return this._maxNumScales }\n  get scoreThresholds(): number[] { return this._scoreThresholds }\n  get scaleSteps(): number[] | undefined { return this._scaleSteps }\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\n\nimport { MobileNetV1, NetParams, PointwiseConvParams, PredictionLayerParams } from './types';\n\nfunction extractorsFactory(extractWeights: TfjsImageRecognitionBase.ExtractWeightsFunction, paramMappings: TfjsImageRecognitionBase.ParamMapping[]) {\n\n  function extractDepthwiseConvParams(numChannels: number, mappedPrefix: string): MobileNetV1.DepthwiseConvParams {\n\n    const filters = tf.tensor4d(extractWeights(3 * 3 * numChannels), [3, 3, numChannels, 1])\n    const batch_norm_scale = tf.tensor1d(extractWeights(numChannels))\n    const batch_norm_offset = tf.tensor1d(extractWeights(numChannels))\n    const batch_norm_mean = tf.tensor1d(extractWeights(numChannels))\n    const batch_norm_variance = tf.tensor1d(extractWeights(numChannels))\n\n    paramMappings.push(\n      { paramPath: `${mappedPrefix}/filters` },\n      { paramPath: `${mappedPrefix}/batch_norm_scale` },\n      { paramPath: `${mappedPrefix}/batch_norm_offset` },\n      { paramPath: `${mappedPrefix}/batch_norm_mean` },\n      { paramPath: `${mappedPrefix}/batch_norm_variance` }\n    )\n\n    return {\n      filters,\n      batch_norm_scale,\n      batch_norm_offset,\n      batch_norm_mean,\n      batch_norm_variance\n    }\n  }\n\n  function extractConvParams(\n    channelsIn: number,\n    channelsOut: number,\n    filterSize: number,\n    mappedPrefix: string,\n    isPointwiseConv?: boolean\n  ): TfjsImageRecognitionBase.ConvParams {\n\n    const filters = tf.tensor4d(\n      extractWeights(channelsIn * channelsOut * filterSize * filterSize),\n      [filterSize, filterSize, channelsIn, channelsOut]\n    )\n    const bias = tf.tensor1d(extractWeights(channelsOut))\n\n    paramMappings.push(\n      { paramPath: `${mappedPrefix}/filters` },\n      { paramPath: `${mappedPrefix}/${isPointwiseConv ? 'batch_norm_offset' : 'bias'}` }\n    )\n\n    return { filters, bias }\n  }\n\n  function extractPointwiseConvParams(\n    channelsIn: number,\n    channelsOut: number,\n    filterSize: number,\n    mappedPrefix: string\n  ): PointwiseConvParams {\n\n    const {\n      filters,\n      bias\n    } = extractConvParams(channelsIn, channelsOut, filterSize, mappedPrefix, true)\n\n    return {\n      filters,\n      batch_norm_offset: bias\n    }\n  }\n\n  function extractConvPairParams(\n    channelsIn: number,\n    channelsOut: number,\n    mappedPrefix: string\n  ): MobileNetV1.ConvPairParams {\n\n    const depthwise_conv = extractDepthwiseConvParams(channelsIn, `${mappedPrefix}/depthwise_conv`)\n    const pointwise_conv = extractPointwiseConvParams(channelsIn, channelsOut, 1, `${mappedPrefix}/pointwise_conv`)\n\n    return { depthwise_conv, pointwise_conv }\n  }\n\n  function extractMobilenetV1Params(): MobileNetV1.Params {\n\n    const conv_0 = extractPointwiseConvParams(3, 32, 3, 'mobilenetv1/conv_0')\n\n    const conv_1 = extractConvPairParams(32, 64, 'mobilenetv1/conv_1')\n    const conv_2 = extractConvPairParams(64, 128, 'mobilenetv1/conv_2')\n    const conv_3 = extractConvPairParams(128, 128, 'mobilenetv1/conv_3')\n    const conv_4 = extractConvPairParams(128, 256, 'mobilenetv1/conv_4')\n    const conv_5 = extractConvPairParams(256, 256, 'mobilenetv1/conv_5')\n    const conv_6 = extractConvPairParams(256, 512, 'mobilenetv1/conv_6')\n    const conv_7 = extractConvPairParams(512, 512, 'mobilenetv1/conv_7')\n    const conv_8 = extractConvPairParams(512, 512, 'mobilenetv1/conv_8')\n    const conv_9 = extractConvPairParams(512, 512, 'mobilenetv1/conv_9')\n    const conv_10 = extractConvPairParams(512, 512, 'mobilenetv1/conv_10')\n    const conv_11 = extractConvPairParams(512, 512, 'mobilenetv1/conv_11')\n    const conv_12 = extractConvPairParams(512, 1024, 'mobilenetv1/conv_12')\n    const conv_13 = extractConvPairParams(1024, 1024, 'mobilenetv1/conv_13')\n\n    return {\n      conv_0,\n      conv_1,\n      conv_2,\n      conv_3,\n      conv_4,\n      conv_5,\n      conv_6,\n      conv_7,\n      conv_8,\n      conv_9,\n      conv_10,\n      conv_11,\n      conv_12,\n      conv_13\n    }\n  }\n\n  function extractPredictionLayerParams(): PredictionLayerParams {\n    const conv_0 = extractPointwiseConvParams(1024, 256, 1, 'prediction_layer/conv_0')\n    const conv_1 = extractPointwiseConvParams(256, 512, 3, 'prediction_layer/conv_1')\n    const conv_2 = extractPointwiseConvParams(512, 128, 1, 'prediction_layer/conv_2')\n    const conv_3 = extractPointwiseConvParams(128, 256, 3, 'prediction_layer/conv_3')\n    const conv_4 = extractPointwiseConvParams(256, 128, 1, 'prediction_layer/conv_4')\n    const conv_5 = extractPointwiseConvParams(128, 256, 3, 'prediction_layer/conv_5')\n    const conv_6 = extractPointwiseConvParams(256, 64, 1, 'prediction_layer/conv_6')\n    const conv_7 = extractPointwiseConvParams(64, 128, 3, 'prediction_layer/conv_7')\n\n    const box_encoding_0_predictor = extractConvParams(512, 12, 1, 'prediction_layer/box_predictor_0/box_encoding_predictor')\n    const class_predictor_0 = extractConvParams(512, 9, 1, 'prediction_layer/box_predictor_0/class_predictor')\n    const box_encoding_1_predictor = extractConvParams(1024, 24, 1, 'prediction_layer/box_predictor_1/box_encoding_predictor')\n    const class_predictor_1 = extractConvParams(1024, 18, 1, 'prediction_layer/box_predictor_1/class_predictor')\n    const box_encoding_2_predictor = extractConvParams(512, 24, 1, 'prediction_layer/box_predictor_2/box_encoding_predictor')\n    const class_predictor_2 = extractConvParams(512, 18, 1, 'prediction_layer/box_predictor_2/class_predictor')\n    const box_encoding_3_predictor = extractConvParams(256, 24, 1, 'prediction_layer/box_predictor_3/box_encoding_predictor')\n    const class_predictor_3 = extractConvParams(256, 18, 1, 'prediction_layer/box_predictor_3/class_predictor')\n    const box_encoding_4_predictor = extractConvParams(256, 24, 1, 'prediction_layer/box_predictor_4/box_encoding_predictor')\n    const class_predictor_4 = extractConvParams(256, 18, 1, 'prediction_layer/box_predictor_4/class_predictor')\n    const box_encoding_5_predictor = extractConvParams(128, 24, 1, 'prediction_layer/box_predictor_5/box_encoding_predictor')\n    const class_predictor_5 = extractConvParams(128, 18, 1, 'prediction_layer/box_predictor_5/class_predictor')\n\n    const box_predictor_0 = {\n      box_encoding_predictor: box_encoding_0_predictor,\n      class_predictor: class_predictor_0\n    }\n    const box_predictor_1 = {\n      box_encoding_predictor: box_encoding_1_predictor,\n      class_predictor: class_predictor_1\n    }\n    const box_predictor_2 = {\n      box_encoding_predictor: box_encoding_2_predictor,\n      class_predictor: class_predictor_2\n    }\n    const box_predictor_3 = {\n      box_encoding_predictor: box_encoding_3_predictor,\n      class_predictor: class_predictor_3\n    }\n    const box_predictor_4 = {\n      box_encoding_predictor: box_encoding_4_predictor,\n      class_predictor: class_predictor_4\n    }\n    const box_predictor_5 = {\n      box_encoding_predictor: box_encoding_5_predictor,\n      class_predictor: class_predictor_5\n    }\n\n    return {\n      conv_0,\n      conv_1,\n      conv_2,\n      conv_3,\n      conv_4,\n      conv_5,\n      conv_6,\n      conv_7,\n      box_predictor_0,\n      box_predictor_1,\n      box_predictor_2,\n      box_predictor_3,\n      box_predictor_4,\n      box_predictor_5\n    }\n  }\n\n  return {\n    extractMobilenetV1Params,\n    extractPredictionLayerParams\n  }\n\n}\n\nexport function extractParams(weights: Float32Array): { params: NetParams, paramMappings: TfjsImageRecognitionBase.ParamMapping[] } {\n\n  const paramMappings: TfjsImageRecognitionBase.ParamMapping[] = []\n\n  const {\n    extractWeights,\n    getRemainingWeights\n  } = TfjsImageRecognitionBase.extractWeightsFactory(weights)\n\n  const {\n    extractMobilenetV1Params,\n    extractPredictionLayerParams\n  } = extractorsFactory(extractWeights, paramMappings)\n\n  const mobilenetv1 = extractMobilenetV1Params()\n  const prediction_layer = extractPredictionLayerParams()\n  const extra_dim = tf.tensor3d(\n    extractWeights(5118 * 4),\n    [1, 5118, 4]\n  )\n  const output_layer = {\n    extra_dim\n  }\n\n  paramMappings.push({ paramPath: 'output_layer/extra_dim' })\n\n  if (getRemainingWeights().length !== 0) {\n    throw new Error(`weights remaing after extract: ${getRemainingWeights().length}`)\n  }\n\n  return {\n    params: {\n      mobilenetv1,\n      prediction_layer,\n      output_layer\n    },\n    paramMappings\n  }\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { isTensor3D, TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\n\nimport { BoxPredictionParams, MobileNetV1, NetParams, PointwiseConvParams, PredictionLayerParams } from './types';\n\nfunction extractorsFactory(weightMap: any, paramMappings: TfjsImageRecognitionBase.ParamMapping[]) {\n\n  const extractWeightEntry = TfjsImageRecognitionBase.extractWeightEntryFactory(weightMap, paramMappings)\n\n  function extractPointwiseConvParams(prefix: string, idx: number, mappedPrefix: string): PointwiseConvParams {\n\n    const filters = extractWeightEntry<tf.Tensor4D>(`${prefix}/Conv2d_${idx}_pointwise/weights`, 4, `${mappedPrefix}/filters`)\n    const batch_norm_offset = extractWeightEntry<tf.Tensor1D>(`${prefix}/Conv2d_${idx}_pointwise/convolution_bn_offset`, 1, `${mappedPrefix}/batch_norm_offset`)\n\n    return { filters, batch_norm_offset }\n  }\n\n  function extractConvPairParams(idx: number): MobileNetV1.ConvPairParams {\n\n    const mappedPrefix = `mobilenetv1/conv_${idx}`\n    const prefixDepthwiseConv = `MobilenetV1/Conv2d_${idx}_depthwise`\n    const mappedPrefixDepthwiseConv = `${mappedPrefix}/depthwise_conv`\n    const mappedPrefixPointwiseConv = `${mappedPrefix}/pointwise_conv`\n\n    const filters = extractWeightEntry<tf.Tensor4D>(`${prefixDepthwiseConv}/depthwise_weights`, 4, `${mappedPrefixDepthwiseConv}/filters`)\n    const batch_norm_scale = extractWeightEntry<tf.Tensor1D>(`${prefixDepthwiseConv}/BatchNorm/gamma`, 1, `${mappedPrefixDepthwiseConv}/batch_norm_scale`)\n    const batch_norm_offset = extractWeightEntry<tf.Tensor1D>(`${prefixDepthwiseConv}/BatchNorm/beta`, 1, `${mappedPrefixDepthwiseConv}/batch_norm_offset`)\n    const batch_norm_mean = extractWeightEntry<tf.Tensor1D>(`${prefixDepthwiseConv}/BatchNorm/moving_mean`, 1, `${mappedPrefixDepthwiseConv}/batch_norm_mean`)\n    const batch_norm_variance = extractWeightEntry<tf.Tensor1D>(`${prefixDepthwiseConv}/BatchNorm/moving_variance`, 1, `${mappedPrefixDepthwiseConv}/batch_norm_variance`)\n\n    return {\n      depthwise_conv: {\n        filters,\n        batch_norm_scale,\n        batch_norm_offset,\n        batch_norm_mean,\n        batch_norm_variance\n      },\n      pointwise_conv: extractPointwiseConvParams('MobilenetV1', idx, mappedPrefixPointwiseConv)\n    }\n  }\n\n  function extractMobilenetV1Params(): MobileNetV1.Params {\n    return {\n      conv_0: extractPointwiseConvParams('MobilenetV1', 0, 'mobilenetv1/conv_0'),\n      conv_1: extractConvPairParams(1),\n      conv_2: extractConvPairParams(2),\n      conv_3: extractConvPairParams(3),\n      conv_4: extractConvPairParams(4),\n      conv_5: extractConvPairParams(5),\n      conv_6: extractConvPairParams(6),\n      conv_7: extractConvPairParams(7),\n      conv_8: extractConvPairParams(8),\n      conv_9: extractConvPairParams(9),\n      conv_10: extractConvPairParams(10),\n      conv_11: extractConvPairParams(11),\n      conv_12: extractConvPairParams(12),\n      conv_13: extractConvPairParams(13)\n    }\n  }\n\n  function extractConvParams(prefix: string, mappedPrefix: string): TfjsImageRecognitionBase.ConvParams {\n    const filters = extractWeightEntry<tf.Tensor4D>(`${prefix}/weights`, 4, `${mappedPrefix}/filters`)\n    const bias = extractWeightEntry<tf.Tensor1D>(`${prefix}/biases`, 1, `${mappedPrefix}/bias`)\n\n    return { filters, bias }\n  }\n\n  function extractBoxPredictorParams(idx: number): BoxPredictionParams {\n\n    const box_encoding_predictor = extractConvParams(\n      `Prediction/BoxPredictor_${idx}/BoxEncodingPredictor`,\n      `prediction_layer/box_predictor_${idx}/box_encoding_predictor`\n    )\n    const class_predictor = extractConvParams(\n      `Prediction/BoxPredictor_${idx}/ClassPredictor`,\n      `prediction_layer/box_predictor_${idx}/class_predictor`\n    )\n\n    return { box_encoding_predictor, class_predictor }\n  }\n\n  function extractPredictionLayerParams(): PredictionLayerParams {\n    return {\n      conv_0: extractPointwiseConvParams('Prediction', 0, 'prediction_layer/conv_0'),\n      conv_1: extractPointwiseConvParams('Prediction', 1, 'prediction_layer/conv_1'),\n      conv_2: extractPointwiseConvParams('Prediction', 2, 'prediction_layer/conv_2'),\n      conv_3: extractPointwiseConvParams('Prediction', 3, 'prediction_layer/conv_3'),\n      conv_4: extractPointwiseConvParams('Prediction', 4, 'prediction_layer/conv_4'),\n      conv_5: extractPointwiseConvParams('Prediction', 5, 'prediction_layer/conv_5'),\n      conv_6: extractPointwiseConvParams('Prediction', 6, 'prediction_layer/conv_6'),\n      conv_7: extractPointwiseConvParams('Prediction', 7, 'prediction_layer/conv_7'),\n      box_predictor_0: extractBoxPredictorParams(0),\n      box_predictor_1: extractBoxPredictorParams(1),\n      box_predictor_2: extractBoxPredictorParams(2),\n      box_predictor_3: extractBoxPredictorParams(3),\n      box_predictor_4: extractBoxPredictorParams(4),\n      box_predictor_5: extractBoxPredictorParams(5)\n    }\n  }\n\n  return {\n    extractMobilenetV1Params,\n    extractPredictionLayerParams\n  }\n}\n\nexport function extractParamsFromWeigthMap(\n  weightMap: tf.NamedTensorMap\n): { params: NetParams, paramMappings: TfjsImageRecognitionBase.ParamMapping[] } {\n\n  const paramMappings: TfjsImageRecognitionBase.ParamMapping[] = []\n\n  const {\n    extractMobilenetV1Params,\n    extractPredictionLayerParams\n  } = extractorsFactory(weightMap, paramMappings)\n\n  const extra_dim = weightMap['Output/extra_dim']\n  paramMappings.push({ originalPath: 'Output/extra_dim', paramPath: 'output_layer/extra_dim' })\n\n  if (!isTensor3D(extra_dim)) {\n    throw new Error(`expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have ${extra_dim}`)\n  }\n\n  const params = {\n    mobilenetv1: extractMobilenetV1Params(),\n    prediction_layer: extractPredictionLayerParams(),\n    output_layer: {\n      extra_dim\n    }\n  }\n\n  TfjsImageRecognitionBase.disposeUnusedWeightTensors(weightMap, paramMappings)\n\n  return { params, paramMappings }\n}","import * as tf from '@tensorflow/tfjs-core';\n\nimport { PointwiseConvParams } from './types';\n\nexport function pointwiseConvLayer(\n  x: tf.Tensor4D,\n  params: PointwiseConvParams,\n  strides: [number, number]\n) {\n  return tf.tidy(() => {\n\n    let out = tf.conv2d(x, params.filters, strides, 'same')\n    out = tf.add(out, params.batch_norm_offset)\n    return tf.clipByValue(out, 0, 6)\n\n  })\n}","import * as tf from '@tensorflow/tfjs-core';\n\nimport { pointwiseConvLayer } from './pointwiseConvLayer';\nimport { MobileNetV1 } from './types';\n\nconst epsilon = 0.0010000000474974513\n\nfunction depthwiseConvLayer(\n  x: tf.Tensor4D,\n  params: MobileNetV1.DepthwiseConvParams,\n  strides: [number, number]\n) {\n  return tf.tidy(() => {\n\n    let out = tf.depthwiseConv2d(x, params.filters, strides, 'same')\n    out = tf.batchNormalization<tf.Rank.R4>(\n      out,\n      params.batch_norm_mean,\n      params.batch_norm_variance,\n      epsilon,\n      params.batch_norm_scale,\n      params.batch_norm_offset\n    )\n    return tf.clipByValue(out, 0, 6)\n\n  })\n}\n\nfunction getStridesForLayerIdx(layerIdx: number): [number, number] {\n  return [2, 4, 6, 12].some(idx => idx === layerIdx) ? [2, 2] : [1, 1]\n}\n\nexport function mobileNetV1(x: tf.Tensor4D, params: MobileNetV1.Params) {\n  return tf.tidy(() => {\n\n    let conv11 = null\n    let out = pointwiseConvLayer(x, params.conv_0, [2, 2])\n\n    const convPairParams = [\n      params.conv_1,\n      params.conv_2,\n      params.conv_3,\n      params.conv_4,\n      params.conv_5,\n      params.conv_6,\n      params.conv_7,\n      params.conv_8,\n      params.conv_9,\n      params.conv_10,\n      params.conv_11,\n      params.conv_12,\n      params.conv_13\n    ]\n\n    convPairParams.forEach((param, i) => {\n      const layerIdx = i + 1\n      const depthwiseConvStrides = getStridesForLayerIdx(layerIdx)\n      out = depthwiseConvLayer(out, param.depthwise_conv, depthwiseConvStrides)\n      out = pointwiseConvLayer(out, param.pointwise_conv, [1, 1])\n      if (layerIdx === 11) {\n        conv11 = out\n      }\n    })\n\n    if (conv11 === null) {\n      throw new Error('mobileNetV1 - output of conv layer 11 is null')\n    }\n\n    return {\n      out,\n      conv11: conv11 as any\n    }\n\n  })\n}","import * as tf from '@tensorflow/tfjs-core'\n\nexport function nonMaxSuppression(\n  boxes: tf.Tensor2D,\n  scores: number[],\n  maxOutputSize: number,\n  iouThreshold: number,\n  scoreThreshold: number\n): number[] {\n\n  const numBoxes = boxes.shape[0]\n  const outputSize = Math.min(\n    maxOutputSize,\n    numBoxes\n  )\n\n  const candidates = scores\n    .map((score, boxIndex) => ({ score, boxIndex }))\n    .filter(c => c.score > scoreThreshold)\n    .sort((c1, c2) => c2.score - c1.score)\n\n  const suppressFunc = (x: number) => x <= iouThreshold ? 1 : 0\n\n  const selected: number[] = []\n\n  candidates.forEach(c => {\n    if (selected.length >= outputSize) {\n      return\n    }\n    const originalScore = c.score\n\n    for (let j = selected.length - 1; j >= 0; --j) {\n      const iou = IOU(boxes, c.boxIndex, selected[j])\n      if (iou === 0.0) {\n        continue\n      }\n      c.score *= suppressFunc(iou)\n      if (c.score <= scoreThreshold) {\n        break\n      }\n    }\n\n    if (originalScore === c.score) {\n      selected.push(c.boxIndex)\n    }\n  })\n\n  return selected\n}\n\nfunction IOU(boxes: tf.Tensor2D, i: number, j: number) {\n  const yminI = Math.min(boxes.get(i, 0), boxes.get(i, 2))\n  const xminI = Math.min(boxes.get(i, 1), boxes.get(i, 3))\n  const ymaxI = Math.max(boxes.get(i, 0), boxes.get(i, 2))\n  const xmaxI = Math.max(boxes.get(i, 1), boxes.get(i, 3))\n  const yminJ = Math.min(boxes.get(j, 0), boxes.get(j, 2))\n  const xminJ = Math.min(boxes.get(j, 1), boxes.get(j, 3))\n  const ymaxJ = Math.max(boxes.get(j, 0), boxes.get(j, 2))\n  const xmaxJ = Math.max(boxes.get(j, 1), boxes.get(j, 3))\n  const areaI = (ymaxI - yminI) * (xmaxI - xminI)\n  const areaJ = (ymaxJ - yminJ) * (xmaxJ - xminJ)\n  if (areaI <= 0 || areaJ <= 0) {\n    return 0.0\n  }\n  const intersectionYmin = Math.max(yminI, yminJ)\n  const intersectionXmin = Math.max(xminI, xminJ)\n  const intersectionYmax = Math.min(ymaxI, ymaxJ)\n  const intersectionXmax = Math.min(xmaxI, xmaxJ)\n  const intersectionArea =\n      Math.max(intersectionYmax - intersectionYmin, 0.0) *\n      Math.max(intersectionXmax - intersectionXmin, 0.0)\n  return intersectionArea / (areaI + areaJ - intersectionArea)\n}","import * as tf from '@tensorflow/tfjs-core';\n\nimport { OutputLayerParams } from './types';\n\n\nfunction getCenterCoordinatesAndSizesLayer(x: tf.Tensor2D) {\n  const vec = tf.unstack(tf.transpose(x, [1, 0]))\n\n  const sizes = [\n    tf.sub(vec[2], vec[0]),\n    tf.sub(vec[3], vec[1])\n  ]\n\n  const centers = [\n    tf.add(vec[0], tf.div(sizes[0], tf.scalar(2))),\n    tf.add(vec[1], tf.div(sizes[1], tf.scalar(2)))\n  ]\n\n  return {\n    sizes,\n    centers\n  }\n}\n\nfunction decodeBoxesLayer(x0: tf.Tensor2D, x1: tf.Tensor2D) {\n  const {\n    sizes,\n    centers\n  } = getCenterCoordinatesAndSizesLayer(x0)\n\n  const vec = tf.unstack(tf.transpose(x1, [1, 0]))\n\n  const div0_out = tf.div(tf.mul(tf.exp(tf.div(vec[2], tf.scalar(5))), sizes[0]), tf.scalar(2))\n  const add0_out = tf.add(tf.mul(tf.div(vec[0], tf.scalar(10)), sizes[0]), centers[0])\n\n  const div1_out = tf.div(tf.mul(tf.exp(tf.div(vec[3], tf.scalar(5))), sizes[1]), tf.scalar(2))\n  const add1_out = tf.add(tf.mul(tf.div(vec[1], tf.scalar(10)), sizes[1]), centers[1])\n\n  return tf.transpose(\n    tf.stack([\n      tf.sub(add0_out, div0_out),\n      tf.sub(add1_out, div1_out),\n      tf.add(add0_out, div0_out),\n      tf.add(add1_out, div1_out)\n    ]),\n    [1, 0]\n  )\n}\n\nexport function outputLayer(\n  boxPredictions: tf.Tensor4D,\n  classPredictions: tf.Tensor4D,\n  params: OutputLayerParams\n) {\n  return tf.tidy(() => {\n\n    const batchSize = boxPredictions.shape[0]\n\n    let boxes = decodeBoxesLayer(\n      tf.reshape(tf.tile(params.extra_dim, [batchSize, 1, 1]), [-1, 4]) as tf.Tensor2D,\n      tf.reshape(boxPredictions, [-1, 4]) as tf.Tensor2D\n    )\n    boxes = tf.reshape(\n      boxes,\n      [batchSize, (boxes.shape[0] / batchSize), 4]\n    )\n\n    const scoresAndClasses = tf.sigmoid(tf.slice(classPredictions, [0, 0, 1], [-1, -1, -1]))\n    let scores = tf.slice(scoresAndClasses, [0, 0, 0], [-1, -1, 1]) as tf.Tensor\n\n    scores = tf.reshape(\n      scores,\n      [batchSize, scores.shape[1] as number]\n    )\n\n    const boxesByBatch = tf.unstack(boxes) as tf.Tensor2D[]\n    const scoresByBatch = tf.unstack(scores) as tf.Tensor1D[]\n\n    return {\n      boxes: boxesByBatch,\n      scores: scoresByBatch\n    }\n\n  })\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\n\nimport { BoxPredictionParams } from './types';\n\n\nexport function boxPredictionLayer(\n  x: tf.Tensor4D,\n  params: BoxPredictionParams\n) {\n  return tf.tidy(() => {\n\n    const batchSize = x.shape[0]\n\n    const boxPredictionEncoding = tf.reshape(\n      TfjsImageRecognitionBase.convLayer(x, params.box_encoding_predictor),\n      [batchSize, -1, 1, 4]\n    )\n    const classPrediction = tf.reshape(\n      TfjsImageRecognitionBase.convLayer(x, params.class_predictor),\n      [batchSize, -1, 3]\n    )\n\n    return {\n      boxPredictionEncoding,\n      classPrediction\n    }\n  })\n}","import * as tf from '@tensorflow/tfjs-core';\n\nimport { boxPredictionLayer } from './boxPredictionLayer';\nimport { pointwiseConvLayer } from './pointwiseConvLayer';\nimport { PredictionLayerParams } from './types';\n\nexport function predictionLayer(\n  x: tf.Tensor4D,\n  conv11: tf.Tensor4D,\n  params: PredictionLayerParams\n) {\n  return tf.tidy(() => {\n\n    const conv0 = pointwiseConvLayer(x, params.conv_0, [1, 1])\n    const conv1 = pointwiseConvLayer(conv0, params.conv_1, [2, 2])\n    const conv2 = pointwiseConvLayer(conv1, params.conv_2, [1, 1])\n    const conv3 = pointwiseConvLayer(conv2, params.conv_3, [2, 2])\n    const conv4 = pointwiseConvLayer(conv3, params.conv_4, [1, 1])\n    const conv5 = pointwiseConvLayer(conv4, params.conv_5, [2, 2])\n    const conv6 = pointwiseConvLayer(conv5, params.conv_6, [1, 1])\n    const conv7 = pointwiseConvLayer(conv6, params.conv_7, [2, 2])\n\n    const boxPrediction0 = boxPredictionLayer(conv11, params.box_predictor_0)\n    const boxPrediction1 = boxPredictionLayer(x, params.box_predictor_1)\n    const boxPrediction2 = boxPredictionLayer(conv1, params.box_predictor_2)\n    const boxPrediction3 = boxPredictionLayer(conv3, params.box_predictor_3)\n    const boxPrediction4 = boxPredictionLayer(conv5, params.box_predictor_4)\n    const boxPrediction5 = boxPredictionLayer(conv7, params.box_predictor_5)\n\n    const boxPredictions = tf.concat([\n      boxPrediction0.boxPredictionEncoding,\n      boxPrediction1.boxPredictionEncoding,\n      boxPrediction2.boxPredictionEncoding,\n      boxPrediction3.boxPredictionEncoding,\n      boxPrediction4.boxPredictionEncoding,\n      boxPrediction5.boxPredictionEncoding\n    ], 1) as tf.Tensor4D\n\n    const classPredictions = tf.concat([\n      boxPrediction0.classPrediction,\n      boxPrediction1.classPrediction,\n      boxPrediction2.classPrediction,\n      boxPrediction3.classPrediction,\n      boxPrediction4.classPrediction,\n      boxPrediction5.classPrediction\n    ], 1) as tf.Tensor4D\n\n    return {\n      boxPredictions,\n      classPredictions\n    }\n  })\n}","export interface ISsdMobilenetv1Options {\n  minConfidence?: number\n  maxResults?: number\n}\n\nexport class SsdMobilenetv1Options {\n  protected _name: string = 'SsdMobilenetv1Options'\n\n  private _minConfidence: number\n  private _maxResults: number\n\n  constructor({ minConfidence, maxResults }: ISsdMobilenetv1Options = {}) {\n    this._minConfidence = minConfidence || 0.5\n    this._maxResults = maxResults || 100\n\n    if (typeof this._minConfidence !== 'number' || this._minConfidence <= 0 || this._minConfidence >= 1) {\n      throw new Error(`${this._name} - expected minConfidence to be a number between 0 and 1`)\n    }\n\n    if (typeof this._maxResults !== 'number') {\n      throw new Error(`${this._name} - expected maxResults to be a number`)\n    }\n  }\n\n  get minConfidence(): number { return this._minConfidence }\n  get maxResults(): number { return this._maxResults }\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { NetInput, NeuralNetwork, Rect, TNetInput, toNetInput } from 'tfjs-image-recognition-base';\n\nimport { FaceDetection } from '../classes/FaceDetection';\nimport { extractParams } from './extractParams';\nimport { extractParamsFromWeigthMap } from './extractParamsFromWeigthMap';\nimport { mobileNetV1 } from './mobileNetV1';\nimport { nonMaxSuppression } from './nonMaxSuppression';\nimport { outputLayer } from './outputLayer';\nimport { predictionLayer } from './predictionLayer';\nimport { ISsdMobilenetv1Options, SsdMobilenetv1Options } from './SsdMobilenetv1Options';\nimport { NetParams } from './types';\n\n\nexport class SsdMobilenetv1 extends NeuralNetwork<NetParams> {\n\n  constructor() {\n    super('SsdMobilenetv1')\n  }\n\n  public forwardInput(input: NetInput) {\n\n    const { params } = this\n\n    if (!params) {\n      throw new Error('SsdMobilenetv1 - load model before inference')\n    }\n\n    return tf.tidy(() => {\n      const batchTensor = input.toBatchTensor(512, false).toFloat()\n\n      const x = tf.sub(tf.mul(batchTensor, tf.scalar(0.007843137718737125)), tf.scalar(1)) as tf.Tensor4D\n      const features = mobileNetV1(x, params.mobilenetv1)\n\n      const {\n        boxPredictions,\n        classPredictions\n      } = predictionLayer(features.out, features.conv11, params.prediction_layer)\n\n      return outputLayer(boxPredictions, classPredictions, params.output_layer)\n    })\n  }\n\n  public async forward(input: TNetInput) {\n    return this.forwardInput(await toNetInput(input))\n  }\n\n  public async locateFaces(\n    input: TNetInput,\n    options: ISsdMobilenetv1Options = {}\n  ): Promise<FaceDetection[]> {\n\n    const { maxResults, minConfidence } = new SsdMobilenetv1Options(options)\n\n    const netInput = await toNetInput(input)\n\n    const {\n      boxes: _boxes,\n      scores: _scores\n    } = this.forwardInput(netInput)\n\n\n    // TODO batches\n    const boxes = _boxes[0]\n    const scores = _scores[0]\n    for (let i = 1; i < _boxes.length; i++) {\n      _boxes[i].dispose()\n      _scores[i].dispose()\n    }\n\n    // TODO find a better way to filter by minConfidence\n    const scoresData = Array.from(await scores.data())\n\n    const iouThreshold = 0.5\n    const indices = nonMaxSuppression(\n      boxes,\n      scoresData,\n      maxResults,\n      iouThreshold,\n      minConfidence\n    )\n\n    const reshapedDims = netInput.getReshapedInputDimensions(0)\n    const inputSize = netInput.inputSize as number\n    const padX = inputSize / reshapedDims.width\n    const padY = inputSize / reshapedDims.height\n\n    const results = indices\n      .map(idx => {\n        const [top, bottom] = [\n          Math.max(0, boxes.get(idx, 0)),\n          Math.min(1.0, boxes.get(idx, 2))\n        ].map(val => val * padY)\n        const [left, right] = [\n          Math.max(0, boxes.get(idx, 1)),\n          Math.min(1.0, boxes.get(idx, 3))\n        ].map(val => val * padX)\n        return new FaceDetection(\n          scoresData[idx],\n          new Rect(\n            left,\n            top,\n            right - left,\n            bottom - top\n          ),\n          {\n            height: netInput.getInputHeight(0),\n            width: netInput.getInputWidth(0)\n          }\n        )\n      })\n\n    boxes.dispose()\n    scores.dispose()\n\n    return results\n  }\n\n  protected getDefaultModelName(): string {\n    return 'ssd_mobilenetv1_model'\n  }\n\n  protected extractParamsFromWeigthMap(weightMap: tf.NamedTensorMap) {\n    return extractParamsFromWeigthMap(weightMap)\n  }\n\n  protected extractParams(weights: Float32Array) {\n    return extractParams(weights)\n  }\n}","import { SsdMobilenetv1 } from './SsdMobilenetv1';\n\nexport * from './SsdMobilenetv1';\nexport * from './SsdMobilenetv1Options';\n\nexport function createSsdMobilenetv1(weights: Float32Array) {\n  const net = new SsdMobilenetv1()\n  net.extractWeights(weights)\n  return net\n}\n\nexport function createFaceDetectionNet(weights: Float32Array) {\n  return createSsdMobilenetv1(weights)\n}\n\n// alias for backward compatibily\nexport class FaceDetectionNet extends SsdMobilenetv1 {}","import { TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\n\nexport interface ITinyFaceDetectorOptions extends TfjsImageRecognitionBase.ITinyYolov2Options {}\n\nexport class TinyFaceDetectorOptions extends TfjsImageRecognitionBase.TinyYolov2Options {\n  protected _name: string = 'TinyFaceDetectorOptions'\n}","export class ComposableTask<T> {\n\n  public async then(\n    onfulfilled: (value: T) => T | PromiseLike<T>\n  ): Promise<T> {\n    return onfulfilled(await this.run())\n  }\n\n  public async run(): Promise<T> {\n    throw new Error('ComposableTask - run is not implemented')\n  }\n}\n","import * as tf from '@tensorflow/tfjs-core';\n\nexport function bgrToRgbTensor(tensor: tf.Tensor4D): tf.Tensor4D {\n  return tf.tidy(\n    () => tf.stack(tf.unstack(tensor, 3).reverse(), 3)\n  ) as tf.Tensor4D\n}","export const CELL_STRIDE = 2\nexport const CELL_SIZE = 12","import * as tf from '@tensorflow/tfjs-core';\nimport { TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\n\nimport { NetParams, ONetParams, PNetParams, RNetParams, SharedParams } from './types';\n\nfunction extractorsFactory(extractWeights: TfjsImageRecognitionBase.ExtractWeightsFunction, paramMappings: TfjsImageRecognitionBase.ParamMapping[]) {\n\n  const extractConvParams = TfjsImageRecognitionBase.extractConvParamsFactory(extractWeights, paramMappings)\n  const extractFCParams = TfjsImageRecognitionBase.extractFCParamsFactory(extractWeights, paramMappings)\n\n  function extractPReluParams(size: number, paramPath: string): tf.Tensor1D {\n    const alpha = tf.tensor1d(extractWeights(size))\n    paramMappings.push({ paramPath })\n    return alpha\n  }\n\n  function extractSharedParams(numFilters: number[], mappedPrefix: string, isRnet: boolean = false): SharedParams {\n\n    const conv1 = extractConvParams(numFilters[0], numFilters[1], 3, `${mappedPrefix}/conv1`)\n    const prelu1_alpha = extractPReluParams(numFilters[1], `${mappedPrefix}/prelu1_alpha`)\n    const conv2 = extractConvParams(numFilters[1], numFilters[2], 3, `${mappedPrefix}/conv2`)\n    const prelu2_alpha = extractPReluParams(numFilters[2], `${mappedPrefix}/prelu2_alpha`)\n    const conv3 = extractConvParams(numFilters[2], numFilters[3], isRnet ? 2 : 3, `${mappedPrefix}/conv3`)\n    const prelu3_alpha = extractPReluParams(numFilters[3], `${mappedPrefix}/prelu3_alpha`)\n\n    return { conv1, prelu1_alpha, conv2, prelu2_alpha, conv3, prelu3_alpha }\n  }\n\n  function extractPNetParams(): PNetParams {\n\n    const sharedParams = extractSharedParams([3, 10, 16, 32], 'pnet')\n    const conv4_1 = extractConvParams(32, 2, 1, 'pnet/conv4_1')\n    const conv4_2 = extractConvParams(32, 4, 1, 'pnet/conv4_2')\n\n    return { ...sharedParams, conv4_1, conv4_2 }\n  }\n\n  function extractRNetParams(): RNetParams {\n\n    const sharedParams = extractSharedParams([3, 28, 48, 64], 'rnet', true)\n    const fc1 = extractFCParams(576, 128, 'rnet/fc1')\n    const prelu4_alpha = extractPReluParams(128, 'rnet/prelu4_alpha')\n    const fc2_1 = extractFCParams(128, 2, 'rnet/fc2_1')\n    const fc2_2 = extractFCParams(128, 4, 'rnet/fc2_2')\n\n    return { ...sharedParams, fc1, prelu4_alpha, fc2_1, fc2_2 }\n  }\n\n  function extractONetParams(): ONetParams {\n\n    const sharedParams = extractSharedParams([3, 32, 64, 64], 'onet')\n    const conv4 = extractConvParams(64, 128, 2, 'onet/conv4')\n    const prelu4_alpha = extractPReluParams(128, 'onet/prelu4_alpha')\n    const fc1 = extractFCParams(1152, 256, 'onet/fc1')\n    const prelu5_alpha = extractPReluParams(256, 'onet/prelu5_alpha')\n    const fc2_1 = extractFCParams(256, 2, 'onet/fc2_1')\n    const fc2_2 = extractFCParams(256, 4, 'onet/fc2_2')\n    const fc2_3 = extractFCParams(256, 10, 'onet/fc2_3')\n\n    return { ...sharedParams, conv4, prelu4_alpha, fc1, prelu5_alpha, fc2_1, fc2_2, fc2_3 }\n  }\n\n  return {\n    extractPNetParams,\n    extractRNetParams,\n    extractONetParams\n  }\n\n}\n\nexport function extractParams(weights: Float32Array): { params: NetParams, paramMappings: TfjsImageRecognitionBase.ParamMapping[] } {\n\n  const {\n    extractWeights,\n    getRemainingWeights\n  } = TfjsImageRecognitionBase.extractWeightsFactory(weights)\n\n  const paramMappings: TfjsImageRecognitionBase.ParamMapping[] = []\n\n  const {\n    extractPNetParams,\n    extractRNetParams,\n    extractONetParams\n  } = extractorsFactory(extractWeights, paramMappings)\n\n  const pnet = extractPNetParams()\n  const rnet = extractRNetParams()\n  const onet = extractONetParams()\n\n  if (getRemainingWeights().length !== 0) {\n    throw new Error(`weights remaing after extract: ${getRemainingWeights().length}`)\n  }\n\n  return { params: { pnet, rnet, onet }, paramMappings }\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\n\nimport { NetParams, ONetParams, PNetParams, RNetParams, SharedParams } from './types';\n\nfunction extractorsFactory(weightMap: any, paramMappings: TfjsImageRecognitionBase.ParamMapping[]) {\n\n  const extractWeightEntry = TfjsImageRecognitionBase.extractWeightEntryFactory(weightMap, paramMappings)\n\n  function extractConvParams(prefix: string): TfjsImageRecognitionBase.ConvParams {\n    const filters = extractWeightEntry<tf.Tensor4D>(`${prefix}/weights`, 4, `${prefix}/filters`)\n    const bias = extractWeightEntry<tf.Tensor1D>(`${prefix}/bias`, 1)\n\n    return { filters, bias }\n  }\n\n  function extractFCParams(prefix: string): TfjsImageRecognitionBase.FCParams {\n    const weights = extractWeightEntry<tf.Tensor2D>(`${prefix}/weights`, 2)\n    const bias = extractWeightEntry<tf.Tensor1D>(`${prefix}/bias`, 1)\n\n    return { weights, bias }\n  }\n\n  function extractPReluParams(paramPath: string): tf.Tensor1D {\n    return extractWeightEntry<tf.Tensor1D>(paramPath, 1)\n  }\n\n  function extractSharedParams(prefix: string): SharedParams {\n\n    const conv1 = extractConvParams(`${prefix}/conv1`)\n    const prelu1_alpha = extractPReluParams(`${prefix}/prelu1_alpha`)\n    const conv2 = extractConvParams(`${prefix}/conv2`)\n    const prelu2_alpha = extractPReluParams(`${prefix}/prelu2_alpha`)\n    const conv3 = extractConvParams(`${prefix}/conv3`)\n    const prelu3_alpha = extractPReluParams(`${prefix}/prelu3_alpha`)\n\n    return { conv1, prelu1_alpha, conv2, prelu2_alpha, conv3, prelu3_alpha }\n  }\n\n  function extractPNetParams(): PNetParams {\n\n    const sharedParams = extractSharedParams('pnet')\n    const conv4_1 = extractConvParams('pnet/conv4_1')\n    const conv4_2 = extractConvParams('pnet/conv4_2')\n\n    return { ...sharedParams, conv4_1, conv4_2 }\n  }\n\n  function extractRNetParams(): RNetParams {\n\n    const sharedParams = extractSharedParams('rnet')\n    const fc1 = extractFCParams('rnet/fc1')\n    const prelu4_alpha = extractPReluParams('rnet/prelu4_alpha')\n    const fc2_1 = extractFCParams('rnet/fc2_1')\n    const fc2_2 = extractFCParams('rnet/fc2_2')\n\n    return { ...sharedParams, fc1, prelu4_alpha, fc2_1, fc2_2 }\n  }\n\n  function extractONetParams(): ONetParams {\n\n    const sharedParams = extractSharedParams('onet')\n    const conv4 = extractConvParams('onet/conv4')\n    const prelu4_alpha = extractPReluParams('onet/prelu4_alpha')\n    const fc1 = extractFCParams('onet/fc1')\n    const prelu5_alpha = extractPReluParams('onet/prelu5_alpha')\n    const fc2_1 = extractFCParams('onet/fc2_1')\n    const fc2_2 = extractFCParams('onet/fc2_2')\n    const fc2_3 = extractFCParams('onet/fc2_3')\n\n    return { ...sharedParams, conv4, prelu4_alpha, fc1, prelu5_alpha, fc2_1, fc2_2, fc2_3 }\n  }\n\n  return {\n    extractPNetParams,\n    extractRNetParams,\n    extractONetParams\n  }\n\n}\n\nexport function extractParamsFromWeigthMap(\n  weightMap: tf.NamedTensorMap\n): { params: NetParams, paramMappings: TfjsImageRecognitionBase.ParamMapping[] } {\n\n  const paramMappings: TfjsImageRecognitionBase.ParamMapping[] = []\n\n  const {\n    extractPNetParams,\n    extractRNetParams,\n    extractONetParams\n  } = extractorsFactory(weightMap, paramMappings)\n\n  const pnet = extractPNetParams()\n  const rnet = extractRNetParams()\n  const onet = extractONetParams()\n\n  TfjsImageRecognitionBase.disposeUnusedWeightTensors(weightMap, paramMappings)\n\n  return { params: { pnet, rnet, onet }, paramMappings }\n}","export function getSizesForScale(scale: number, [height, width]: number[]) {\n  return {\n    height: Math.floor(height * scale),\n    width: Math.floor(width * scale)\n  }\n}","import { CELL_SIZE } from './config';\n\nexport function pyramidDown(minFaceSize: number, scaleFactor: number, dims: number[]): number[] {\n\n  const [height, width] = dims\n  const m = CELL_SIZE / minFaceSize\n\n  const scales = []\n\n  let minLayer = Math.min(height, width) * m\n  let exp = 0\n  while (minLayer >= 12) {\n    scales.push(m * Math.pow(scaleFactor, exp))\n    minLayer = minLayer * scaleFactor\n    exp += 1\n  }\n\n  return scales\n}","import { Box } from 'tfjs-image-recognition-base';\n\nexport class MtcnnBox extends Box<MtcnnBox> {\n  constructor(left: number, top: number, right: number, bottom: number) {\n    super({ left, top, right, bottom }, true)\n  }\n}","import * as tf from '@tensorflow/tfjs-core';\n\nexport function normalize(x: tf.Tensor4D): tf.Tensor4D {\n  return tf.tidy(\n    () => tf.mul(tf.sub(x, tf.scalar(127.5)), tf.scalar(0.0078125))\n  )\n}","import * as tf from '@tensorflow/tfjs-core';\n\nexport function prelu<T extends tf.Tensor>(x: T, alpha: tf.Tensor1D): T {\n  return tf.tidy(() =>\n    tf.add(\n      tf.relu(x),\n      tf.mul(alpha, tf.neg(tf.relu(tf.neg(x))))\n    )\n  )\n}\n","import * as tf from '@tensorflow/tfjs-core';\nimport { TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\n\nimport { prelu } from './prelu';\nimport { SharedParams } from './types';\n\nexport function sharedLayer(x: tf.Tensor4D, params: SharedParams, isPnet: boolean = false) {\n  return tf.tidy(() => {\n\n    let out = TfjsImageRecognitionBase.convLayer(x, params.conv1, 'valid')\n    out = prelu<tf.Tensor4D>(out, params.prelu1_alpha)\n    out = tf.maxPool(out, isPnet ? [2, 2]: [3, 3], [2, 2], 'same')\n    out = TfjsImageRecognitionBase.convLayer(out, params.conv2, 'valid')\n    out = prelu<tf.Tensor4D>(out, params.prelu2_alpha)\n    out = isPnet ? out : tf.maxPool(out, [3, 3], [2, 2], 'valid')\n    out = TfjsImageRecognitionBase.convLayer(out, params.conv3, 'valid')\n    out = prelu<tf.Tensor4D>(out, params.prelu3_alpha)\n\n    return out\n  })\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\n\nimport { sharedLayer } from './sharedLayers';\nimport { PNetParams } from './types';\n\nexport function PNet(x: tf.Tensor4D, params: PNetParams): { prob: tf.Tensor4D, regions: tf.Tensor4D } {\n  return tf.tidy(() => {\n\n    let out = sharedLayer(x, params, true)\n    const conv = TfjsImageRecognitionBase.convLayer(out, params.conv4_1, 'valid')\n    const max = tf.expandDims(tf.max(conv, 3), 3)\n    const prob = tf.softmax(tf.sub(conv, max), 3) as tf.Tensor4D\n    const regions = TfjsImageRecognitionBase.convLayer(out, params.conv4_2, 'valid')\n\n    return { prob, regions }\n  })\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { BoundingBox, nonMaxSuppression, Point } from 'tfjs-image-recognition-base';\n\nimport { CELL_SIZE, CELL_STRIDE } from './config';\nimport { getSizesForScale } from './getSizesForScale';\nimport { MtcnnBox } from './MtcnnBox';\nimport { normalize } from './normalize';\nimport { PNet } from './PNet';\nimport { PNetParams } from './types';\n\nfunction rescaleAndNormalize(x: tf.Tensor4D, scale: number): tf.Tensor4D {\n  return tf.tidy(() => {\n\n    const { height, width } = getSizesForScale(scale, x.shape.slice(1))\n    const resized = tf.image.resizeBilinear(x, [height, width])\n    const normalized = normalize(resized)\n\n    return (tf.transpose(normalized, [0, 2, 1, 3]) as tf.Tensor4D)\n  })\n}\n\nfunction extractBoundingBoxes(\n  scoresTensor: tf.Tensor2D,\n  regionsTensor: tf.Tensor3D,\n  scale: number,\n  scoreThreshold: number\n) {\n\n  // TODO: fix this!, maybe better to use tf.gather here\n  const indices: Point[] = []\n  for (let y = 0; y < scoresTensor.shape[0]; y++) {\n    for (let x = 0; x < scoresTensor.shape[1]; x++) {\n      if (scoresTensor.get(y, x) >= scoreThreshold) {\n        indices.push(new Point(x, y))\n      }\n    }\n  }\n\n  const boundingBoxes = indices.map(idx => {\n    const cell = new BoundingBox(\n      Math.round((idx.y * CELL_STRIDE + 1) / scale),\n      Math.round((idx.x * CELL_STRIDE + 1) / scale),\n      Math.round((idx.y * CELL_STRIDE + CELL_SIZE) / scale),\n      Math.round((idx.x * CELL_STRIDE + CELL_SIZE) / scale)\n    )\n\n    const score = scoresTensor.get(idx.y, idx.x)\n\n    const region = new MtcnnBox(\n      regionsTensor.get(idx.y, idx.x, 0),\n      regionsTensor.get(idx.y, idx.x, 1),\n      regionsTensor.get(idx.y, idx.x, 2),\n      regionsTensor.get(idx.y, idx.x, 3)\n    )\n\n    return {\n      cell,\n      score,\n      region\n    }\n  })\n\n  return boundingBoxes\n}\n\nexport function stage1(\n  imgTensor: tf.Tensor4D,\n  scales: number[],\n  scoreThreshold: number,\n  params: PNetParams,\n  stats: any\n) {\n  stats.stage1 = []\n\n  const pnetOutputs = scales.map((scale) => tf.tidy(() => {\n    const statsForScale: any = { scale }\n    const resized = rescaleAndNormalize(imgTensor, scale)\n\n    let ts = Date.now()\n    const { prob, regions } = PNet(resized, params)\n    statsForScale.pnet = Date.now() - ts\n\n    const scoresTensor = tf.unstack(tf.unstack(prob, 3)[1])[0] as tf.Tensor2D\n    const regionsTensor = tf.unstack(regions)[0] as tf.Tensor3D\n\n    return {\n      scoresTensor,\n      regionsTensor,\n      scale,\n      statsForScale\n    }\n  }))\n\n  const boxesForScale = pnetOutputs.map(({ scoresTensor, regionsTensor, scale, statsForScale }) => {\n    const boundingBoxes = extractBoundingBoxes(\n      scoresTensor,\n      regionsTensor,\n      scale,\n      scoreThreshold\n    )\n\n    scoresTensor.dispose()\n    regionsTensor.dispose()\n\n    if (!boundingBoxes.length) {\n      stats.stage1.push(statsForScale)\n      return []\n    }\n\n    let ts = Date.now()\n    const indices = nonMaxSuppression(\n      boundingBoxes.map(bbox => bbox.cell),\n      boundingBoxes.map(bbox => bbox.score),\n      0.5\n    )\n    statsForScale.nms = Date.now() - ts\n    statsForScale.numBoxes = indices.length\n\n    stats.stage1.push(statsForScale)\n    return indices.map(boxIdx => boundingBoxes[boxIdx])\n  })\n\n  const allBoxes = boxesForScale.reduce(\n    (all, boxes) => all.concat(boxes), []\n  )\n\n  let finalBoxes: BoundingBox[] = []\n  let finalScores: number[] = []\n\n  if (allBoxes.length > 0) {\n    let ts = Date.now()\n    const indices = nonMaxSuppression(\n      allBoxes.map(bbox => bbox.cell),\n      allBoxes.map(bbox => bbox.score),\n      0.7\n    )\n    stats.stage1_nms = Date.now() - ts\n\n    finalScores = indices.map(idx => allBoxes[idx].score)\n    finalBoxes = indices\n      .map(idx => allBoxes[idx])\n      .map(({ cell, region }) =>\n        new BoundingBox(\n          cell.left + (region.left * cell.width),\n          cell.top + (region.top * cell.height),\n          cell.right + (region.right * cell.width),\n          cell.bottom + (region.bottom * cell.height)\n        ).toSquare().round()\n      )\n\n  }\n\n  return {\n    boxes: finalBoxes,\n    scores: finalScores\n  }\n\n}\n","import * as tf from '@tensorflow/tfjs-core';\nimport {\n  Box,\n  createCanvas,\n  createCanvasFromMedia,\n  env,\n  getContext2dOrThrow,\n  IDimensions,\n} from 'tfjs-image-recognition-base';\n\nimport { normalize } from './normalize';\n\nexport async function extractImagePatches(\n  img: HTMLCanvasElement,\n  boxes: Box[],\n  { width, height }: IDimensions\n): Promise<tf.Tensor4D[]> {\n\n\n  const imgCtx = getContext2dOrThrow(img)\n\n  const bitmaps = await Promise.all(boxes.map(async box => {\n    // TODO: correct padding\n    const { y, ey, x, ex } = box.padAtBorders(img.height, img.width)\n\n    const fromX = x - 1\n    const fromY = y - 1\n    const imgData = imgCtx.getImageData(fromX, fromY, (ex - fromX), (ey - fromY))\n\n    return env.isNodejs() ? createCanvasFromMedia(imgData) : createImageBitmap(imgData)\n  }))\n\n  const imagePatchesDatas: number[][] = []\n\n  bitmaps.forEach(bmp => {\n    const patch = createCanvas({ width, height })\n    const patchCtx = getContext2dOrThrow(patch)\n    patchCtx.drawImage(bmp, 0, 0, width, height)\n    const { data } = patchCtx.getImageData(0, 0, width, height)\n\n    const currData = []\n    // RGBA -> BGR\n    for(let i = 0; i < data.length; i+=4) {\n      currData.push(data[i + 2])\n      currData.push(data[i + 1])\n      currData.push(data[i])\n    }\n    imagePatchesDatas.push(currData)\n  })\n\n\n  return imagePatchesDatas.map(data => {\n    const t = tf.tidy(() => {\n      const imagePatchTensor = tf.transpose(\n        tf.tensor4d(data, [1, width, height, 3]),\n        [0, 2, 1, 3]\n      ).toFloat() as tf.Tensor4D\n\n      return normalize(imagePatchTensor)\n    })\n    return t\n  })\n}","import * as tf from '@tensorflow/tfjs-core';\n\nimport { fullyConnectedLayer } from '../common/fullyConnectedLayer';\nimport { prelu } from './prelu';\nimport { sharedLayer } from './sharedLayers';\nimport { RNetParams } from './types';\n\nexport function RNet(x: tf.Tensor4D, params: RNetParams): { scores: tf.Tensor1D, regions: tf.Tensor2D } {\n  return tf.tidy(() => {\n\n    const convOut = sharedLayer(x, params)\n    const vectorized = tf.reshape(convOut, [convOut.shape[0], params.fc1.weights.shape[0]]) as tf.Tensor2D\n    const fc1 = fullyConnectedLayer(vectorized, params.fc1)\n    const prelu4 = prelu<tf.Tensor2D>(fc1, params.prelu4_alpha)\n    const fc2_1 = fullyConnectedLayer(prelu4, params.fc2_1)\n    const max = tf.expandDims(tf.max(fc2_1, 1), 1)\n    const prob = tf.softmax(tf.sub(fc2_1, max), 1) as tf.Tensor2D\n    const regions = fullyConnectedLayer(prelu4, params.fc2_2)\n\n    const scores = tf.unstack(prob, 1)[1] as tf.Tensor1D\n    return { scores, regions }\n  })\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { Box, nonMaxSuppression } from 'tfjs-image-recognition-base';\n\nimport { extractImagePatches } from './extractImagePatches';\nimport { MtcnnBox } from './MtcnnBox';\nimport { RNet } from './RNet';\nimport { RNetParams } from './types';\n\nexport async function stage2(\n  img: HTMLCanvasElement,\n  inputBoxes: Box[],\n  scoreThreshold: number,\n  params: RNetParams,\n  stats: any\n) {\n\n  let ts = Date.now()\n  const rnetInputs = await extractImagePatches(img, inputBoxes, { width: 24, height: 24 })\n  stats.stage2_extractImagePatches = Date.now() - ts\n\n  ts = Date.now()\n  const rnetOuts = rnetInputs.map(\n    rnetInput => {\n      const out = RNet(rnetInput, params)\n      rnetInput.dispose()\n      return out\n    }\n  )\n  stats.stage2_rnet = Date.now() - ts\n\n  const scoresTensor = rnetOuts.length > 1\n    ? tf.concat(rnetOuts.map(out => out.scores))\n    : rnetOuts[0].scores\n  const scores = Array.from(await scoresTensor.data())\n  scoresTensor.dispose()\n\n  const indices = scores\n    .map((score, idx) => ({ score, idx }))\n    .filter(c => c.score > scoreThreshold)\n    .map(({ idx }) => idx)\n\n  const filteredBoxes = indices.map(idx => inputBoxes[idx])\n  const filteredScores = indices.map(idx => scores[idx])\n\n  let finalBoxes: Box[] = []\n  let finalScores: number[] = []\n\n  if (filteredBoxes.length > 0) {\n    ts = Date.now()\n    const indicesNms = nonMaxSuppression(\n      filteredBoxes,\n      filteredScores,\n      0.7\n    )\n    stats.stage2_nms = Date.now() - ts\n\n    const regions = indicesNms.map(idx =>\n      new MtcnnBox(\n        rnetOuts[indices[idx]].regions.get(0, 0),\n        rnetOuts[indices[idx]].regions.get(0, 1),\n        rnetOuts[indices[idx]].regions.get(0, 2),\n        rnetOuts[indices[idx]].regions.get(0, 3)\n      )\n    )\n\n    finalScores = indicesNms.map(idx => filteredScores[idx])\n    finalBoxes = indicesNms.map((idx, i) => filteredBoxes[idx].calibrate(regions[i]))\n  }\n\n  rnetOuts.forEach(t => {\n    t.regions.dispose()\n    t.scores.dispose()\n  })\n\n  return {\n    boxes: finalBoxes,\n    scores: finalScores\n  }\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\n\nimport { fullyConnectedLayer } from '../common/fullyConnectedLayer';\nimport { prelu } from './prelu';\nimport { sharedLayer } from './sharedLayers';\nimport { ONetParams } from './types';\n\nexport function ONet(x: tf.Tensor4D, params: ONetParams): { scores: tf.Tensor1D, regions: tf.Tensor2D, points: tf.Tensor2D } {\n  return tf.tidy(() => {\n\n    let out = sharedLayer(x, params)\n    out = tf.maxPool(out, [2, 2], [2, 2], 'same')\n    out = TfjsImageRecognitionBase.convLayer(out, params.conv4, 'valid')\n    out = prelu<tf.Tensor4D>(out, params.prelu4_alpha)\n\n    const vectorized = tf.reshape(out, [out.shape[0], params.fc1.weights.shape[0]]) as tf.Tensor2D\n    const fc1 = fullyConnectedLayer(vectorized, params.fc1)\n    const prelu5 = prelu<tf.Tensor2D>(fc1, params.prelu5_alpha)\n    const fc2_1 = fullyConnectedLayer(prelu5, params.fc2_1)\n    const max = tf.expandDims(tf.max(fc2_1, 1), 1)\n\n    const prob = tf.softmax(tf.sub(fc2_1, max), 1) as tf.Tensor2D\n    const regions = fullyConnectedLayer(prelu5, params.fc2_2)\n    const points = fullyConnectedLayer(prelu5, params.fc2_3)\n\n    const scores = tf.unstack(prob, 1)[1] as tf.Tensor1D\n    return { scores, regions, points }\n  })\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { BoundingBox, Box, nonMaxSuppression, Point } from 'tfjs-image-recognition-base';\n\nimport { extractImagePatches } from './extractImagePatches';\nimport { MtcnnBox } from './MtcnnBox';\nimport { ONet } from './ONet';\nimport { ONetParams } from './types';\n\nexport async function stage3(\n  img: HTMLCanvasElement,\n  inputBoxes: BoundingBox[],\n  scoreThreshold: number,\n  params: ONetParams,\n  stats: any\n) {\n\n  let ts = Date.now()\n  const onetInputs = await extractImagePatches(img, inputBoxes, { width: 48, height: 48 })\n  stats.stage3_extractImagePatches = Date.now() - ts\n\n  ts = Date.now()\n  const onetOuts = onetInputs.map(\n    onetInput => {\n      const out = ONet(onetInput, params)\n      onetInput.dispose()\n      return out\n    }\n  )\n  stats.stage3_onet = Date.now() - ts\n\n  const scoresTensor = onetOuts.length > 1\n    ? tf.concat(onetOuts.map(out => out.scores))\n    : onetOuts[0].scores\n  const scores = Array.from(await scoresTensor.data())\n  scoresTensor.dispose()\n\n  const indices = scores\n    .map((score, idx) => ({ score, idx }))\n    .filter(c => c.score > scoreThreshold)\n    .map(({ idx }) => idx)\n\n  const filteredRegions = indices.map(idx => new MtcnnBox(\n    onetOuts[idx].regions.get(0, 0),\n    onetOuts[idx].regions.get(0, 1),\n    onetOuts[idx].regions.get(0, 2),\n    onetOuts[idx].regions.get(0, 3)\n  ))\n  const filteredBoxes = indices\n    .map((idx, i) => inputBoxes[idx].calibrate(filteredRegions[i]))\n  const filteredScores = indices.map(idx => scores[idx])\n\n  let finalBoxes: Box[] = []\n  let finalScores: number[] = []\n  let points: Point[][] = []\n\n  if (filteredBoxes.length > 0) {\n\n    ts = Date.now()\n    const indicesNms = nonMaxSuppression(\n      filteredBoxes,\n      filteredScores,\n      0.7,\n      false\n    )\n    stats.stage3_nms = Date.now() - ts\n\n    finalBoxes = indicesNms.map(idx => filteredBoxes[idx])\n    finalScores = indicesNms.map(idx => filteredScores[idx])\n    points = indicesNms.map((idx, i) =>\n      Array(5).fill(0).map((_, ptIdx) =>\n        new Point(\n          ((onetOuts[idx].points.get(0, ptIdx) * (finalBoxes[i].width + 1)) + finalBoxes[i].left) ,\n          ((onetOuts[idx].points.get(0, ptIdx + 5) * (finalBoxes[i].height + 1)) + finalBoxes[i].top)\n        )\n      )\n    )\n  }\n\n  onetOuts.forEach(t => {\n    t.regions.dispose()\n    t.scores.dispose()\n    t.points.dispose()\n  })\n\n  return {\n    boxes: finalBoxes,\n    scores: finalScores,\n    points\n  }\n\n}\n","import * as tf from '@tensorflow/tfjs-core';\nimport { NetInput, NeuralNetwork, Point, Rect, TNetInput, toNetInput } from 'tfjs-image-recognition-base';\n\nimport { FaceDetection } from '../classes/FaceDetection';\nimport { FaceLandmarks5 } from '../classes/FaceLandmarks5';\nimport { extendWithFaceDetection, extendWithFaceLandmarks } from '../factories';\nimport { bgrToRgbTensor } from './bgrToRgbTensor';\nimport { CELL_SIZE } from './config';\nimport { extractParams } from './extractParams';\nimport { extractParamsFromWeigthMap } from './extractParamsFromWeigthMap';\nimport { getSizesForScale } from './getSizesForScale';\nimport { IMtcnnOptions, MtcnnOptions } from './MtcnnOptions';\nimport { pyramidDown } from './pyramidDown';\nimport { stage1 } from './stage1';\nimport { stage2 } from './stage2';\nimport { stage3 } from './stage3';\nimport { MtcnnResult, NetParams } from './types';\n\nexport class Mtcnn extends NeuralNetwork<NetParams> {\n\n  constructor() {\n    super('Mtcnn')\n  }\n\n  public async forwardInput(\n    input: NetInput,\n    forwardParams: IMtcnnOptions = {}\n  ): Promise<{ results: MtcnnResult[], stats: any }> {\n\n    const { params } = this\n\n    if (!params) {\n      throw new Error('Mtcnn - load model before inference')\n    }\n\n    const inputCanvas = input.canvases[0]\n\n    if (!inputCanvas) {\n      throw new Error('Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.')\n    }\n\n    const stats: any = {}\n\n    const tsTotal = Date.now()\n\n    const imgTensor = tf.tidy(() =>\n      bgrToRgbTensor(\n        tf.expandDims(tf.fromPixels(inputCanvas)).toFloat() as tf.Tensor4D\n      )\n    )\n\n    const onReturn = (results: any) => {\n      // dispose tensors on return\n      imgTensor.dispose()\n      stats.total = Date.now() - tsTotal\n      return results\n    }\n\n    const [height, width] = imgTensor.shape.slice(1)\n\n    const {\n      minFaceSize,\n      scaleFactor,\n      maxNumScales,\n      scoreThresholds,\n      scaleSteps\n    } = new MtcnnOptions(forwardParams)\n\n    const scales = (scaleSteps || pyramidDown(minFaceSize, scaleFactor, [height, width]))\n      .filter(scale => {\n        const sizes = getSizesForScale(scale, [height, width])\n        return Math.min(sizes.width, sizes.height) > CELL_SIZE\n      })\n      .slice(0, maxNumScales)\n\n    stats.scales = scales\n    stats.pyramid = scales.map(scale => getSizesForScale(scale, [height, width]))\n\n    let ts = Date.now()\n    const out1 = await stage1(imgTensor, scales, scoreThresholds[0], params.pnet, stats)\n    stats.total_stage1 = Date.now() - ts\n\n    if (!out1.boxes.length) {\n      return onReturn({ results: [], stats })\n    }\n\n    stats.stage2_numInputBoxes = out1.boxes.length\n    // using the inputCanvas to extract and resize the image patches, since it is faster\n    // than doing this on the gpu\n    ts = Date.now()\n    const out2 = await stage2(inputCanvas, out1.boxes, scoreThresholds[1], params.rnet, stats)\n    stats.total_stage2 = Date.now() - ts\n\n    if (!out2.boxes.length) {\n      return onReturn({ results: [], stats })\n    }\n\n    stats.stage3_numInputBoxes = out2.boxes.length\n\n    ts = Date.now()\n    const out3 = await stage3(inputCanvas, out2.boxes, scoreThresholds[2], params.onet, stats)\n    stats.total_stage3 = Date.now() - ts\n\n    const results = out3.boxes.map((box, idx) => extendWithFaceLandmarks(\n      extendWithFaceDetection<{}>(\n        {},\n        new FaceDetection(\n          out3.scores[idx],\n          new Rect(\n            box.left / width,\n            box.top / height,\n            box.width / width,\n            box.height / height\n          ),\n          {\n            height,\n            width\n          }\n        )\n      ),\n      new FaceLandmarks5(\n        out3.points[idx].map(pt => pt.sub(new Point(box.left, box.top)).div(new Point(box.width, box.height))),\n        { width: box.width, height: box.height }\n      )\n    ))\n\n    return onReturn({ results, stats })\n  }\n\n  public async forward(\n    input: TNetInput,\n    forwardParams: IMtcnnOptions = {}\n  ): Promise<MtcnnResult[]> {\n    return (\n      await this.forwardInput(\n        await toNetInput(input),\n        forwardParams\n      )\n    ).results\n  }\n\n  public async forwardWithStats(\n    input: TNetInput,\n    forwardParams: IMtcnnOptions = {}\n  ): Promise<{ results: MtcnnResult[], stats: any }> {\n    return this.forwardInput(\n      await toNetInput(input),\n      forwardParams\n    )\n  }\n\n  protected getDefaultModelName(): string {\n    return 'mtcnn_model'\n  }\n\n  protected extractParamsFromWeigthMap(weightMap: tf.NamedTensorMap) {\n    return extractParamsFromWeigthMap(weightMap)\n  }\n\n  protected extractParams(weights: Float32Array) {\n    return extractParams(weights)\n  }\n}","import { Point } from 'tfjs-image-recognition-base';\n\nexport const IOU_THRESHOLD = 0.4\n\nexport const BOX_ANCHORS = [\n  new Point(1.603231, 2.094468),\n  new Point(6.041143, 7.080126),\n  new Point(2.882459, 3.518061),\n  new Point(4.266906, 5.178857),\n  new Point(9.041765, 10.66308)\n]\n\nexport const MEAN_RGB: [number, number, number] = [117.001, 114.697, 97.404]","import * as tf from '@tensorflow/tfjs-core';\nimport { Point, TfjsImageRecognitionBase, TNetInput } from 'tfjs-image-recognition-base';\n\nimport { FaceDetection } from '../classes';\nimport { BOX_ANCHORS, IOU_THRESHOLD, MEAN_RGB } from './const';\n\nexport class TinyFaceDetector extends TfjsImageRecognitionBase.TinyYolov2 {\n\n  constructor() {\n    const config = {\n      withSeparableConvs: true,\n      iouThreshold: IOU_THRESHOLD,\n      classes: ['face'],\n      anchors: BOX_ANCHORS,\n      meanRgb: MEAN_RGB,\n      isFirstLayerConv2d: true,\n      filterSizes: [3, 16, 32, 64, 128, 256, 512]\n    }\n\n    super(config)\n  }\n\n  public get anchors(): Point[] {\n    return this.config.anchors\n  }\n\n  public async locateFaces(input: TNetInput, forwardParams: TfjsImageRecognitionBase.ITinyYolov2Options): Promise<FaceDetection[]> {\n    const objectDetections = await this.detect(input, forwardParams)\n    return objectDetections.map(det => new FaceDetection(det.score, det.relativeBox, { width: det.imageWidth, height: det.imageHeight }))\n  }\n\n  protected getDefaultModelName(): string {\n    return 'tiny_face_detector_model'\n  }\n\n  protected extractParamsFromWeigthMap(weightMap: tf.NamedTensorMap): { params: TfjsImageRecognitionBase.TinyYolov2NetParams, paramMappings: TfjsImageRecognitionBase.ParamMapping[] } {\n    return super.extractParamsFromWeigthMap(weightMap)\n  }\n}","import { Point } from 'tfjs-image-recognition-base';\n\nexport const IOU_THRESHOLD = 0.4\n\nexport const BOX_ANCHORS = [\n  new Point(0.738768, 0.874946),\n  new Point(2.42204, 2.65704),\n  new Point(4.30971, 7.04493),\n  new Point(10.246, 4.59428),\n  new Point(12.6868, 11.8741)\n]\n\nexport const BOX_ANCHORS_SEPARABLE = [\n  new Point(1.603231, 2.094468),\n  new Point(6.041143, 7.080126),\n  new Point(2.882459, 3.518061),\n  new Point(4.266906, 5.178857),\n  new Point(9.041765, 10.66308)\n]\n\nexport const MEAN_RGB_SEPARABLE: [number, number, number] = [117.001, 114.697, 97.404]\n\nexport const DEFAULT_MODEL_NAME = 'tiny_yolov2_model'\nexport const DEFAULT_MODEL_NAME_SEPARABLE_CONV = 'tiny_yolov2_separable_conv_model'","import * as tf from '@tensorflow/tfjs-core';\nimport { Point, TfjsImageRecognitionBase, TNetInput } from 'tfjs-image-recognition-base';\n\nimport { FaceDetection } from '../classes';\nimport {\n  BOX_ANCHORS,\n  BOX_ANCHORS_SEPARABLE,\n  DEFAULT_MODEL_NAME,\n  DEFAULT_MODEL_NAME_SEPARABLE_CONV,\n  IOU_THRESHOLD,\n  MEAN_RGB_SEPARABLE,\n} from './const';\n\nexport class TinyYolov2 extends TfjsImageRecognitionBase.TinyYolov2 {\n\n  constructor(withSeparableConvs: boolean = true) {\n    const config = Object.assign({}, {\n      withSeparableConvs,\n      iouThreshold: IOU_THRESHOLD,\n      classes: ['face']\n    },\n    withSeparableConvs\n      ? {\n        anchors: BOX_ANCHORS_SEPARABLE,\n        meanRgb: MEAN_RGB_SEPARABLE\n      }\n      : {\n        anchors: BOX_ANCHORS,\n        withClassScores: true\n      }\n    )\n\n    super(config)\n  }\n\n  public get withSeparableConvs(): boolean {\n    return this.config.withSeparableConvs\n  }\n\n  public get anchors(): Point[] {\n    return this.config.anchors\n  }\n\n  public async locateFaces(input: TNetInput, forwardParams: TfjsImageRecognitionBase.ITinyYolov2Options): Promise<FaceDetection[]> {\n    const objectDetections = await this.detect(input, forwardParams)\n    return objectDetections.map(det => new FaceDetection(det.score, det.relativeBox, { width: det.imageWidth, height: det.imageHeight }))\n  }\n\n  protected getDefaultModelName(): string {\n    return this.withSeparableConvs ? DEFAULT_MODEL_NAME_SEPARABLE_CONV : DEFAULT_MODEL_NAME\n  }\n\n  protected extractParamsFromWeigthMap(weightMap: tf.NamedTensorMap): { params: TfjsImageRecognitionBase.TinyYolov2NetParams, paramMappings: TfjsImageRecognitionBase.ParamMapping[] } {\n    return super.extractParamsFromWeigthMap(weightMap)\n  }\n}","import { TinyYolov2 } from './TinyYolov2';\n\nexport { TinyYolov2 }\n\nexport function createTinyYolov2(weights: Float32Array, withSeparableConvs: boolean = true) {\n  const net = new TinyYolov2(withSeparableConvs)\n  net.extractWeights(weights)\n  return net\n}","import { TfjsImageRecognitionBase, TNetInput } from 'tfjs-image-recognition-base';\n\nimport { FaceDetection } from '../classes/FaceDetection';\nimport { FaceLandmarks5 } from '../classes/FaceLandmarks5';\nimport { FaceLandmarks68 } from '../classes/FaceLandmarks68';\nimport { FaceExpressionNet } from '../faceExpressionNet/FaceExpressionNet';\nimport { FaceExpressionPrediction } from '../faceExpressionNet/types';\nimport { FaceLandmark68Net } from '../faceLandmarkNet/FaceLandmark68Net';\nimport { FaceLandmark68TinyNet } from '../faceLandmarkNet/FaceLandmark68TinyNet';\nimport { FaceRecognitionNet } from '../faceRecognitionNet/FaceRecognitionNet';\nimport { WithFaceDetection } from '../factories/WithFaceDetection';\nimport { WithFaceLandmarks } from '../factories/WithFaceLandmarks';\nimport { Mtcnn } from '../mtcnn/Mtcnn';\nimport { MtcnnOptions } from '../mtcnn/MtcnnOptions';\nimport { SsdMobilenetv1 } from '../ssdMobilenetv1/SsdMobilenetv1';\nimport { SsdMobilenetv1Options } from '../ssdMobilenetv1/SsdMobilenetv1Options';\nimport { TinyFaceDetector } from '../tinyFaceDetector/TinyFaceDetector';\nimport { TinyFaceDetectorOptions } from '../tinyFaceDetector/TinyFaceDetectorOptions';\nimport { TinyYolov2 } from '../tinyYolov2';\n\nexport const nets = {\n  ssdMobilenetv1: new SsdMobilenetv1(),\n  tinyFaceDetector: new TinyFaceDetector(),\n  tinyYolov2: new TinyYolov2(),\n  mtcnn: new Mtcnn(),\n  faceLandmark68Net: new FaceLandmark68Net(),\n  faceLandmark68TinyNet: new FaceLandmark68TinyNet(),\n  faceRecognitionNet: new FaceRecognitionNet(),\n  faceExpressionNet: new FaceExpressionNet()\n}\n\n/**\n * Attempts to detect all faces in an image using SSD Mobilenetv1 Network.\n *\n * @param input The input image.\n * @param options (optional, default: see SsdMobilenetv1Options constructor for default parameters).\n * @returns Bounding box of each face with score.\n */\nexport const ssdMobilenetv1 = (input: TNetInput, options: SsdMobilenetv1Options): Promise<FaceDetection[]> =>\n  nets.ssdMobilenetv1.locateFaces(input, options)\n\n/**\n * Attempts to detect all faces in an image using the Tiny Face Detector.\n *\n * @param input The input image.\n * @param options (optional, default: see TinyFaceDetectorOptions constructor for default parameters).\n * @returns Bounding box of each face with score.\n */\nexport const tinyFaceDetector = (input: TNetInput, options: TinyFaceDetectorOptions): Promise<FaceDetection[]> =>\n  nets.tinyFaceDetector.locateFaces(input, options)\n\n/**\n * Attempts to detect all faces in an image using the Tiny Yolov2 Network.\n *\n * @param input The input image.\n * @param options (optional, default: see TinyYolov2Options constructor for default parameters).\n * @returns Bounding box of each face with score.\n */\nexport const tinyYolov2 = (input: TNetInput, options: TfjsImageRecognitionBase.ITinyYolov2Options): Promise<FaceDetection[]> =>\n  nets.tinyYolov2.locateFaces(input, options)\n\n/**\n * Attempts to detect all faces in an image and the 5 point face landmarks\n * of each detected face using the MTCNN Network.\n *\n * @param input The input image.\n * @param options (optional, default: see MtcnnOptions constructor for default parameters).\n * @returns Bounding box of each face with score and 5 point face landmarks.\n */\nexport const mtcnn = (input: TNetInput, options: MtcnnOptions): Promise<WithFaceLandmarks<WithFaceDetection<{}>, FaceLandmarks5>[]> =>\n  nets.mtcnn.forward(input, options)\n\n/**\n * Detects the 68 point face landmark positions of the face shown in an image.\n *\n * @param inputs The face image extracted from the bounding box of a face. Can\n * also be an array of input images, which will be batch processed.\n * @returns 68 point face landmarks or array thereof in case of batch input.\n */\nexport const detectFaceLandmarks = (input: TNetInput): Promise<FaceLandmarks68 | FaceLandmarks68[]> =>\n  nets.faceLandmark68Net.detectLandmarks(input)\n\n/**\n * Detects the 68 point face landmark positions of the face shown in an image\n * using a tinier version of the 68 point face landmark model, which is slightly\n * faster at inference, but also slightly less accurate.\n *\n * @param inputs The face image extracted from the bounding box of a face. Can\n * also be an array of input images, which will be batch processed.\n * @returns 68 point face landmarks or array thereof in case of batch input.\n */\nexport const detectFaceLandmarksTiny = (input: TNetInput): Promise<FaceLandmarks68 | FaceLandmarks68[]>  =>\n  nets.faceLandmark68TinyNet.detectLandmarks(input)\n\n/**\n * Computes a 128 entry vector (face descriptor / face embeddings) from the face shown in an image,\n * which uniquely represents the features of that persons face. The computed face descriptor can\n * be used to measure the similarity between faces, by computing the euclidean distance of two\n * face descriptors.\n *\n * @param inputs The face image extracted from the aligned bounding box of a face. Can\n * also be an array of input images, which will be batch processed.\n * @returns Face descriptor with 128 entries or array thereof in case of batch input.\n */\nexport const computeFaceDescriptor = (input: TNetInput): Promise<Float32Array | Float32Array[]>  =>\n  nets.faceRecognitionNet.computeFaceDescriptor(input)\n\n\n/**\n * Recognizes the facial expressions of a face and returns the likelyhood of\n * each facial expression.\n *\n * @param inputs The face image extracted from the bounding box of a face. Can\n * also be an array of input images, which will be batch processed.\n * @returns An array of facial expressions with corresponding probabilities or array thereof in case of batch input.\n */\nexport const recognizeFaceExpressions = (input: TNetInput): Promise<FaceExpressionPrediction[] | FaceExpressionPrediction[][]> =>\n  nets.faceExpressionNet.predictExpressions(input)\n\nexport const loadSsdMobilenetv1Model = (url: string) => nets.ssdMobilenetv1.load(url)\nexport const loadTinyFaceDetectorModel = (url: string) => nets.tinyFaceDetector.load(url)\nexport const loadMtcnnModel = (url: string) => nets.mtcnn.load(url)\nexport const loadTinyYolov2Model = (url: string) => nets.tinyYolov2.load(url)\nexport const loadFaceLandmarkModel = (url: string) => nets.faceLandmark68Net.load(url)\nexport const loadFaceLandmarkTinyModel = (url: string) => nets.faceLandmark68TinyNet.load(url)\nexport const loadFaceRecognitionModel = (url: string) => nets.faceRecognitionNet.load(url)\nexport const loadFaceExpressionModel = (url: string) => nets.faceExpressionNet.load(url)\n\n// backward compatibility\nexport const loadFaceDetectionModel = loadSsdMobilenetv1Model\nexport const locateFaces = ssdMobilenetv1\nexport const detectLandmarks = detectFaceLandmarks","import * as tf from '@tensorflow/tfjs-core';\nimport { TNetInput } from 'tfjs-image-recognition-base';\n\nimport { extractFaces, extractFaceTensors } from '../dom';\nimport { extendWithFaceDescriptor, WithFaceDescriptor } from '../factories/WithFaceDescriptor';\nimport { WithFaceDetection } from '../factories/WithFaceDetection';\nimport { WithFaceLandmarks } from '../factories/WithFaceLandmarks';\nimport { ComposableTask } from './ComposableTask';\nimport { nets } from './nets';\n\nexport class ComputeFaceDescriptorsTaskBase<TReturn, TParentReturn> extends ComposableTask<TReturn> {\n  constructor(\n    protected parentTask: ComposableTask<TParentReturn> | Promise<TParentReturn>,\n    protected input: TNetInput\n  ) {\n    super()\n  }\n}\n\nexport class ComputeAllFaceDescriptorsTask<\n  TSource extends WithFaceLandmarks<WithFaceDetection<{}>>\n> extends ComputeFaceDescriptorsTaskBase<WithFaceDescriptor<TSource>[], TSource[]> {\n\n  public async run(): Promise<WithFaceDescriptor<TSource>[]> {\n\n    const parentResults = await this.parentTask\n\n    const alignedRects = parentResults.map(({ alignedRect }) => alignedRect)\n    const alignedFaces: Array<HTMLCanvasElement | tf.Tensor3D> = this.input instanceof tf.Tensor\n      ? await extractFaceTensors(this.input, alignedRects)\n      : await extractFaces(this.input, alignedRects)\n\n    const results = await Promise.all(parentResults.map(async (parentResult, i) => {\n      const descriptor = await nets.faceRecognitionNet.computeFaceDescriptor(alignedFaces[i]) as Float32Array\n      return extendWithFaceDescriptor<TSource>(parentResult, descriptor)\n    }))\n\n    alignedFaces.forEach(f => f instanceof tf.Tensor && f.dispose())\n\n    return results\n  }\n}\n\nexport class ComputeSingleFaceDescriptorTask<\n  TSource extends WithFaceLandmarks<WithFaceDetection<{}>>\n> extends ComputeFaceDescriptorsTaskBase<WithFaceDescriptor<TSource> | undefined, TSource | undefined> {\n\n  public async run(): Promise<WithFaceDescriptor<TSource> | undefined> {\n\n    const parentResult = await this.parentTask\n    if (!parentResult) {\n      return\n    }\n\n    const { alignedRect } = parentResult\n    const alignedFaces: Array<HTMLCanvasElement | tf.Tensor3D> = this.input instanceof tf.Tensor\n      ? await extractFaceTensors(this.input, [alignedRect])\n      : await extractFaces(this.input, [alignedRect])\n    const descriptor = await nets.faceRecognitionNet.computeFaceDescriptor(alignedFaces[0]) as Float32Array\n\n    alignedFaces.forEach(f => f instanceof tf.Tensor && f.dispose())\n\n    return extendWithFaceDescriptor(parentResult, descriptor)\n  }\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { TNetInput } from 'tfjs-image-recognition-base';\n\nimport { FaceLandmarks68 } from '../classes/FaceLandmarks68';\nimport { extractFaces, extractFaceTensors } from '../dom';\nimport { FaceLandmark68Net } from '../faceLandmarkNet/FaceLandmark68Net';\nimport { FaceLandmark68TinyNet } from '../faceLandmarkNet/FaceLandmark68TinyNet';\nimport { WithFaceDetection } from '../factories/WithFaceDetection';\nimport { extendWithFaceLandmarks, WithFaceLandmarks } from '../factories/WithFaceLandmarks';\nimport { ComposableTask } from './ComposableTask';\nimport { ComputeAllFaceDescriptorsTask, ComputeSingleFaceDescriptorTask } from './ComputeFaceDescriptorsTasks';\nimport { nets } from './nets';\nimport { PredictAllFaceExpressionsTask, PredictSingleFaceExpressionTask } from './PredictFaceExpressionsTask';\n\nexport class DetectFaceLandmarksTaskBase<TReturn, TParentReturn> extends ComposableTask<TReturn> {\n  constructor(\n    protected parentTask: ComposableTask<TParentReturn> | Promise<TParentReturn>,\n    protected input: TNetInput,\n    protected useTinyLandmarkNet: boolean\n  ) {\n    super()\n  }\n\n  protected get landmarkNet(): FaceLandmark68Net | FaceLandmark68TinyNet {\n    return this.useTinyLandmarkNet\n      ? nets.faceLandmark68TinyNet\n      : nets.faceLandmark68Net\n  }\n}\n\nexport class DetectAllFaceLandmarksTask<\n  TSource extends WithFaceDetection<{}>\n> extends DetectFaceLandmarksTaskBase<WithFaceLandmarks<TSource>[], TSource[]> {\n\n  public async run(): Promise<WithFaceLandmarks<TSource>[]> {\n\n    const parentResults = await this.parentTask\n    const detections = parentResults.map(res => res.detection)\n\n    const faces: Array<HTMLCanvasElement | tf.Tensor3D> = this.input instanceof tf.Tensor\n      ? await extractFaceTensors(this.input, detections)\n      : await extractFaces(this.input, detections)\n\n    const faceLandmarksByFace = await Promise.all(faces.map(\n      face => this.landmarkNet.detectLandmarks(face)\n    )) as FaceLandmarks68[]\n\n    faces.forEach(f => f instanceof tf.Tensor && f.dispose())\n\n    return parentResults.map((parentResult, i) =>\n      extendWithFaceLandmarks<TSource>(parentResult, faceLandmarksByFace[i])\n    )\n  }\n\n  withFaceDescriptors(): ComputeAllFaceDescriptorsTask<WithFaceLandmarks<TSource>> {\n    return new ComputeAllFaceDescriptorsTask<WithFaceLandmarks<TSource>>(this, this.input)\n  }\n}\n\nexport class DetectSingleFaceLandmarksTask<\n  TSource extends WithFaceDetection<{}>\n>  extends DetectFaceLandmarksTaskBase<WithFaceLandmarks<TSource> | undefined, TSource | undefined> {\n\n  public async run(): Promise<WithFaceLandmarks<TSource> | undefined> {\n\n    const parentResult = await this.parentTask\n    if (!parentResult) {\n      return\n    }\n\n    const { detection } = parentResult\n    const faces: Array<HTMLCanvasElement | tf.Tensor3D> = this.input instanceof tf.Tensor\n      ? await extractFaceTensors(this.input, [detection])\n      : await extractFaces(this.input, [detection])\n\n    const landmarks = await this.landmarkNet.detectLandmarks(faces[0]) as FaceLandmarks68\n\n    faces.forEach(f => f instanceof tf.Tensor && f.dispose())\n\n    return extendWithFaceLandmarks<TSource>(parentResult, landmarks)\n  }\n\n  withFaceDescriptor(): ComputeSingleFaceDescriptorTask<WithFaceLandmarks<TSource>> {\n    return new ComputeSingleFaceDescriptorTask<WithFaceLandmarks<TSource>>(this, this.input)\n  }\n}","import * as tf from '@tensorflow/tfjs-core';\nimport { TNetInput } from 'tfjs-image-recognition-base';\n\nimport { extractFaces, extractFaceTensors } from '../dom';\nimport { FaceExpressionPrediction } from '../faceExpressionNet/types';\nimport { WithFaceDetection } from '../factories/WithFaceDetection';\nimport { extendWithFaceExpressions, WithFaceExpressions } from '../factories/WithFaceExpressions';\nimport { ComposableTask } from './ComposableTask';\nimport { DetectAllFaceLandmarksTask, DetectSingleFaceLandmarksTask } from './DetectFaceLandmarksTasks';\nimport { nets } from './nets';\n\nexport class PredictFaceExpressionsTaskBase<TReturn, TParentReturn> extends ComposableTask<TReturn> {\n  constructor(\n    protected parentTask: ComposableTask<TParentReturn> | Promise<TParentReturn>,\n    protected input: TNetInput\n  ) {\n    super()\n  }\n}\n\nexport class PredictAllFaceExpressionsTask<\n  TSource extends WithFaceDetection<{}>\n> extends PredictFaceExpressionsTaskBase<WithFaceExpressions<TSource>[], TSource[]> {\n\n  public async run(): Promise<WithFaceExpressions<TSource>[]> {\n\n    const parentResults = await this.parentTask\n\n    const detections = parentResults.map(parentResult => parentResult.detection)\n    const faces: Array<HTMLCanvasElement | tf.Tensor3D> = this.input instanceof tf.Tensor\n      ? await extractFaceTensors(this.input, detections)\n      : await extractFaces(this.input, detections)\n\n    const faceExpressionsByFace = await Promise.all(faces.map(\n      face => nets.faceExpressionNet.predictExpressions(face)\n    )) as FaceExpressionPrediction[][]\n\n    faces.forEach(f => f instanceof tf.Tensor && f.dispose())\n\n    return parentResults.map(\n      (parentResult, i) => extendWithFaceExpressions<TSource>(parentResult, faceExpressionsByFace[i])\n    )\n  }\n\n  withFaceLandmarks(): DetectAllFaceLandmarksTask<WithFaceExpressions<TSource>> {\n    return new DetectAllFaceLandmarksTask(this, this.input, false)\n  }\n}\n\nexport class PredictSingleFaceExpressionTask<\n  TSource extends WithFaceDetection<{}>\n>  extends PredictFaceExpressionsTaskBase<WithFaceExpressions<TSource> | undefined, TSource | undefined> {\n\n  public async run(): Promise<WithFaceExpressions<TSource> | undefined> {\n\n    const parentResult = await this.parentTask\n    if (!parentResult) {\n      return\n    }\n\n    const { detection } = parentResult\n    const faces: Array<HTMLCanvasElement | tf.Tensor3D> = this.input instanceof tf.Tensor\n      ? await extractFaceTensors(this.input, [detection])\n      : await extractFaces(this.input, [detection])\n\n    const faceExpressions = await nets.faceExpressionNet.predictExpressions(faces[0]) as FaceExpressionPrediction[]\n\n    faces.forEach(f => f instanceof tf.Tensor && f.dispose())\n\n    return extendWithFaceExpressions(parentResult, faceExpressions)\n  }\n\n  withFaceLandmarks(): DetectSingleFaceLandmarksTask<WithFaceExpressions<TSource>> {\n    return new DetectSingleFaceLandmarksTask(this, this.input, false)\n  }\n}","import { TfjsImageRecognitionBase, TNetInput } from 'tfjs-image-recognition-base';\n\nimport { FaceDetection } from '../classes/FaceDetection';\nimport { extendWithFaceDetection, WithFaceDetection } from '../factories/WithFaceDetection';\nimport { MtcnnOptions } from '../mtcnn/MtcnnOptions';\nimport { SsdMobilenetv1Options } from '../ssdMobilenetv1/SsdMobilenetv1Options';\nimport { TinyFaceDetectorOptions } from '../tinyFaceDetector/TinyFaceDetectorOptions';\nimport { ComposableTask } from './ComposableTask';\nimport { DetectAllFaceLandmarksTask, DetectSingleFaceLandmarksTask } from './DetectFaceLandmarksTasks';\nimport { nets } from './nets';\nimport { PredictAllFaceExpressionsTask, PredictSingleFaceExpressionTask } from './PredictFaceExpressionsTask';\nimport { FaceDetectionOptions } from './types';\n\nexport class DetectFacesTaskBase<TReturn> extends ComposableTask<TReturn> {\n  constructor(\n    protected input: TNetInput,\n    protected options: FaceDetectionOptions = new SsdMobilenetv1Options()\n  ) {\n    super()\n  }\n}\n\nexport class DetectAllFacesTask extends DetectFacesTaskBase<FaceDetection[]> {\n\n  public async run(): Promise<FaceDetection[]> {\n\n    const { input, options } = this\n\n    if (options instanceof MtcnnOptions) {\n      return (await nets.mtcnn.forward(input, options))\n        .map(result => result.detection)\n    }\n\n    const faceDetectionFunction = options instanceof TinyFaceDetectorOptions\n      ? (input: TNetInput) => nets.tinyFaceDetector.locateFaces(input, options)\n      : (\n        options instanceof SsdMobilenetv1Options\n          ? (input: TNetInput) => nets.ssdMobilenetv1.locateFaces(input, options)\n          : (\n            options instanceof TfjsImageRecognitionBase.TinyYolov2Options\n              ? (input: TNetInput) => nets.tinyYolov2.locateFaces(input, options)\n              : null\n          )\n      )\n\n    if (!faceDetectionFunction) {\n      throw new Error('detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options')\n    }\n\n    return faceDetectionFunction(input)\n  }\n\n  private runAndExtendWithFaceDetections(): Promise<WithFaceDetection<{}>[]> {\n    return new Promise<WithFaceDetection<{}>[]>(async res => {\n      const detections = await this.run()\n      return res(detections.map(detection => extendWithFaceDetection({}, detection)))\n    })\n  }\n\n  withFaceLandmarks(useTinyLandmarkNet: boolean = false): DetectAllFaceLandmarksTask<WithFaceDetection<{}>> {\n    return new DetectAllFaceLandmarksTask<WithFaceDetection<{}>>(\n      this.runAndExtendWithFaceDetections(),\n      this.input,\n      useTinyLandmarkNet\n    )\n  }\n\n  withFaceExpressions(): PredictAllFaceExpressionsTask<WithFaceDetection<{}>> {\n    return new PredictAllFaceExpressionsTask<WithFaceDetection<{}>>(\n      this.runAndExtendWithFaceDetections(),\n      this.input\n    )\n  }\n}\n\nexport class DetectSingleFaceTask extends DetectFacesTaskBase<FaceDetection | undefined> {\n\n  public async run(): Promise<FaceDetection | undefined> {\n    const faceDetections = await new DetectAllFacesTask(this.input, this.options);\n    let faceDetectionWithHighestScore = faceDetections[0];\n    faceDetections.forEach(faceDetection => {\n      if (faceDetection.score > faceDetectionWithHighestScore.score) {\n        faceDetectionWithHighestScore = faceDetection;\n      }\n    });\n    return faceDetectionWithHighestScore;\n  }\n\n  private runAndExtendWithFaceDetection(): Promise<WithFaceDetection<{}>> {\n    return new Promise<WithFaceDetection<{}>>(async res => {\n      const detection = await this.run()\n      return res(detection ? extendWithFaceDetection<{}>({}, detection) : undefined)\n    })\n  }\n\n  withFaceLandmarks(useTinyLandmarkNet: boolean = false): DetectSingleFaceLandmarksTask<WithFaceDetection<{}>> {\n    return new DetectSingleFaceLandmarksTask<WithFaceDetection<{}>>(\n      this.runAndExtendWithFaceDetection(),\n      this.input,\n      useTinyLandmarkNet\n    )\n  }\n\n  withFaceExpressions(): PredictSingleFaceExpressionTask<WithFaceDetection<{}>> {\n    return new PredictSingleFaceExpressionTask<WithFaceDetection<{}>>(\n      this.runAndExtendWithFaceDetection(),\n      this.input\n    )\n  }\n\n}","import { TNetInput } from 'tfjs-image-recognition-base';\n\nimport { SsdMobilenetv1Options } from '../ssdMobilenetv1/SsdMobilenetv1Options';\nimport { DetectAllFacesTask, DetectSingleFaceTask } from './DetectFacesTasks';\nimport { FaceDetectionOptions } from './types';\n\nexport function detectSingleFace(\n  input: TNetInput,\n  options: FaceDetectionOptions = new SsdMobilenetv1Options()\n): DetectSingleFaceTask {\n  return new DetectSingleFaceTask(input, options)\n}\n\nexport function detectAllFaces(\n  input: TNetInput,\n  options: FaceDetectionOptions = new SsdMobilenetv1Options()\n): DetectAllFacesTask {\n  return new DetectAllFacesTask(input, options)\n}","import { TfjsImageRecognitionBase, TNetInput } from 'tfjs-image-recognition-base';\n\nimport { WithFaceDescriptor, WithFaceDetection, WithFaceLandmarks } from '../factories';\nimport { IMtcnnOptions, MtcnnOptions } from '../mtcnn/MtcnnOptions';\nimport { SsdMobilenetv1Options } from '../ssdMobilenetv1';\nimport { detectAllFaces } from './detectFaces';\n\n// export allFaces API for backward compatibility\n\nexport async function allFacesSsdMobilenetv1(\n  input: TNetInput,\n  minConfidence?: number\n): Promise<WithFaceDescriptor<WithFaceLandmarks<WithFaceDetection<{}>>>[]> {\n  return await detectAllFaces(input, new SsdMobilenetv1Options(minConfidence ? { minConfidence } : {}))\n    .withFaceLandmarks()\n    .withFaceDescriptors()\n}\n\nexport async function allFacesTinyYolov2(\n  input: TNetInput,\n  forwardParams: TfjsImageRecognitionBase.ITinyYolov2Options = {}\n): Promise<WithFaceDescriptor<WithFaceLandmarks<WithFaceDetection<{}>>>[]> {\n  return await detectAllFaces(input, new TfjsImageRecognitionBase.TinyYolov2Options(forwardParams))\n    .withFaceLandmarks()\n    .withFaceDescriptors()\n}\n\nexport async function allFacesMtcnn(\n  input: TNetInput,\n  forwardParams: IMtcnnOptions = {}\n): Promise<WithFaceDescriptor<WithFaceLandmarks<WithFaceDetection<{}>>>[]> {\n  return await detectAllFaces(input, new MtcnnOptions(forwardParams))\n    .withFaceLandmarks()\n    .withFaceDescriptors()\n}\n\nexport const allFaces = allFacesSsdMobilenetv1\n","export function euclideanDistance(arr1: number[] | Float32Array, arr2: number[] | Float32Array) {\n  if (arr1.length !== arr2.length)\n    throw new Error('euclideanDistance: arr1.length !== arr2.length')\n\n  const desc1 = Array.from(arr1)\n  const desc2 = Array.from(arr2)\n\n  return Math.sqrt(\n    desc1\n      .map((val, i) => val - desc2[i])\n      .reduce((res, diff) => res + Math.pow(diff, 2), 0)\n  )\n}","import { FaceMatch } from '../classes/FaceMatch';\nimport { LabeledFaceDescriptors } from '../classes/LabeledFaceDescriptors';\nimport { euclideanDistance } from '../euclideanDistance';\nimport { WithFaceDescriptor } from '../factories';\n\nexport class FaceMatcher {\n\n  private _labeledDescriptors: LabeledFaceDescriptors[]\n  private _distanceThreshold: number\n\n  constructor(\n    inputs: LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>,\n    distanceThreshold: number = 0.6\n  ) {\n\n    this._distanceThreshold = distanceThreshold\n\n    const inputArray = Array.isArray(inputs) ? inputs : [inputs]\n\n    if (!inputArray.length) {\n      throw new Error(`FaceRecognizer.constructor - expected atleast one input`)\n    }\n\n    let count = 1\n    const createUniqueLabel = () => `person ${count++}`\n\n    this._labeledDescriptors = inputArray.map((desc) => {\n      if (desc instanceof LabeledFaceDescriptors) {\n        return desc\n      }\n\n      if (desc instanceof Float32Array) {\n        return new LabeledFaceDescriptors(createUniqueLabel(), [desc])\n      }\n\n      if (desc.descriptor && desc.descriptor instanceof Float32Array) {\n        return new LabeledFaceDescriptors(createUniqueLabel(), [desc.descriptor])\n      }\n\n      throw new Error(`FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>`)\n    })\n  }\n\n  public get labeledDescriptors(): LabeledFaceDescriptors[] { return this._labeledDescriptors }\n  public get distanceThreshold(): number { return this._distanceThreshold }\n\n  public computeMeanDistance(queryDescriptor: Float32Array, descriptors: Float32Array[]): number {\n    return descriptors\n      .map(d => euclideanDistance(d, queryDescriptor))\n      .reduce((d1, d2) => d1 + d2, 0)\n        / (descriptors.length || 1)\n  }\n\n  public matchDescriptor(queryDescriptor: Float32Array): FaceMatch {\n    return this.labeledDescriptors\n      .map(({ descriptors, label }) => new FaceMatch(\n          label,\n          this.computeMeanDistance(queryDescriptor, descriptors)\n      ))\n      .reduce((best, curr) => best.distance < curr.distance ? best : curr)\n  }\n\n  public findBestMatch(queryDescriptor: Float32Array): FaceMatch {\n    const bestMatch = this.matchDescriptor(queryDescriptor)\n    return bestMatch.distance < this.distanceThreshold\n      ? bestMatch\n      : new FaceMatch('unknown', bestMatch.distance)\n  }\n\n}","import { Mtcnn } from './Mtcnn';\n\nexport * from './Mtcnn';\nexport * from './MtcnnOptions';\n\nexport function createMtcnn(weights: Float32Array) {\n  const net = new Mtcnn()\n  net.extractWeights(weights)\n  return net\n}","import { TinyFaceDetector } from './TinyFaceDetector';\n\nexport * from './TinyFaceDetector';\nexport * from './TinyFaceDetectorOptions';\n\nexport function createTinyFaceDetector(weights: Float32Array) {\n  const net = new TinyFaceDetector()\n  net.extractWeights(weights)\n  return net\n}","import { IDimensions } from 'tfjs-image-recognition-base';\n\nimport { FaceDetection } from './classes/FaceDetection';\nimport { FaceLandmarks } from './classes/FaceLandmarks';\nimport { extendWithFaceDetection } from './factories/WithFaceDetection';\nimport { extendWithFaceLandmarks } from './factories/WithFaceLandmarks';\n\nexport function resizeResults<T>(results: T, { width, height }: IDimensions): T {\n\n  if (Array.isArray(results)) {\n    return results.map(obj => resizeResults(obj, { width, height })) as any as T\n  }\n\n  const hasLandmarks = results['unshiftedLandmarks'] && results['unshiftedLandmarks'] instanceof FaceLandmarks\n  const hasDetection = results['detection'] && results['detection'] instanceof FaceDetection\n\n  if (hasLandmarks) {\n    const resizedDetection = results['detection'].forSize(width, height)\n    const resizedLandmarks = results['unshiftedLandmarks'].forSize(resizedDetection.box.width, resizedDetection.box.height)\n\n    return extendWithFaceLandmarks(extendWithFaceDetection(results as any, resizedDetection), resizedLandmarks)\n  }\n\n  if (hasDetection) {\n    return extendWithFaceDetection(results as any, results['detection'].forSize(width, height))\n  }\n\n  if (results instanceof FaceLandmarks || results instanceof FaceDetection) {\n    return (results as any).forSize(width, height)\n  }\n\n  return results\n}"],"names":["tf.tidy","tf.add","tf.conv2d","tf.relu","tf.tensor4d","tf.tensor1d","tf.tensor2d","tf.Tensor","tslib_1.__extends","tslib_1.__assign","tslib_1.__awaiter","tslib_1.__generator","tf.toPixels","tf.io","tf.fill","tf.concat","tf.image","tf.fromPixels","tf.stack","tf.Variable","tf.tensor","tf.sub","tf.mul","tf.scalar","tf.pad","tf.separableConv2d","extractorsFactory","tf.maxPool","tf.unstack","tf.softmax","tf.slice3d","depthwiseSeparableConv","TfjsImageRecognitionBase.SeparableConvParams","TfjsImageRecognitionBase.extractConvParamsFactory","extractParams","TfjsImageRecognitionBase.extractWeightEntryFactory","extractParamsFromWeigthMap","TfjsImageRecognitionBase.disposeUnusedWeightTensors","tf.avgPool","tf.matMul","TfjsImageRecognitionBase.extractFCParamsFactory","convLayer","tf.transpose","tf.zeros","tf.tensor3d","tf.clipByValue","tf.depthwiseConv2d","tf.batchNormalization","nonMaxSuppression","tf.div","tf.exp","tf.reshape","tf.tile","tf.sigmoid","tf.slice","TfjsImageRecognitionBase.convLayer","TfjsImageRecognitionBase.TinyYolov2Options","normalize","tf.neg","tf.expandDims","tf.max","TfjsImageRecognitionBase.TinyYolov2","IOU_THRESHOLD","BOX_ANCHORS","TinyYolov2"],"mappings":"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"}